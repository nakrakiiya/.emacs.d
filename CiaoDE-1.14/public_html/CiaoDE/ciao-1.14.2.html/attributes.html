<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>Attributed variables &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="io_aux.html">&#x25C4;</a><a class="navbutton" href="system_info.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="Builtins.html">PART II - The Ciao basic language (engine)</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>Attributed variables</h1><a class="idx_anchor" href="ciaoliindex.html#attributes"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Christian Holzbaur" href="ciaoauindex.html#Christian Holzbaur">Christian Holzbaur</a>, <a class="idx_anchor" id="Daniel Cabeza" href="ciaoauindex.html#Daniel Cabeza">Daniel Cabeza</a>, <a class="idx_anchor" id="Manuel Carro" href="ciaoauindex.html#Manuel Carro">Manuel Carro</a>.<p>
These predicates allow the manipulation of <a class="idx_anchor" id="0" href="ciaocoindex.html#attributed variables"><em>attributed variables</em></a>. Attributes are special terms which are attached to a (free) variable, and are hidden from the normal Prolog computation. They can only be treated by using the predicates below.<br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/>These predicates are builtin in Ciao, so nothing special has to be done to use them.<LI><strong>Exports:</strong><br/><ul class="itemize_minus"><LI><em>Predicates:</em><br/><a class="idx_anchor" id="1" href="ciaoglindex.html#attach_attribute/2"><tt>attach_attribute/2</tt></a>, <a class="idx_anchor" id="2" href="ciaoglindex.html#get_attribute/2"><tt>get_attribute/2</tt></a>, <a class="idx_anchor" id="3" href="ciaoglindex.html#update_attribute/2"><tt>update_attribute/2</tt></a>, <a class="idx_anchor" id="4" href="ciaoglindex.html#detach_attribute/1"><tt>detach_attribute/1</tt></a>.
<LI><em>Multifiles:</em><br/><a class="idx_anchor" id="5" href="ciaoglindex.html#verify_attribute/2"><tt>verify_attribute/2</tt></a>, <a class="idx_anchor" id="6" href="ciaoglindex.html#combine_attributes/2"><tt>combine_attributes/2</tt></a>.
</ul></ul></div></div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="attach_attribute/2" href="ciaopdindex.html#attach_attribute/2">attach_attribute/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>attach_attribute(Var,Attr)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Attach attribute <span class="var">Attr</span> to <span class="var">Var</span>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Var</span> is a free variable.
</span><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Attr</span> is currently a term which is not a free variable.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Var</span> is a free variable.
</span><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Attr</span> is currently a term which is not a free variable.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="get_attribute/2" href="ciaopdindex.html#get_attribute/2">get_attribute/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>get_attribute(Var,Attr)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Unify <span class="var">Attr</span> with the attribute of <span class="var">Var</span>, or fail if <span class="var">Var</span> has no attribute.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Var</span> is a free variable.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Attr</span> is currently a term which is not a free variable.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="update_attribute/2" href="ciaopdindex.html#update_attribute/2">update_attribute/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>update_attribute(Var,Attr)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Change the attribute of attributed variable <span class="var">Var</span> to <span class="var">Attr</span>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Var</span> is a free variable.
</span><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Attr</span> is currently a term which is not a free variable.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Var</span> is a free variable.
</span><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Attr</span> is currently a term which is not a free variable.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="detach_attribute/1" href="ciaopdindex.html#detach_attribute/1">detach_attribute/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>detach_attribute(Var)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Take out the attribute from the attributed variable <span class="var">Var</span>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Var</span> is a free variable.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Var</span> is a free variable.
</span>
</ul></div></div><p>
</div><div id="Documentation on multifiles"><h2>Documentation on multifiles</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="verify_attribute/2" href="ciaopdindex.html#verify_attribute/2">verify_attribute/2</a>:</div><div class="deftext"><br/>
The predicate is <em>multifile</em>.<br/><p><strong>Usage:</strong> <tt>verify_attribute(Attr,Term)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <em>A user defined predicate.</em> This predicate is called when an attributed variable with attribute <span class="var">Attr</span> is about to be unified with the non-variable term <span class="var">Term</span>. The user should define this predicate (as multifile) in the modules implementing special unification.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Attr</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Term</span> is currently a term which is not a free variable.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Attr</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Term</span> is currently a term which is not a free variable.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="combine_attributes/2" href="ciaopdindex.html#combine_attributes/2">combine_attributes/2</a>:</div><div class="deftext"><br/>
The predicate is <em>multifile</em>.<br/><p><strong>Usage:</strong> <tt>combine_attributes(Var1,Var2)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <em>A user defined predicate.</em> This predicate is called when two attributed variables with attributes <span class="var">Var1</span> and <span class="var">Var2</span> are about to be unified. The user should define this predicate (as multifile) in the modules implementing special unification.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Var1</span> is a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Var2</span> is a free variable.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Var1</span> is a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Var2</span> is a free variable.
</span>
</ul></div></div><p>
</div><div id="Other information"><h2>Other information</h2>
Note that <a class="idx_anchor" id="7" href="ciaoglindex.html#combine_attributes/2"><tt>combine_attributes/2</tt></a> and <a class="idx_anchor" id="8" href="ciaoglindex.html#verify_attribute/2"><tt>verify_attribute/2</tt></a> are not called with the attributed variables involved, but with the corresponding attributes instead. The reasons are:<p><ul> <p><LI>There are simple applications which only refer to the attributes.<p><LI>If the application wants to refer to the attributed variables themselves, they can be made part the attribute term. The implementation of <a class="idx_anchor" id="9" href="ciaoglindex.html#freeze/2"><tt>freeze/2</tt></a> utilizes this technique. Note that this does not lead to cyclic structures, as the connection between an attributed variable and its attribute is invisible to the pure parts of the Prolog implementation.<p><LI>If attributed variables were passed as arguments, the user code would have to refer to the attributes through an extra call to <a class="idx_anchor" id="10" href="ciaoglindex.html#get_attribute/2"><tt>get_attribute/2</tt></a>.<p><LI>As the/one attribute is the first argument to each of the two predicates, indexing applies. Note that attributed variables themselves look like variables to the indexing mechanism.<p></ul> <p>However, future improvements may change or extend the interface to attributed variables in order to provide a richer and more expressive interface.<p>For customized output of attributed variables, please refer to the documentation of the predicate <a class="idx_anchor" id="11" href="ciaoglindex.html#portray_attribute/2"><tt>portray_attribute/2</tt></a>. <br/></div><div id="Known bugs and planned improvements"><h2>Known bugs and planned improvements</h2><ul><LI>Run-time checks have been reported not to work with this code. That means that either the assertions here, or the code that implements the run-time checks are erroneous.</ul></div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Module Sections</h2><ul><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Documentation on exports">Documentation on exports</a><LI><a href="#Documentation on multifiles">Documentation on multifiles</a><LI><a href="#Other information">Other information</a><LI><a href="#Known bugs and planned improvements">Known bugs and planned improvements</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="io_aux.html">&#x25C4;</a><a class="navbutton" href="system_info.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>