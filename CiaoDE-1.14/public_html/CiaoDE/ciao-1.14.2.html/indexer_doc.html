<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>Multiple Argument Indexing &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="pure_doc.html">&#x25C4;</a><a class="navbutton" href="hiord_rt.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="ExtendProlog.html">PART VII - Ciao extensions</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>Multiple Argument Indexing</h1><a class="idx_anchor" href="ciaoliindex.html#indexer"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Anil Nair" href="ciaoauindex.html#Anil Nair">Anil Nair (original work)</a>, <a class="idx_anchor" id="Tom Howland" href="ciaoauindex.html#Tom Howland">Tom Howland (<a href="http://home.pacbell.net/tomjdnh/pd.html">http://home.pacbell.net/tomjdnh/pd.html</a>, derived the original work)</a>, <a class="idx_anchor" id="Francisco Bueno" href="ciaoauindex.html#Francisco Bueno">Francisco Bueno (port to Ciao)</a>.<p>
This package is an extension of the idea of Prolog indexing, usually performed, in a limited way, on the first argument. This package provides more powerful indexing schemes. It lets you pick different arguments to index on, and provides for different combinations of arguments to index on. E.g., it will let you index on the first and third argument or the second and the third argument of a predicate.<p>The indexing is based on computing a hash value for the terms to be indexed upon. Note, however, that the current implementation of the package is done at the source level, so it may sometimes not be as fast as expected. Given this, this version of the package pays off only when the amount of clashing that your original predicate causes without the package superseeds the cost of the hashing function in the package. Such amount of course depends on the number and the form of the facts in your predicate. <br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/>This facility is used as a package, thus either including <a class="idx_anchor" id="0" href="ciaoglindex.html#indexer"><tt>indexer</tt></a> in the package list of the module, or by using the <a class="idx_anchor" id="1" href="ciaoglindex.html#use_package/1"><tt>use_package/1</tt></a> declaration. The facility predicate <a class="idx_anchor" id="2" href="ciaoglindex.html#hash_term/2"><tt>hash_term/2</tt></a>, documented here, is defined in library module <a class="idx_anchor" id="3" href="ciaoglindex.html#indexer(hash)"><tt>indexer(hash)</tt></a>.<LI><strong>Exports:</strong><br/><ul class="itemize_minus"><LI><em>Predicates:</em><br/><a class="idx_anchor" id="4" href="ciaoglindex.html#hash_term/2"><tt>hash_term/2</tt></a>.
</ul><LI><strong>Other modules used:</strong><br/><ul class="itemize_minus"><LI><em>System library modules:</em><br/><a class="idx_anchor" id="5" href="ciaoglindex.html#assertions/native_props"><tt>assertions/native_props</tt></a>, <a class="idx_anchor" id="6" href="ciaoglindex.html#indexer/hash"><tt>indexer/hash</tt></a>.
</ul></ul></div></div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="hash_term/2" href="ciaopdindex.html#hash_term/2">hash_term/2</a>:</div><div class="deftext"><tt>hash_term(Term,HashValue)</tt>
<p>Provides an efficient way to calculate an integer <span class="var">HashValue</span> for a ground <span class="var">Term</span>.<p><strong>Usage 1:</strong> <tt>hash_term(T,N)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">N</span> is a hashing index for <span class="var">T</span>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:ground/1)</span><span><span class="var">T</span> is currently ground (it contains no variables).
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">N</span> is a free variable.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">N</span> is an integer.
</span>
</ul><p><strong>Usage 2:</strong> <tt>hash_term(T,N)</tt>
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (native_props:nonground/1)</span><span><tt><span class="var">T</span></tt> is not ground.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">N</span> is a free variable.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">N</span> is a free variable.
</span>
</ul></div></div><p>
</div><div id="Documentation on internals"><h2>Documentation on internals</h2><div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="index/1" href="ciaodeindex.html#index/1">index/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>index(IndexSpecs)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> Declares an indexing scheme for a predicate. All specs of <span class="var">IndexSpecs</span> must be terms for the same predicate. Each spec declares an indexing on a combination of the arguments. Indexing will be performed using any of the specs in <span class="var">IndexSpecs</span> (being thus interpreted as an or).<p>You should use a <tt>*</tt> in an argument position if you wish to hash on the entire term in that argument. If a <tt>+</tt> is used only one level of the term in the argument is used for hashing. An <tt>i</tt> is used to indicate that argument is already an integer, and therefore its own value will be used for hashing. The argspec <tt>?</tt> simply indicates not to use the argument for indexing.<p>For example, the index specification: <pre>:- index foo(+,?,*,i), foo(?,?,?,i).
</pre> declares indexing for <tt>foo/4</tt> either on a combination of the first, third, and fourht arguments, or only on the last argument, which is an integer. In the first case, only the principal functor of the first argument will be used for hashing; the third argument will be used in its entirety.<p>The argspec <tt>n</tt> is a pragmatic extension and can not be used in conjunction with the other specifiers aside from <tt>?</tt>. It stands for &quot;nonvar&quot; and implies that the argument will not be used for hashing, since only ground terms can effectively be used in hashing. Thus, it can not be used in combination with other specifiers within a particular index specification. It is often the fastest thing to use. <LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (indexer_doc:indexspecs/1)</span><span><span class="var">IndexSpecs</span> is an index specification.
</span>
</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="indexspecs/1" href="ciaoteindex.html#indexspecs/1">indexspecs/1</a>:</div><div class="deftext">An index specification is defined as follows: <pre>indexspecs(Spec) :-
        indexspec(Spec).
indexspecs((Spec,Specs)) :-
        indexspec(Spec),
        indexspecs(Specs).
</pre> <pre>indexspec(Spec) :-
        Spec=..[_F|Args],
        list(Args,argspec).
</pre><p><strong>Usage:</strong> <tt>indexspecs(IndexSpecs)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">IndexSpecs</span> is an index specification.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="argspec/1" href="ciaoteindex.html#argspec/1">argspec/1</a>:</div><div class="deftext">An argument hash specification is defined as follows: <pre>argspec(+).
argspec(*).
argspec(i).
argspec(n).
argspec(?).
</pre><p><strong>Usage:</strong> <tt>argspec(Spec)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Spec</span> is an argument hash specification.</ul></div></div><p>
</div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Module Sections</h2><ul><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Documentation on exports">Documentation on exports</a><LI><a href="#Documentation on internals">Documentation on internals</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="pure_doc.html">&#x25C4;</a><a class="navbutton" href="hiord_rt.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>