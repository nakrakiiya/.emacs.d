<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>menu_generator (library) &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="menu_doc.html">&#x25C4;</a><a class="navbutton" href="davinci.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="Interfaces.html">PART VIII - Interfaces to other languages and systems</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>menu_generator (library)</h1><a class="idx_anchor" href="ciaoliindex.html#menu_generator"></a><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/><tt>:- use_module(library(menu_generator)).</tt><LI><strong>Exports:</strong><br/><ul class="itemize_minus"><LI><em>Predicates:</em><br/><a class="idx_anchor" id="0" href="ciaoglindex.html#menu/1"><tt>menu/1</tt></a>, <a class="idx_anchor" id="1" href="ciaoglindex.html#menu/2"><tt>menu/2</tt></a>, <a class="idx_anchor" id="2" href="ciaoglindex.html#menu/3"><tt>menu/3</tt></a>, <a class="idx_anchor" id="3" href="ciaoglindex.html#menu/4"><tt>menu/4</tt></a>, <a class="idx_anchor" id="4" href="ciaoglindex.html#get_menu_flag/3"><tt>get_menu_flag/3</tt></a>, <a class="idx_anchor" id="5" href="ciaoglindex.html#set_menu_flag/3"><tt>set_menu_flag/3</tt></a>, <a class="idx_anchor" id="6" href="ciaoglindex.html#space/1"><tt>space/1</tt></a>, <a class="idx_anchor" id="7" href="ciaoglindex.html#get_menu_configs/1"><tt>get_menu_configs/1</tt></a>, <a class="idx_anchor" id="8" href="ciaoglindex.html#save_menu_config/1"><tt>save_menu_config/1</tt></a>, <a class="idx_anchor" id="9" href="ciaoglindex.html#remove_menu_config/1"><tt>remove_menu_config/1</tt></a>, <a class="idx_anchor" id="10" href="ciaoglindex.html#restore_menu_config/1"><tt>restore_menu_config/1</tt></a>, <a class="idx_anchor" id="11" href="ciaoglindex.html#show_menu_configs/0"><tt>show_menu_configs/0</tt></a>, <a class="idx_anchor" id="12" href="ciaoglindex.html#show_menu_config/1"><tt>show_menu_config/1</tt></a>, <a class="idx_anchor" id="13" href="ciaoglindex.html#get_menu_options/2"><tt>get_menu_options/2</tt></a>, <a class="idx_anchor" id="14" href="ciaoglindex.html#get_menu_flags/1"><tt>get_menu_flags/1</tt></a>, <a class="idx_anchor" id="15" href="ciaoglindex.html#restore_menu_flags_list/1"><tt>restore_menu_flags_list/1</tt></a>, <a class="idx_anchor" id="16" href="ciaoglindex.html#get_menu_flags/2"><tt>get_menu_flags/2</tt></a>, <a class="idx_anchor" id="17" href="ciaoglindex.html#restore_menu_flags/2"><tt>restore_menu_flags/2</tt></a>, <a class="idx_anchor" id="18" href="ciaoglindex.html#generate_js_menu/1"><tt>generate_js_menu/1</tt></a>, <a class="idx_anchor" id="19" href="ciaoglindex.html#eq/3"><tt>eq/3</tt></a>, <a class="idx_anchor" id="20" href="ciaoglindex.html#neq/3"><tt>neq/3</tt></a>, <a class="idx_anchor" id="21" href="ciaoglindex.html#uni_type/2"><tt>uni_type/2</tt></a>, <a class="idx_anchor" id="22" href="ciaoglindex.html#vmember/2"><tt>vmember/2</tt></a>.
<LI><em>Regular Types:</em><br/><a class="idx_anchor" id="23" href="ciaoglindex.html#menu_flag_values/1"><tt>menu_flag_values/1</tt></a>.
<LI><em>Multifiles:</em><br/><a class="idx_anchor" id="24" href="ciaoglindex.html#$is_persistent/2"><tt>$is_persistent/2</tt></a>, <a class="idx_anchor" id="25" href="ciaoglindex.html#persistent_dir/2"><tt>persistent_dir/2</tt></a>, <a class="idx_anchor" id="26" href="ciaoglindex.html#persistent_dir/4"><tt>persistent_dir/4</tt></a>, <a class="idx_anchor" id="27" href="ciaoglindex.html#menu_default/3"><tt>menu_default/3</tt></a>, <a class="idx_anchor" id="28" href="ciaoglindex.html#menu_opt/6"><tt>menu_opt/6</tt></a>, <a class="idx_anchor" id="29" href="ciaoglindex.html#hook_menu_flag_values/3"><tt>hook_menu_flag_values/3</tt></a>, <a class="idx_anchor" id="30" href="ciaoglindex.html#hook_menu_check_flag_value/3"><tt>hook_menu_check_flag_value/3</tt></a>, <a class="idx_anchor" id="31" href="ciaoglindex.html#hook_menu_flag_help/3"><tt>hook_menu_flag_help/3</tt></a>, <a class="idx_anchor" id="32" href="ciaoglindex.html#hook_menu_default_option/3"><tt>hook_menu_default_option/3</tt></a>.
</ul><LI><strong>Other modules used:</strong><br/><ul class="itemize_minus"><LI><em>System library modules:</em><br/><a class="idx_anchor" id="33" href="ciaoglindex.html#persdb/persdbrt"><tt>persdb/persdbrt</tt></a>, <a class="idx_anchor" id="34" href="ciaoglindex.html#aggregates"><tt>aggregates</tt></a>, <a class="idx_anchor" id="35" href="ciaoglindex.html#write"><tt>write</tt></a>, <a class="idx_anchor" id="36" href="ciaoglindex.html#messages"><tt>messages</tt></a>, <a class="idx_anchor" id="37" href="ciaoglindex.html#prompt"><tt>prompt</tt></a>, <a class="idx_anchor" id="38" href="ciaoglindex.html#lists"><tt>lists</tt></a>.
</ul></ul></div></div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="menu/1" href="ciaopdindex.html#menu/1">menu/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>menu(M)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Like menu( M , true ).</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="menu/2" href="ciaopdindex.html#menu/2">menu/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>menu(M,Bool)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Like <a class="idx_anchor" id="39" href="ciaoglindex.html#menu/4"><tt>menu/4</tt></a> with no selected options, taking the menu level from the term <span class="var">M</span> (example: ana(1) is expert, ana is naive), and using <span class="var">Bool</span> to decide whether print help message or not.</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="menu/3" href="ciaopdindex.html#menu/3">menu/3</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>menu(M,Level,Bool)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Like <a class="idx_anchor" id="40" href="ciaoglindex.html#menu/4"><tt>menu/4</tt></a> with no selected options.</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="menu/4" href="ciaopdindex.html#menu/4">menu/4</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>menu(M,Level,Bool,AlreadySelectedOpts)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Execute the menu <tt>X</tt>. <span class="var">Level</span> specifies the menu level. <span class="var">Bool</span> decides whether print the help message. <span class="var">AlreadySelectedOpts</span> is a list with the selected options.</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="get_menu_flag/3" href="ciaopdindex.html#get_menu_flag/3">get_menu_flag/3</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>get_menu_flag(M,F,V)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Returns the value in <span class="var">V</span> of the flag <span class="var">F</span> in the menu (-branch) <span class="var">M</span>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:atom/1)</span><span><span class="var">M</span> is currently instantiated to an atom.
</span><br/><span class="on_right"> (term_typing:atom/1)</span><span><span class="var">F</span> is currently instantiated to an atom.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">V</span> is a free variable.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="set_menu_flag/3" href="ciaopdindex.html#set_menu_flag/3">set_menu_flag/3</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>set_menu_flag(M,F,V)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Set the value <span class="var">V</span> of the flag <span class="var">F</span> in the menu (-branch) <span class="var">M</span>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:atom/1)</span><span><span class="var">M</span> is currently instantiated to an atom.
</span><br/><span class="on_right"> (term_typing:atom/1)</span><span><span class="var">F</span> is currently instantiated to an atom.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">V</span> is a free variable.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="space/1" href="ciaopdindex.html#space/1">space/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>space(N)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> prints <span class="var">N</span> spaces.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:num/1)</span><span><span class="var">N</span> is a number.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="get_menu_configs/1" href="ciaopdindex.html#get_menu_configs/1">get_menu_configs/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>get_menu_configs(X)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Returns a list of atoms in <span class="var">X</span> with the name of stored configurations.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">X</span> is a free variable.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:list/2)</span><span><span class="var">X</span> is a list of <span class="var">atom</span>s.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="save_menu_config/1" href="ciaopdindex.html#save_menu_config/1">save_menu_config/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>save_menu_config(Name)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Save the current flags configuration under the <span class="var">Name</span> key.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Name</span> is an atom.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="remove_menu_config/1" href="ciaopdindex.html#remove_menu_config/1">remove_menu_config/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>remove_menu_config(Name)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Remove the configuration stored with the <span class="var">Name</span> key (the same provided in <a class="idx_anchor" id="41" href="ciaoglindex.html#save_menu_config/1"><tt>save_menu_config/1</tt></a>).<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Name</span> is an atom.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="restore_menu_config/1" href="ciaopdindex.html#restore_menu_config/1">restore_menu_config/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>restore_menu_config(Name)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Restore the configuration saved with the <span class="var">Name</span> key (the same provided in <a class="idx_anchor" id="42" href="ciaoglindex.html#save_menu_config/1"><tt>save_menu_config/1</tt></a>).<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Name</span> is an atom.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="show_menu_configs/0" href="ciaopdindex.html#show_menu_configs/0">show_menu_configs/0</a>:</div><div class="deftext"><p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>Description:</em> Show all stored configurations.</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="show_menu_config/1" href="ciaopdindex.html#show_menu_config/1">show_menu_config/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>show_menu_config(C)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Show specific configuration values pointed by <span class="var">C</span> key (the same provided in <a class="idx_anchor" id="43" href="ciaoglindex.html#save_menu_config/1"><tt>save_menu_config/1</tt></a>).<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">C</span> is an atom.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="get_menu_options/2" href="ciaopdindex.html#get_menu_options/2">get_menu_options/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>get_menu_options(Flag,V)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Returns possilbe options in <span class="var">V</span> by fail for the flag <span class="var">Flag</span>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:atom/1)</span><span><span class="var">F</span> is currently instantiated to an atom.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="get_menu_flags/1" href="ciaopdindex.html#get_menu_flags/1">get_menu_flags/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>get_menu_flags(L)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Return a list <span class="var">L</span> of all current menu flags, composed by terms with the form (M,F,V), where M is the menu, F the flag, and V the value. This list can be used as argument of <a class="idx_anchor" id="44" href="ciaoglindex.html#restore_flags_list/1"><tt>restore_flags_list/1</tt></a><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">L</span> is a free variable.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:list/1)</span><span><span class="var">L</span> is a list.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="restore_menu_flags_list/1" href="ciaopdindex.html#restore_menu_flags_list/1">restore_menu_flags_list/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>restore_menu_flags_list(L)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Restores menu flags. <span class="var">L</span> is a list of tuple (M,F,V) where M is the menu, F is the flag, and V is the value of the flag F in the menu M.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:list/1)</span><span><span class="var">L</span> is a list.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="get_menu_flags/2" href="ciaopdindex.html#get_menu_flags/2">get_menu_flags/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>get_menu_flags(M,L)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Return a list <span class="var">L</span> of the current menu <span class="var">M</span> composed by terms with the form (F=V), F the flag, and V the value. This list can be used as argument of <a class="idx_anchor" id="45" href="ciaoglindex.html#restore_menu_flags/2"><tt>restore_menu_flags/2</tt></a><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">M</span> is any term.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">L</span> is a free variable.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:list/1)</span><span><span class="var">L</span> is a list.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="restore_menu_flags/2" href="ciaopdindex.html#restore_menu_flags/2">restore_menu_flags/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>restore_menu_flags(M,F)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Restore the flag of the menu <span class="var">M</span>. <span class="var">F</span> is a list of terms F=V, which indicate the flag (F) and the value (V). <span class="var">M</span> is the target menu to which those flags &quot;belong&quot;. Additionally, <span class="var">F</span> can contains terms like <tt>changed_to_menu(NM)</tt> that will put NM as the new target menu.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:atom/1)</span><span><span class="var">M</span> is currently instantiated to an atom.
</span><br/><span class="on_right"> (basic_props:list/1)</span><span><span class="var">F</span> is a list.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="generate_js_menu/1" href="ciaopdindex.html#generate_js_menu/1">generate_js_menu/1</a>:</div><div class="deftext">Internal Info. Short description and general ideas about how the JS menu is generated.<p>The current model for the JS menu is an array of <tt>menuq</tt> (object in JS).<p><pre>var assert_rtcheck = menus.length ;
var v_assert_rtcheck ;
menus[ menus.length ] = new menuq( 
	&quot;assert_rtcheck&quot;,
        &quot;Perform Run-Time Checks&quot;,
        &quot;none,pred,pp_assrt,pp_code&quot;,
        &quot;none&quot;,
        &apos;((v_menu_level == &quot;expert&quot;) &amp;&amp;
          (v_inter_all == &quot;check_assertions&quot;))&apos; ) ;
</pre> <p>A variable with the same name as the <em>flag name</em> is created with the value of the index of the menu in the array. Another variable with &apos;v_&apos; (v = value) indicates the value (of the flag) choosed by the user in the combo-boxes that appear on the webpage (note you should not read this if you have not seen the webpage working). The object <tt>menuq</tt> holds several things: the flag name (to find out the index in the array in some JS functions), the title, the options (notice there is no space in the options, this is important!), default option and the guard.<p>All the problem here is to generate the (JS) guard, because the rest of information is the same as in <a class="idx_anchor" id="46" href="ciaoglindex.html#menu_opt/6"><tt>menu_opt/6</tt></a>. What code does is to execute the guard in prolog, and obtain a list of the form [flag=value,flag2=value2...]. Aditionally an element of the list can be another list, which indicates that the join operator (&amp;&amp; or ||) is swaped. For example: [a=1,[b=2,c=3],d=4] will be translated in JS like ((a==1)&amp;&amp;((b==2)||(c==3))&amp;&amp;(d==4)).<p>Prolog Guards (the ones in menu_opt) have been rewritten in order to do not generate free variables, i.e., they are finite guards now. So calling them with a variable in its first argument, we get the list like the named in the previous paragraph.<p>% Unfortunately, the current CiaoPP menu does not have all information % itself to concatenate several menus, i.e., when asking which kind of % action the user desire, depending on the answer one path or another % one is taken. Who decide which path? &apos;auto_inteface&apos; does. We do have % to take this into account, because generating the assertions of a % &quot;subpath&quot; will produce the activation of it without permision of the % father (the menu which launch it).<p>Also, we have to keep in mind that menu has several submenus (or branches) defined and ones connect with others. For example, the menu<p><pre>all, &apos;Select Menu Level&apos;   # menu_level - naive.
all, &apos;Select Action Group&apos; # inter_all  - analyze :: all_menu_branch.

check(1), &apos;Perform Compile-Time Checks&apos; # assert_ctcheck - on.
...

ana     , &apos;Select Aliasing-Mode Analysis&apos; # modes - shfr &lt;- true. 
</pre> <p>defines 3 menus: <tt>all</tt>, <tt>check(1)</tt>, and <tt>ana</tt>. It usually happends that one menu invoques (connect or continue) with another menu (then it is a submenu or a branch). When generating the guards we have to add additional restrictions to the guards in order to make submenus do not appear in the incorrect moment. For example, <tt>check(1)</tt> menu will be only active if <tt>menu_level = expert</tt> and <tt>inter_all=check_assertions</tt> (more on this come later). How are several menus connected between each other? The process of connecting the menus is post-processing the selected flags (options) via post hook (the one defined after :: field). The post-processing hook only have to add the element <tt>ask_menu(Branch,Level)</tt> or <tt>ask_menu(Branch)</tt> to the selected flag list (the argument of the hook). So let us say that when calling all_menu_branch( X , Y ) we get:<p><pre>?- all_menu_branch(A,B).

A = [inter_all=optimize,menu_level=naive|_A],
B = [ask_menu(opt,0),inter_all=optimize,menu_level=naive|_A] ? ;

A = [inter_all=optimize,menu_level=expert|_A],
B = [ask_menu(opt,1),inter_all=optimize,menu_level=expert|_A] ? ;

A = [inter_all=analyze,menu_level=naive|_A],
B = [ask_menu(ana,0),inter_all=analyze,menu_level=naive|_A] ? ;

A = [inter_all=analyze,menu_level=expert|_A],
B = [ask_menu(ana,1),inter_all=analyze,menu_level=expert|_A] ? ;

A = [inter_all=check_assertions,menu_level=naive|_A],
B = [ask_menu(check,0),inter_all=check_assertions,menu_level=naive|_A] ? ;

A = [inter_all=check_assertions,menu_level=expert|_A],
B = [ask_menu(check,1),inter_all=check_assertions,menu_level=expert|_A] ? ;

A = [inter_all=check_certificate,menu_level=_B|_A],
B = [inter_all=check_certificate,menu_level=_B|_A] ? ;

A = [inter_all=optimize,_A,menu_level=naive|_B],
B = [ask_menu(opt,0),inter_all=optimize,_A,menu_level=naive|_B] ? 
</pre> <p>Notice that the last option contains free variables in the list (not taking the tail into account). That is the indicator for us to stop searching for more solutions. Additionally, we can have more complex things like:<p><pre>?- opt_menu_branch(A,B).

A = [menu_level=naive,inter_optimize=_A|_B],
B = [ask_menu(_A,0),menu_level=naive,inter_optimize=_A|_B] ? ;

A = [menu_level=expert,inter_optimize=_A|_B],
B = [ask_menu(_A,1),menu_level=expert,inter_optimize=_A|_B] ? ;

A = [menu_level=naive,_B,inter_optimize=_A|_C],
B = [ask_menu(_A,0),menu_level=naive,_B,inter_optimize=_A|_C] ? 
</pre> <p>In this situation, the menu that will be asked will depend on the value of the flag <tt>inter_optimize</tt>, so we will have to generate as many ask_menu as possible values the flag has. The predicate <a class="idx_anchor" id="47" href="ciaoglindex.html#generate_menu_path/2"><tt>generate_menu_path/2</tt></a> solves all this problem: for a given flag, it looks up to find out the guard composed by flags that will activate the flag. % This predicate also consider the problem of menu aliasing, % i.e., the option optimize in inter_ana menu launch opt menu, so % optimize is an alias for opt or vice-versa. For example, for the given flag <tt>ass_not_stat_eval</tt>, the path is: [v_menu_level=expert, v_inter_all=check_assertions], that means that <tt>menu_level</tt> flag has to have the value &quot;expert&quot; and the <tt>inter_all</tt> flag has to have the value &quot;check_assertions&quot; (note that menu_level and inter_all defines two menu branches). If we would execute only the precondition we would get: [v_assert_ctcheck=on].<p>There are % two one limitations imposed to the JS menu. % The menu level indicated by <tt>menu_level</tt> flag, is hirewired. The % other limitation is more serious. All flags values in the JS menu are mapped into one set of flags. In other words, changing a value of a shared flag by two menu branch will be reflected on the other branch. For example, changing type analysis in <tt>analyze</tt> menu branch, will modify the value of the same flag in <tt>check assertions</tt> branch.<p>The last point to name is about generated JS guards. This world is not fair, and sometimes happends things you just do not expect. Here is one of those things. When calling the Prolog guards with the list of current selected values, the cases that can occur are much less than when seeing all the possible combinations. Something like (a=true||a=1)&amp;&amp;(b=2), in Prolog guard execution (with instantiated things) will mean: the selected options are not nil, and a=1 and b=2, or in other words: (a==1)&amp;&amp;(b==2). But in JS, unfortunately means: b=2. Nowadays, this problem is solved by <a class="idx_anchor" id="48" href="ciaoglindex.html#clean_imperative_guard/2"><tt>clean_imperative_guard/2</tt></a> which tries to remove all stupid <tt>true</tt> conditions, but I am sure Murphy is listening to me now and he started to create an user to make the call <a class="idx_anchor" id="49" href="ciaoglindex.html#clean_imperative_guard/2"><tt>clean_imperative_guard/2</tt></a> generates wrong answer.<p><strong>Usage:</strong> <tt>generate_js_menu(DoNotIncludeList)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Reads all multifile <a class="idx_anchor" id="50" href="ciaoglindex.html#menu_opt/6"><tt>menu_opt/6</tt></a> predicates and writes in default output a JavaScript Menu.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:list/1)</span><span><span class="var">DoNotIncludeList</span> is a list.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="eq/3" href="ciaopdindex.html#eq/3">eq/3</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>eq(Type,A,B)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Type</span> is the value returned by the 2nd arg of <a class="idx_anchor" id="51" href="ciaoglindex.html#uni_type"><tt>uni_type</tt></a>. <span class="var">A</span> and <span class="var">B</span> are whatever terms. This predicate success if they are equal (like A=B).</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="neq/3" href="ciaopdindex.html#neq/3">neq/3</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>neq(Type,A,B)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Type</span> is the value returned by the 2nd arg of <a class="idx_anchor" id="52" href="ciaoglindex.html#uni_type"><tt>uni_type</tt></a>. <span class="var">A</span> and <span class="var">B</span> are whatever terms. The semantic is similar to A == B.</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="uni_type/2" href="ciaopdindex.html#uni_type/2">uni_type/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>uni_type(Var,Type)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Var</span> should be the argument passed to the menu guard. <span class="var">Type</span> is an abstract type that decides how unifications should be done in <a class="idx_anchor" id="53" href="ciaoglindex.html#eq/3"><tt>eq/3</tt></a> and <a class="idx_anchor" id="54" href="ciaoglindex.html#neq/3"><tt>neq/3</tt></a>.</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="vmember/2" href="ciaopdindex.html#vmember/2">vmember/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>vmember(Var,List)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> It is <a class="idx_anchor" id="55" href="ciaoglindex.html#member"><tt>member</tt></a> equivalent predicate to be used in guards.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="menu_flag_values/1" href="ciaoteindex.html#menu_flag_values/1">menu_flag_values/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>menu_flag_values(X)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Flag values</ul></div></div><p>
</div><div id="Documentation on multifiles"><h2>Documentation on multifiles</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="$is_persistent/2" href="ciaopdindex.html#$is_persistent/2">$is_persistent/2</a>:</div><div class="deftext">No further documentation available for this predicate.<br/>
The predicate is <em>multifile</em>.<br/>
The predicate is of type <em>data</em>.<br/></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="persistent_dir/2" href="ciaopdindex.html#persistent_dir/2">persistent_dir/2</a>:</div><div class="deftext">No further documentation available for this predicate.<br/>
The predicate is <em>multifile</em>.<br/>
The predicate is of type <em>data</em>.<br/></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="persistent_dir/4" href="ciaopdindex.html#persistent_dir/4">persistent_dir/4</a>:</div><div class="deftext">No further documentation available for this predicate.<br/>
The predicate is <em>multifile</em>.<br/>
The predicate is of type <em>data</em>.<br/></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="menu_default/3" href="ciaopdindex.html#menu_default/3">menu_default/3</a>:</div><div class="deftext"><br/>
The predicate is <em>multifile</em>.<br/><p><strong>Usage 1:</strong> <tt>menu_default(Menu,Flag,DefaultValue)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Menu</span> is a term that has to correspond with the 1st argument of <a class="idx_anchor" id="56" href="ciaoglindex.html#Menu"><tt>Menu</tt></a>. <span class="var">Flag</span> is the desired flag to have a default value. <span class="var">DefaultValue</span> is the default value of <span class="var">Flag</span>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Menu</span> is any term.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Flag</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">DefaultValue</span> is an atom.
</span>
</ul><p><strong>Usage 2:</strong> <tt>menu_default(Menu,Flag,DefaultValue)</tt>
<ul class="itemize_minus"><LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Menu</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Flag</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">DefaultValue</span> is an atom.
</span>
</ul><p><strong>Usage 3:</strong> <tt>menu_default(Menu,Flag,DefaultValue)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> This call mode can be used to ask which flags and its values has a menu <span class="var">menu</span><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Menu</span> is an atom.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Flag</span> is a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">DefaultValue</span> is a free variable.
</span>
</ul><p><strong>Usage 4:</strong> <tt>menu_default(Menu,Flag,DefaultValue)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> This call mode can be used to ask which value have the flag <span class="var">Flag</span> in the menu <span class="var">menu</span><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Menu</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Flag</span> is an atom.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">DefaultValue</span> is a free variable.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="menu_opt/6" href="ciaopdindex.html#menu_opt/6">menu_opt/6</a>:</div><div class="deftext"><br/>
The predicate is <em>multifile</em>.<br/><p><strong>Usage 1:</strong> <tt>menu_opt(Menu,Flag,Text,Guard,BeforePrinting,SelectedHook)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Menu</span> is a term that specifies the menu name. It can be an atom or just a predicate of arity 1, where the 1st argument indicates the menu level (i.e., ana(1) is the level 1 of &apos;ana&apos; menu). <span class="var">Flag</span> is the flag that will be asked.<p><span class="var">Text</span> is the test that will be printed when asking the <span class="var">Flag</span>.<p><span class="var">Guard</span> is a predicate of arity 1 that is invoked to see if the flag should be asked. The argument is the selected menu options till moment in the way: [flag1=value1, flag2=value2, ...].<p><span class="var">BeforePrinting</span> is a predicate of arity 0, that is invoked whenever the menu option has been selected the validator menu options chooser.<p><span class="var">SelectedHook</span> is a predicate of arity 2, that is invoked whenever the flag has been selected by the user. The 1st argument are the current selected values, including the current flag, and in the 2nd argument the possible modified list is expected.<p>In summary, if <span class="var">Guard</span> holds, then <span class="var">BeforePrinting</span> is executed (no action is taken whether it fails or not), and after the user has types the option <span class="var">SelectedHook</span> is invoked.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Menu</span> is any term.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Flag</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Text</span> is an atom.
</span><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">Guard</span> is a term which represents a goal, i.e., an atom or a structure.
</span><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">BeforePrinting</span> is a term which represents a goal, i.e., an atom or a structure.
</span><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">SelectedHook</span> is a term which represents a goal, i.e., an atom or a structure.
</span>
</ul><p><strong>Usage 2:</strong> <tt>menu_opt(Menu,Flag,Text,Guard,BeforePrinting,SelectedHook)</tt>
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Menu</span> is any term.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Flag</span> is any term.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Text</span> is any term.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Guard</span> is any term.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">BeforePrinting</span> is any term.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">SelectedHook</span> is any term.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="hook_menu_flag_values/3" href="ciaopdindex.html#hook_menu_flag_values/3">hook_menu_flag_values/3</a>:</div><div class="deftext"><br/>
The predicate is <em>multifile</em>.<br/><p><strong>Usage:</strong> <tt>hook_menu_flag_values(Menu,Flag,Values)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> It is a hook. It is invoked whenever a menu question is printed. <span class="var">Values</span> is a term which specifies the possible values. If <span class="var">Values</span> is alist(List) -atom list-, then menu will check if the typed value by user belongs to List. If <span class="var">Values</span> is a term ask(T,Flag), the menu will invoke <a class="idx_anchor" id="57" href="ciaoglindex.html#hook_menu_check_flag_value/3"><tt>hook_menu_check_flag_value/3</tt></a> hook to check if introduced value is valid.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:atom/1)</span><span><span class="var">Menu</span> is currently instantiated to an atom.
</span><br/><span class="on_right"> (term_typing:atom/1)</span><span><span class="var">Flag</span> is currently instantiated to an atom.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Values</span> is a free variable.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (menu_generator:menu_flag_values/1)</span><span>Flag values
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="hook_menu_check_flag_value/3" href="ciaopdindex.html#hook_menu_check_flag_value/3">hook_menu_check_flag_value/3</a>:</div><div class="deftext"><br/>
The predicate is <em>multifile</em>.<br/><p><strong>Usage:</strong> <tt>hook_menu_check_flag_value(M,F,V)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> It is a hook. It is invoked whenever the menu needs to check whether the answer introduced for the menu <span class="var">M</span> is correct. This happens when <a class="idx_anchor" id="58" href="ciaoglindex.html#hook_menu_flag_values/3"><tt>hook_menu_flag_values/3</tt></a> returns in its second argument something different than alist(_).</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="hook_menu_flag_help/3" href="ciaopdindex.html#hook_menu_flag_help/3">hook_menu_flag_help/3</a>:</div><div class="deftext"><br/>
The predicate is <em>multifile</em>.<br/><p><strong>Usage:</strong> <tt>hook_menu_flag_help(M,F,H)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> It is a hook. It is invoked whenever the user ask for a help description, <span class="var">H</span>, of the flag <span class="var">F</span> in the menu <span class="var">M</span>.</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="hook_menu_default_option/3" href="ciaopdindex.html#hook_menu_default_option/3">hook_menu_default_option/3</a>:</div><div class="deftext"><br/>
The predicate is <em>multifile</em>.<br/><p><strong>Usage:</strong> <tt>hook_menu_default_option(M,F,D)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> It is a hook. It is invoked whenever the menu needs to offer a default option to the user in the menu <span class="var">M</span> and it has not been neither introduced before nor specified by <a class="idx_anchor" id="59" href="ciaoglindex.html#menu_default/3"><tt>menu_default/3</tt></a>.</ul></div></div><p>
</div><div id="Known bugs and planned improvements"><h2>Known bugs and planned improvements</h2><ul><LI>Run-time checks have been reported not to work with this code. That means that either the assertions here, or the code that implements the run-time checks are erroneous.</ul></div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Module Sections</h2><ul><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Documentation on exports">Documentation on exports</a><LI><a href="#Documentation on multifiles">Documentation on multifiles</a><LI><a href="#Known bugs and planned improvements">Known bugs and planned improvements</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="menu_doc.html">&#x25C4;</a><a class="navbutton" href="davinci.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>