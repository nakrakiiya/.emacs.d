<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>All solutions predicates &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="iso_doc.html">&#x25C4;</a><a class="navbutton" href="dynamic_rt.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="IsoProlog.html">PART III - ISO-Prolog library (iso)</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>All solutions predicates</h1><a class="idx_anchor" href="ciaoliindex.html#aggregates"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Richard A. O&apos;Keefe" href="ciaoauindex.html#Richard A. O&apos;Keefe">Richard A. O&apos;Keefe (first version)</a>, <a class="idx_anchor" id="David H.D. Warren" href="ciaoauindex.html#David H.D. Warren">David H.D. Warren (first version)</a>, <a class="idx_anchor" id="Mats Carlsson" href="ciaoauindex.html#Mats Carlsson">Mats Carlsson (changes)</a>, <a class="idx_anchor" id="Daniel Cabeza" href="ciaoauindex.html#Daniel Cabeza">Daniel Cabeza</a>, <a class="idx_anchor" id="Manuel Hermenegildo" href="ciaoauindex.html#Manuel Hermenegildo">Manuel Hermenegildo</a>.<p>
This module implements the standard solution aggregation predicates.<p>When there are many solutions to a problem, and when all those solutions are required to be collected together, this can be achieved by repeatedly backtracking and gradually building up a list of the solutions. The following built-in predicates are provided to automate this process.<p><br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/><tt>:- use_module(library(aggregates)).</tt><LI><strong>Exports:</strong><br/><ul class="itemize_minus"><LI><em>Predicates:</em><br/><a class="idx_anchor" id="0" href="ciaoglindex.html#setof/3"><tt>setof/3</tt></a>, <a class="idx_anchor" id="1" href="ciaoglindex.html#bagof/3"><tt>bagof/3</tt></a>, <a class="idx_anchor" id="2" href="ciaoglindex.html#findall/3"><tt>findall/3</tt></a>, <a class="idx_anchor" id="3" href="ciaoglindex.html#findall/4"><tt>findall/4</tt></a>, <a class="idx_anchor" id="4" href="ciaoglindex.html#findnsols/4"><tt>findnsols/4</tt></a>, <a class="idx_anchor" id="5" href="ciaoglindex.html#findnsols/5"><tt>findnsols/5</tt></a>, <a class="idx_anchor" id="6" href="ciaoglindex.html#^/2"><tt>^/2</tt></a>.
</ul><LI><strong>Other modules used:</strong><br/><ul class="itemize_minus"><LI><em>System library modules:</em><br/><a class="idx_anchor" id="7" href="ciaoglindex.html#assertions/native_props"><tt>assertions/native_props</tt></a>, <a class="idx_anchor" id="8" href="ciaoglindex.html#sort"><tt>sort</tt></a>, <a class="idx_anchor" id="9" href="ciaoglindex.html#lists"><tt>lists</tt></a>.
</ul></ul></div></div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="setof/3" href="ciaopdindex.html#setof/3">setof/3</a>:</div><div class="deftext"><tt>setof(Template,Generator,Set)</tt>
<p>Finds the <span class="var">Set</span> of instances of the <span class="var">Template</span> satisfying <span class="var">Generator</span>. The set is in ascending order (see <a href="term_compare.html">Comparing terms</a> for a definition of this order) without duplicates, and is non-empty. If there are no solutions, <tt>setof</tt> fails. <tt>setof</tt> may succeed in more than one way, binding free variables in <span class="var">Generator</span> to different values. This can be avoided by using existential quantifiers on the free variables in front of <span class="var">Generator</span>, using <a class="idx_anchor" id="10" href="ciaoglindex.html#^/2"><tt>^/2</tt></a>. For example, given the clauses: <pre>father(bill, tom).
father(bill, ann).
father(bill, john).
father(harry, july).
father(harry, daniel).
</pre> <p>The following query produces two alternative solutions via backtracking: <pre>?- setof(X,father(F,X),Sons).

F = bill,
Sons = [ann,john,tom] ? ;

F = harry,
Sons = [daniel,july] ? ;

no
?- 
</pre><br/>
<em>Meta-predicate</em> with arguments: <tt>setof(?,goal,?)</tt>.<br/>
<strong>General properties:</strong> <tt>setof(X,Y,Z)</tt>
<ul class="itemize_minus"><LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/2)</span><span>This predicate is understood natively by CiaoPP as <span class="var">findall(X,Y,Z)</span>.
</span>
</ul><p><strong>Usage:</strong> <span class="on_right"><span class="iso">ISO</span></span><span></span>
<ul class="itemize_minus"><LI><em>Call and exit should be compatible with:</em><br/><span class="on_right"> (basic_props:list/1)</span><span><span class="var">Set</span> is a list.
</span>
<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Template</span> is any term.
</span><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">Generator</span> is a term which represents a goal, i.e., an atom or a structure.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Template</span> is any term.
</span><br/><span class="on_right"> (basic_props:list/1)</span><span><span class="var">Set</span> is a list.
</span>
<LI><em>The following properties should hold globally:</em><br/><span class="on_right"> (basic_props:not_further_inst/2)</span><span><span class="var">Template</span> is not further instantiated.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="bagof/3" href="ciaopdindex.html#bagof/3">bagof/3</a>:</div><div class="deftext"><tt>bagof(Template,Generator,Bag)</tt>
<p>Finds all the instances of the <span class="var">Template</span> produced by the <span class="var">Generator</span>, and returns them in the <span class="var">Bag</span> in the order in which they were found. If the <span class="var">Generator</span> contains free variables which are not bound in the <span class="var">Template</span>, it assumes that this is like any other Prolog question and that you want bindings for those variables. This can be avoided by using existential quantifiers on the free variables in front of the <span class="var">Generator</span>, using <a class="idx_anchor" id="11" href="ciaoglindex.html#^/2"><tt>^/2</tt></a>.<br/>
<em>Meta-predicate</em> with arguments: <tt>bagof(?,goal,?)</tt>.<br/>
<strong>General properties:</strong> <tt>bagof(X,Y,Z)</tt>
<ul class="itemize_minus"><LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/2)</span><span>This predicate is understood natively by CiaoPP as <span class="var">findall(X,Y,Z)</span>.
</span>
</ul><p><strong>Usage:</strong> <span class="on_right"><span class="iso">ISO</span></span><span></span>
<ul class="itemize_minus"><LI><em>Call and exit should be compatible with:</em><br/><span class="on_right"> (basic_props:list/1)</span><span><span class="var">Bag</span> is a list.
</span>
<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Template</span> is any term.
</span><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">Generator</span> is a term which represents a goal, i.e., an atom or a structure.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Template</span> is any term.
</span><br/><span class="on_right"> (basic_props:list/1)</span><span><span class="var">Bag</span> is a list.
</span>
<LI><em>The following properties should hold globally:</em><br/><span class="on_right"> (basic_props:not_further_inst/2)</span><span><span class="var">Template</span> is not further instantiated.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="findall/3" href="ciaopdindex.html#findall/3">findall/3</a>:</div><div class="deftext"><tt>findall(Template,Generator,List)</tt>
<p>A special case of bagof, where all free variables in the <span class="var">Generator</span> are taken to be existentially quantified. Faster than the other aggregation predicates.<br/>
<em>Meta-predicate</em> with arguments: <tt>findall(?,goal,?)</tt>.<br/><p><strong>Usage:</strong> <span class="on_right"><span class="iso">ISO</span></span><span></span>
<ul class="itemize_minus"><LI><em>Calls should, and exit will be compatible with:</em><br/><span class="on_right"> (basic_props:list/1)</span><span><span class="var">List</span> is a list.
</span>
<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Template</span> is any term.
</span><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">Generator</span> is a term which represents a goal, i.e., an atom or a structure.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Template</span> is any term.
</span><br/><span class="on_right"> (basic_props:list/1)</span><span><span class="var">List</span> is a list.
</span>
<LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:not_further_inst/2)</span><span><span class="var">Template</span> is not further instantiated.
</span><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span><br/><span class="on_right"> (native_props:not_fails/1)</span><span>All the calls of the form <span class="var">findall(Template,Generator,List)</span> do not fail.
</span><br/><span class="on_right"> (native_props:is_det/1)</span><span>All calls of the form <span class="var">findall(Template,Generator,List)</span> are deterministic.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="findall/4" href="ciaopdindex.html#findall/4">findall/4</a>:</div><div class="deftext"><br/>
<em>Meta-predicate</em> with arguments: <tt>findall(?,goal,?,?)</tt>.<br/><p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>Description:</em> As <a class="idx_anchor" id="12" href="ciaoglindex.html#findall/3"><tt>findall/3</tt></a>, but returning in <span class="var">Tail</span> the tail of <span class="var">List</span> (findall(<span class="var">Template</span>, <span class="var">Generator</span>, <span class="var">List</span>, <span class="var">Tail</span>)).<LI><em>Call and exit should be compatible with:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Arg3</span> is any term.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Arg4</span> is any term.
</span>
<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Arg1</span> is any term.
</span><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">Arg2</span> is a term which represents a goal, i.e., an atom or a structure.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Arg1</span> is any term.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Arg3</span> is any term.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Arg4</span> is any term.
</span>
<LI><em>The following properties should hold globally:</em><br/><span class="on_right"> (basic_props:not_further_inst/2)</span><span><span class="var">Arg1</span> is not further instantiated.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="findnsols/4" href="ciaopdindex.html#findnsols/4">findnsols/4</a>:</div><div class="deftext"><tt>findnsols(N,Template,Generator,List)</tt>
<p>As <a class="idx_anchor" id="13" href="ciaoglindex.html#findall/3"><tt>findall/3</tt></a>, but generating at most <span class="var">N</span> solutions of <span class="var">Generator</span>. Thus, the length of <span class="var">List</span> will not be greater than <span class="var">N</span>. If <span class="var">N</span>=&lt;0, returns directly an empty list. This predicate is especially useful if <span class="var">Generator</span> may have an infinite number of solutions.<br/>
<em>Meta-predicate</em> with arguments: <tt>findnsols(?,?,goal,?)</tt>.<br/><p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>Call and exit should be compatible with:</em><br/><span class="on_right"> (basic_props:list/1)</span><span><span class="var">List</span> is a list.
</span>
<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">N</span> is an integer.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Template</span> is any term.
</span><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">Generator</span> is a term which represents a goal, i.e., an atom or a structure.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Template</span> is any term.
</span><br/><span class="on_right"> (basic_props:list/1)</span><span><span class="var">List</span> is a list.
</span>
<LI><em>The following properties should hold globally:</em><br/><span class="on_right"> (basic_props:not_further_inst/2)</span><span><span class="var">Template</span> is not further instantiated.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="findnsols/5" href="ciaopdindex.html#findnsols/5">findnsols/5</a>:</div><div class="deftext"><tt>findnsols(N,Template,Generator,List,Tail)</tt>
<p>As <a class="idx_anchor" id="14" href="ciaoglindex.html#findnsols/4"><tt>findnsols/4</tt></a>, but returning in <span class="var">Tail</span> the tail of <span class="var">List</span>.<br/>
<em>Meta-predicate</em> with arguments: <tt>findnsols(?,?,goal,?,?)</tt>.<br/><p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">N</span> is an integer.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Template</span> is any term.
</span><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">Generator</span> is a term which represents a goal, i.e., an atom or a structure.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Template</span> is any term.
</span>
<LI><em>The following properties should hold globally:</em><br/><span class="on_right"> (basic_props:not_further_inst/2)</span><span><span class="var">Template</span> is not further instantiated.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="^/2" href="ciaopdindex.html#^/2">^/2</a>:</div><div class="deftext"><br/>
<em>Meta-predicate</em> with arguments: <tt>(?)^goal</tt>.<br/>
<strong>General properties:</strong> <tt>_X^Y</tt>
<ul class="itemize_minus"><LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/2)</span><span>This predicate is understood natively by CiaoPP as <span class="var">call(Y)</span>.
</span>
</ul><p><strong>Usage:</strong> <tt>X^P</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Existential quantification: <span class="var">X</span> is existentially quantified in <span class="var">P</span>. E.g., in <tt>A^p(A,B)</tt>, <tt>A</tt> is existentially quantified. Used only within <a class="idx_anchor" id="15" href="ciaoglindex.html#aggregation predicates">aggregation predicates</a>. In all other contexts, simply, execute the procedure call <span class="var">P</span>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">X</span> is a free variable.
</span><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">P</span> is a term which represents a goal, i.e., an atom or a structure.
</span>
</ul></div></div><p>
</div><div id="Known bugs and planned improvements"><h2>Known bugs and planned improvements</h2><ul><LI>Run-time checks have been reported not to work with this code. That means that either the assertions here, or the code that implements the run-time checks are erroneous.</ul></div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Module Sections</h2><ul><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Documentation on exports">Documentation on exports</a><LI><a href="#Known bugs and planned improvements">Known bugs and planned improvements</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="iso_doc.html">&#x25C4;</a><a class="navbutton" href="dynamic_rt.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>