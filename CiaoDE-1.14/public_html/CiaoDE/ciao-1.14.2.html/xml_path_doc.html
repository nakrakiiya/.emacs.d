<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>XML query library &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="xdr_handle.html">&#x25C4;</a><a class="navbutton" href="Append.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="Contrib.html">PART XI - Contributed libraries</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>XML query library</h1><a class="idx_anchor" href="ciaoliindex.html#xml_path"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Jose Manuel Gomez Perez" href="ciaoauindex.html#Jose Manuel Gomez Perez">Jos&eacute; Manuel G&oacute;mez P&eacute;rez</a>.<p>
This package provides a language suitable for querying XML documents from a Prolog program. Constraint programming expresions can be included in order to prune search as soon as possible, i.e. upon constraint unsatisfability, improving efficiency. Also, facilities are offered to improve search speed by transforming XML documents into Prolog programs, hence reducing search to just running the program and taking advantage of Prolog&apos;s indexing capabilities.<p>Queries in an XML document have a recursive tree structructure that permits to detail the search on the XML element sought, its attributes, and its children. As a suffix, a constraint programming expression can be added. Queries return value for the free variables included (in case of success), and checks whether the XML document structure matches that depicted by the query itself.<p>The operators introduced are described below:<p><ul> <p> <LI><em>@</em> Delimits a subquery on an elment&apos;s attribute, such as <tt>product@val(product_name, &quot;car&quot;)</tt>, the first argument being the attribute name and the second its value. Any of them can be free variables, being possible to write queries like <tt>product@val(Name, &quot;car&quot;)</tt>, intended to find the &apos;Name&apos; of attributes of element product whose value is the string &quot;car&quot;.<p><LI><em>::</em> The right-hand side of the subexpression delimited by this operator is a query on the children elements of the element described on its left-hand side.<p><LI><em>with</em> Declares the constraints the items sought must satisfy.<p></ul> <p>Some examples of this query language (more can be found in the examples directory):<p><ul> <LI>Example A: </ul> <p><pre>product@val(product_name,&quot;car&quot;)::(quantity(X), 
                                  &apos;time-left&apos;(Y), 
                                  negotiation::preference::price(Z)) 
       with X * Z .&gt;. Y

</pre> <p><ul> <LI>Example B: </ul> <p><pre>nitf::head::docdata::&apos;doc-id&apos;@val(&apos;id-string&apos;,&quot;020918050&quot;)::(Y), 
                     body::&apos;body.head&apos;::abstract::p(X)

</pre> <p><br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/><tt>:- use_package(xml_path).</tt>

or

<tt>:- module(...,...,[xml_path]).</tt><LI><strong>Exports:</strong><br/><ul class="itemize_minus"><LI><em>Predicates:</em><br/><a class="idx_anchor" id="0" href="ciaoglindex.html#xml_search/3"><tt>xml_search/3</tt></a>, <a class="idx_anchor" id="1" href="ciaoglindex.html#xml_parse/3"><tt>xml_parse/3</tt></a>, <a class="idx_anchor" id="2" href="ciaoglindex.html#xml_parse_match/3"><tt>xml_parse_match/3</tt></a>, <a class="idx_anchor" id="3" href="ciaoglindex.html#xml_search_match/3"><tt>xml_search_match/3</tt></a>, <a class="idx_anchor" id="4" href="ciaoglindex.html#xml_index_query/3"><tt>xml_index_query/3</tt></a>, <a class="idx_anchor" id="5" href="ciaoglindex.html#xml_index_to_file/2"><tt>xml_index_to_file/2</tt></a>, <a class="idx_anchor" id="6" href="ciaoglindex.html#xml_index/1"><tt>xml_index/1</tt></a>, <a class="idx_anchor" id="7" href="ciaoglindex.html#xml_query/3"><tt>xml_query/3</tt></a>.
</ul><LI><strong>Other modules used:</strong><br/><ul class="itemize_minus"><LI><em>System library modules:</em><br/><a class="idx_anchor" id="8" href="ciaoglindex.html#xml_path/xml_path_types"><tt>xml_path/xml_path_types</tt></a>.
</ul></ul></div></div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="xml_search/3" href="ciaopdindex.html#xml_search/3">xml_search/3</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>xml_search(Query,Source,Doc)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Checks a high level query <span class="var">Query</span> against an XML document <span class="var">Source</span>. If the query is successful it retuns in <span class="var">Doc</span> the whole xml element(s) of the document that matched it.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Query</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Source</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Doc</span> is a free variable.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_query/1)</span><span><span class="var">Query</span> is a primitive XML query.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_item/1)</span><span><span class="var">Source</span> is either a XML attribute, a XML element or a line break.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_item/1)</span><span><span class="var">Doc</span> is either a XML attribute, a XML element or a line break.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="xml_parse/3" href="ciaopdindex.html#xml_parse/3">xml_parse/3</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>xml_parse(Query,Source,Doc)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Checks a high level query <span class="var">Query</span> against an XML document <span class="var">Source</span>. If the query is successful it retuns in <span class="var">Doc</span> the whole xml element(s) of the document that matched it. On the contrary as <a class="idx_anchor" id="9" href="ciaoglindex.html#xml_search/3"><tt>xml_search/3</tt></a>, the query can start at any level of the XML document, not necessarily at the root node.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Query</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Source</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Doc</span> is a free variable.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_query/1)</span><span><span class="var">Query</span> is a primitive XML query.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_item/1)</span><span><span class="var">Source</span> is either a XML attribute, a XML element or a line break.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_item/1)</span><span><span class="var">Doc</span> is either a XML attribute, a XML element or a line break.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="xml_parse_match/3" href="ciaopdindex.html#xml_parse_match/3">xml_parse_match/3</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>xml_parse_match(Query,Source,Match)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Checks a high level query <span class="var">Query</span> against an XML document <span class="var">Source</span>. If the query is successful it retuns in <span class="var">Doc</span> the exact subtree of the xml document that matched it. On the contrary as <a class="idx_anchor" id="10" href="ciaoglindex.html#&apos;$xml_search_match/3"><tt>&apos;$xml_search_match/3</tt></a>, the query can start at any level of the XML document, not necessarily at the root node.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Query</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Source</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Match</span> is a free variable.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_query/1)</span><span><span class="var">Query</span> is a primitive XML query.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_item/1)</span><span><span class="var">Source</span> is either a XML attribute, a XML element or a line break.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_item/1)</span><span><span class="var">Match</span> is either a XML attribute, a XML element or a line break.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="xml_search_match/3" href="ciaopdindex.html#xml_search_match/3">xml_search_match/3</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>xml_search_match(BasicQuery,SourceDoc,Match)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Checks query <span class="var">Query</span> against an XML document <span class="var">Source</span>. If the query is successful it retuns in <span class="var">Doc</span> the exact subtree of the xml document that matched it.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">BasicQuery</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">SourceDoc</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Match</span> is a free variable.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_query/1)</span><span><span class="var">BasicQuery</span> is a primitive XML query.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_item/1)</span><span><span class="var">SourceDoc</span> is either a XML attribute, a XML element or a line break.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_item/1)</span><span><span class="var">Match</span> is either a XML attribute, a XML element or a line break.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="xml_index_query/3" href="ciaopdindex.html#xml_index_query/3">xml_index_query/3</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>xml_index_query(Query,Id,Match)</tt>
<ul class="itemize_minus"><LI><em>Description:</em>  Matches a high level query <span class="var">Query</span> against an XML document previously transformed into a Prolog program. <span class="var">Id</span> identifies the resulting document <span class="var">Match</span>, which is the exact match of the query against the XML document. <LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Query</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Id</span> is a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Match</span> is a free variable.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_query/1)</span><span><span class="var">Query</span> is a primitive XML query.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Id</span> is an atom.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_item/1)</span><span><span class="var">Match</span> is either a XML attribute, a XML element or a line break.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="xml_index_to_file/2" href="ciaopdindex.html#xml_index_to_file/2">xml_index_to_file/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>xml_index_to_file(SourceDoc,File)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Transforms the XML document <span class="var">SourceDoc</span> in a Prolog program which is output to file <span class="var">File</span>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (xml_path_types:canonic_xml_item/1)</span><span><span class="var">SourceDoc</span> is either a XML attribute, a XML element or a line break.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">File</span> is an atom.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="xml_index/1" href="ciaopdindex.html#xml_index/1">xml_index/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>xml_index(SourceDoc)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Transforms the XML document <span class="var">SourceDoc</span> in a Prolog program, generating the associated clauses, which are stored dynamically into the current process memory space.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (xml_path_types:canonic_xml_item/1)</span><span><span class="var">SourceDoc</span> is either a XML attribute, a XML element or a line break.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="xml_query/3" href="ciaopdindex.html#xml_query/3">xml_query/3</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>xml_query(Query,Doc,Match)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Checks that XML document <span class="var">Doc</span> is compliant with respect to the query <span class="var">Query</span> expressed in the low level query language. The exact mapping of the query over the document is returned in <span class="var">Match</span><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Query</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">Doc</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Match</span> is a free variable.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_query/1)</span><span><span class="var">Query</span> is a primitive XML query.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_item/1)</span><span><span class="var">Doc</span> is either a XML attribute, a XML element or a line break.
</span><br/><span class="on_right"> (xml_path_types:canonic_xml_item/1)</span><span><span class="var">Match</span> is either a XML attribute, a XML element or a line break.
</span>
</ul></div></div><p>
</div><div id="Documentation on internals"><h2>Documentation on internals</h2><div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="canonic_xml_term/1" href="ciaoteindex.html#canonic_xml_term/1">canonic_xml_term/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>canonic_xml_term(XMLTerm)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">XMLTerm</span> is a term representing XML code in canonical form.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="canonic_xml_item/1" href="ciaoteindex.html#canonic_xml_item/1">canonic_xml_item/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>canonic_xml_item(XMLItem)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">XMLItem</span> is either a XML attribute, a XML element or a line break.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="tag_attrib/1" href="ciaoteindex.html#tag_attrib/1">tag_attrib/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>tag_attrib(Att)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Att</span> is a XML attribute.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="canonic_xml_query/1" href="ciaoteindex.html#canonic_xml_query/1">canonic_xml_query/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>canonic_xml_query(Query)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Query</span> is a primitive XML query.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="canonic_xml_subquery/1" href="ciaoteindex.html#canonic_xml_subquery/1">canonic_xml_subquery/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>canonic_xml_subquery(SQuery)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">SQuery</span> defines a XML subquery.</ul></div></div><p>
</div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Package Sections</h2><ul><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Documentation on exports">Documentation on exports</a><LI><a href="#Documentation on internals">Documentation on internals</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="xdr_handle.html">&#x25C4;</a><a class="navbutton" href="Append.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>