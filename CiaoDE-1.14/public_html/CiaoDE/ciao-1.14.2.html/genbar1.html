<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>Barchart widgets - 1 &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="color_pattern.html">&#x25C4;</a><a class="navbutton" href="genbar2.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="Contrib.html">PART XI - Contributed libraries</a> &raquo; <a href="chartlib.html">A Chart Library</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>Barchart widgets - 1</h1><a class="idx_anchor" href="ciaoliindex.html#genbar1"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Isabel Martin Garcia" href="ciaoauindex.html#Isabel Martin Garcia">Isabel Mart&iacute;n Garc&iacute;a</a>.<p>
This module defines predicates to show barchart widgets. The three predicates exported by this module plot two-variable data as regular bars in a window. They all share the following features:<p><ul> <p><LI>No numeric values for the <tt>x</tt> axis are needed because they will be interpreted as labels. See <a class="idx_anchor" id="0" href="ciaoglindex.html#xbarelement1/1"><tt>xbarelement1/1</tt></a> definition type.<p><LI>The bars will be displayed at uniform intervals.<p><LI>The user can either select the appearance of the bars (background color, foreground color and stipple style) or not. See the <a class="idx_anchor" id="1" href="ciaoglindex.html#xbarelement1"><tt>xbarelement1</tt></a> type definition. Thus, the user can call each predicate in two ways.<p><LI>The bar chart has a legend. One entry (symbol and label) per bar.<p><LI>If you don&apos;t want to display text in the elements header, barchart title, x axis title, y axis title or footer, simply type <tt>&rdquo;</tt> as the value of the argument.<p><LI>The predicates test whether the format of the arguments is correct. If one or both vectors are empty, the exception <tt>error2</tt> will be thrown. If the vectors contains elements but are not correct, the exception <tt>error1</tt> or <tt>error3</tt> will be thrown, depending on the error type. <tt>error1</tt> means that <span class="var">XVector</span> and <span class="var">YVector</span> do not contain the same number of elements and <tt>error3</tt> indicates that not all the <span class="var">XVector</span> elements contain a correct number of attributes .<p></ul> <p> Particular features will be pointed out in the corresponding predicate.<p><br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/><tt>:- use_module(library(genbar1)).</tt><LI><strong>Exports:</strong><br/><ul class="itemize_minus"><LI><em>Predicates:</em><br/><a class="idx_anchor" id="2" href="ciaoglindex.html#barchart1/7"><tt>barchart1/7</tt></a>, <a class="idx_anchor" id="3" href="ciaoglindex.html#barchart1/9"><tt>barchart1/9</tt></a>, <a class="idx_anchor" id="4" href="ciaoglindex.html#percentbarchart1/7"><tt>percentbarchart1/7</tt></a>.
<LI><em>Regular Types:</em><br/><a class="idx_anchor" id="5" href="ciaoglindex.html#yelement/1"><tt>yelement/1</tt></a>, <a class="idx_anchor" id="6" href="ciaoglindex.html#axis_limit/1"><tt>axis_limit/1</tt></a>, <a class="idx_anchor" id="7" href="ciaoglindex.html#header/1"><tt>header/1</tt></a>, <a class="idx_anchor" id="8" href="ciaoglindex.html#title/1"><tt>title/1</tt></a>, <a class="idx_anchor" id="9" href="ciaoglindex.html#footer/1"><tt>footer/1</tt></a>.
</ul><LI><strong>Other modules used:</strong><br/><ul class="itemize_minus"><LI><em>System library modules:</em><br/><a class="idx_anchor" id="10" href="ciaoglindex.html#chartlib/bltclass"><tt>chartlib/bltclass</tt></a>, <a class="idx_anchor" id="11" href="ciaoglindex.html#chartlib/test_format"><tt>chartlib/test_format</tt></a>, <a class="idx_anchor" id="12" href="ciaoglindex.html#chartlib/color_pattern"><tt>chartlib/color_pattern</tt></a>, <a class="idx_anchor" id="13" href="ciaoglindex.html#chartlib/install_utils"><tt>chartlib/install_utils</tt></a>, <a class="idx_anchor" id="14" href="ciaoglindex.html#lists"><tt>lists</tt></a>, <a class="idx_anchor" id="15" href="ciaoglindex.html#random/random"><tt>random/random</tt></a>.
</ul></ul></div></div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="barchart1/7" href="ciaopdindex.html#barchart1/7">barchart1/7</a>:</div><div class="deftext"><tt>barchart1(Header,BarchartTitle,XTitle,XVector,YTitle,YVector,Footer)</tt>
<p>The <tt>y</tt> axis range is determined from the limits of the data. Two examples are given to demonstrate clearly how to call the predicates. In the first example the user sets the bar appearance, in the second one the appearance features will be chosen by the system and the colors that have been assigned to the variables Color1, Color2 and Pattern will be shown also.<p>Example 1:<p><pre>barchart1(&apos;This is the header text&apos;,
  &apos;Barchart title&apos;,
  &apos;xaxistitle&apos;,
  [ [&apos;bar1&apos;,&apos;legend_element1&apos;,&apos;Blue&apos;,&apos;Yellow&apos;,&apos;pattern1&apos;],
           [&apos;bar2&apos;,&apos;legend_element2&apos;,&apos;Plum&apos;,&apos;SeaGreen&apos;,&apos;pattern2&apos;],
           [&apos;bar3&apos;,&apos;legend_element3&apos;,&apos;Turquoise&apos;,&apos;Yellow&apos;,
	    &apos;pattern5&apos;] ],
  &apos;yaxixtitle&apos;,
  [20,10,59],
  &apos;footer&apos;).
</pre> <p>Example 2:<p><pre>barchart1(&apos;This is the header text&apos;,
  &apos;Barchart title&apos;,
  &apos;xaxistitle&apos;,
  [ [&apos;element1&apos;,&apos;legend_element1&apos;,Color1,Color2,Pattern],
            [&apos;element2&apos;,&apos;legend_element2&apos;],
            [&apos;element3&apos;,&apos;legend_element3&apos;] ],
  &apos;yaxixtitle&apos;,
  [20,10,59],
  &apos;footer&apos;).
</pre> <p><p> <p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (genbar1:header/1)</span><span><span class="var">Header</span> is a text (an atom) describing the header of the graph.
</span><br/><span class="on_right"> (genbar1:title/1)</span><span><span class="var">BarchartTitle</span> is a text (an atom) to be used as label, usually not very long.
</span><br/><span class="on_right"> (genbar1:title/1)</span><span><span class="var">XTitle</span> is a text (an atom) to be used as label, usually not very long.
</span><br/><span class="on_right"> (basic_props:list/2)</span><span><span class="var">XVector</span> is a list of <span class="var">xbarelement1</span>s.
</span><br/><span class="on_right"> (genbar1:title/1)</span><span><span class="var">YTitle</span> is a text (an atom) to be used as label, usually not very long.
</span><br/><span class="on_right"> (basic_props:list/2)</span><span><span class="var">YVector</span> is a list of <span class="var">yelement</span>s.
</span><br/><span class="on_right"> (genbar1:footer/1)</span><span><span class="var">Footer</span> is a text (an atom) describing the footer of the graph.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="barchart1/9" href="ciaopdindex.html#barchart1/9">barchart1/9</a>:</div><div class="deftext"><tt>barchart1(Header,BTitle,XTitle,XVector,YTitle,YVector,YMax,YMin,Footer)</tt>
<p>You can set the minimum and maximum limits of the <tt>y</tt> axis. Data outside the limits will not be plotted. Each limit, as you can check by looking at the <a class="idx_anchor" id="16" href="ciaoglindex.html#axis_limit/1"><tt>axis_limit/1</tt></a> definition, is a number. If the argument is a variable the limit will be calculated from the data (i.e., if <span class="var">YMax</span> value is YValueMax the maximum y axis limit will calculated using the largest data value).<p>Example:<p><pre>barchart1(&apos;This is the header text&apos;,
  &apos;Barchart title&apos;,
  &apos;xaxistitle&apos;,
  [ [&apos;element1&apos;,&apos;e1&apos;,&apos;Blue&apos;,&apos;Yellow&apos;,&apos;pattern1&apos;],
      [&apos;element2&apos;,&apos;e2&apos;,&apos;Turquoise&apos;,&apos;Plum&apos;,&apos;pattern5&apos;],
      [&apos;element3&apos;,&apos;e3&apos;,&apos;Turquoise&apos;,&apos;Green&apos;,&apos;pattern5&apos;] ],
  &apos;yaxixtitle&apos;,
  [20,10,59],
  70,
  _,
  &apos;footer&apos;).
</pre> <p><p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (genbar1:header/1)</span><span><span class="var">Header</span> is a text (an atom) describing the header of the graph.
</span><br/><span class="on_right"> (genbar1:title/1)</span><span><span class="var">BTitle</span> is a text (an atom) to be used as label, usually not very long.
</span><br/><span class="on_right"> (genbar1:title/1)</span><span><span class="var">XTitle</span> is a text (an atom) to be used as label, usually not very long.
</span><br/><span class="on_right"> (basic_props:list/2)</span><span><span class="var">XVector</span> is a list of <span class="var">xbarelement1</span>s.
</span><br/><span class="on_right"> (genbar1:title/1)</span><span><span class="var">YTitle</span> is a text (an atom) to be used as label, usually not very long.
</span><br/><span class="on_right"> (basic_props:list/2)</span><span><span class="var">YVector</span> is a list of <span class="var">yelement</span>s.
</span><br/><span class="on_right"> (genbar1:axis_limit/1)</span><span>genbar1:axis_limit(YMax)
</span><br/><span class="on_right"> (genbar1:axis_limit/1)</span><span>genbar1:axis_limit(YMin)
</span><br/><span class="on_right"> (genbar1:footer/1)</span><span><span class="var">Footer</span> is a text (an atom) describing the footer of the graph.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="percentbarchart1/7" href="ciaopdindex.html#percentbarchart1/7">percentbarchart1/7</a>:</div><div class="deftext"><tt>percentbarchart1(Header,BTitle,XTitle,XVector,YTitle,YVector,Footer)</tt>
<p>The y axis maximum coordinate value is 100. The <tt>x</tt> axis limits are automatically worked out.<p>Example:<p><pre>percentbarchart1(&apos;This is a special barchart to represent percentages&apos;,
  &apos;Barchart with legend&apos;,
  &apos;My xaxistitle&apos;,
  [ [1,&apos;bar1&apos;,&apos;Blue&apos;,&apos;Yellow&apos;,&apos;pattern1&apos;],
       [8,&apos;bar2&apos;,&apos;MediumTurquoise&apos;,&apos;Plum&apos;,&apos;pattern5&apos;] ],
  &apos;My yaxixtitle&apos;,
  [80,10],
  &apos;This is the footer text&apos;).
</pre> <p><p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (genbar1:header/1)</span><span><span class="var">Header</span> is a text (an atom) describing the header of the graph.
</span><br/><span class="on_right"> (genbar1:title/1)</span><span><span class="var">BTitle</span> is a text (an atom) to be used as label, usually not very long.
</span><br/><span class="on_right"> (genbar1:title/1)</span><span><span class="var">XTitle</span> is a text (an atom) to be used as label, usually not very long.
</span><br/><span class="on_right"> (basic_props:list/2)</span><span><span class="var">XVector</span> is a list of <span class="var">xbarelement1</span>s.
</span><br/><span class="on_right"> (genbar1:title/1)</span><span><span class="var">YTitle</span> is a text (an atom) to be used as label, usually not very long.
</span><br/><span class="on_right"> (basic_props:list/2)</span><span><span class="var">YVector</span> is a list of <span class="var">yelement</span>s.
</span><br/><span class="on_right"> (genbar1:footer/1)</span><span><span class="var">Footer</span> is a text (an atom) describing the footer of the graph.
</span>
</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="yelement/1" href="ciaoteindex.html#yelement/1">yelement/1</a>:</div><div class="deftext"><p><pre>yelement(Y) :-
        number(Y).
</pre> <p>Y is the bar lenght, so it must be a numeric value.<p>Both Prolog and Tcl-Tk support integers and floats. Integers are usually specified in decimal, but if the first character is 0 the number is read in octal (base 8), and if the first two characters are 0x, the number is read in hexadecimal (base16). Float numbers may be specified using most of the forms defined for ANSI C, including the following examples:<p><ul> <LI>9.56<p><LI>5.88e-2<p><LI>5.1E2 </ul> <p>Note: Be careful when using floats. While 8. or 7.e4 is interpreted by Tcl-tk as 8.0 and 7.0e4, Prolog will not read them as float numbers. Example: <pre>        ?- number(8.e+5).
        {SYNTAX ERROR: (lns 130-130) , or ) expected in arguments
        number ( 8 
        ** here **
        . e + 5 ) . 
        }

        no
        ?- number(8.).
        {SYNTAX ERROR: (lns 138-138) , or ) expected in arguments
        number ( 8 
        ** here **
        . ) . 
        }

        no

        ?- number(8.0e+5).

        yes
        ?- number(8.0).

        yes
        </pre> <p>Precision: Tcl-tk internally represents integers with the C type <span class="var">int</span>, which provides at least 32 bits of precision on most machines. Since Prolog integers can (in some implementations) exceed 32 bits but the precision in Tcl-tk depends on the machine, it is up to the progammer to ensure that the values fit into the maximum precision of the machine for integers. Real numbers are represented with the C type <span class="var">double</span>, which is usually represented with 64-bit values (about 15 decimal digits of precision) using the IEEE Floating Point Standard.<p>Conversion: If the list is composed by integers and floats, Tcl-tk will convert integers to floats.<p> </div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="axis_limit/1" href="ciaoteindex.html#axis_limit/1">axis_limit/1</a>:</div><div class="deftext"><pre>axis_limit(X) :-
        number(X).
axis_limit(_1).
</pre> <p>This type is defined in order to set the minimum and maximum limits of the axes. Data outside the limits will not be plotted. Each limit, is a number or a variable. If the argument is not a number the limit will be calculated from the data (i.e., if YMax value is <tt>Var</tt> the maximum y axis limit will be calculated using the largest data value).<p> </div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="header/1" href="ciaoteindex.html#header/1">header/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>header(X)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">X</span> is a text (an atom) describing the header of the graph.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="title/1" href="ciaoteindex.html#title/1">title/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>title(X)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">X</span> is a text (an atom) to be used as label, usually not very long.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="footer/1" href="ciaoteindex.html#footer/1">footer/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>footer(X)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">X</span> is a text (an atom) describing the footer of the graph.</ul></div></div><p>
</div><div id="Documentation on internals"><h2>Documentation on internals</h2><div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="xbarelement1/1" href="ciaoteindex.html#xbarelement1/1">xbarelement1/1</a>:</div><div class="deftext"><pre>xbarelement1([XValue,LegendElement]) :-
        atomic(XValue),
        atomic(LegendElement).
xbarelement1([XValue,LegendElement,ForegColor,BackgColor,SPattern]) :-
        atomic(XValue),
        atomic(LegendElement),
        color(ForegColor),
        color(BackgColor),
        pattern(SPattern).
</pre> <p>Defines the attributes of the bar. <dl> <p><DT><span class="var">XValue</span><dd> bar label. Although <span class="var">XValue</span> values may be numbers, the will be treated as labels. Different elements with the same label will produce different bars.<p><DT><span class="var">LegendElement</span><dd> Legend element name. It may be a number or an atom and equal or different to the XValue. Every <span class="var">LegendElement</span> value of the list must be unique.<p><DT><span class="var">ForegColor</span><dd> It sets the Foreground color of the bar. Its value must be a valid color, otherwise the system will throw an exception. If the argument value is a variable, it gets instantiated to a color chosen by the library.<p><DT><span class="var">BackgColor</span><dd> It sets the Background color of the bar. Its value must be a valid color, otherwise the system will throw an exception. If the argument value is a variable, it gets instantiated to a color chosen by the library.<p><DT><span class="var">SPattern</span><dd> It sets the stipple of the bar. Its value must be a valid pattern, otherwise the system will throw an exception. If the argument value is a variable, it gets instantiated to a pattern chosen by the library.<p></dl> <p> </div></div><p>
</div><div id="Known bugs and planned improvements"><h2>Known bugs and planned improvements</h2><ul><LI>Run-time checks have been reported not to work with this code. That means that either the assertions here, or the code that implements the run-time checks are erroneous.</ul></div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Module Sections</h2><ul><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Documentation on exports">Documentation on exports</a><LI><a href="#Documentation on internals">Documentation on internals</a><LI><a href="#Known bugs and planned improvements">Known bugs and planned improvements</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="color_pattern.html">&#x25C4;</a><a class="navbutton" href="genbar2.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>