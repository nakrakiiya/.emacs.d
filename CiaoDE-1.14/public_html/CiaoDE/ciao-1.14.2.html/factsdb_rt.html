<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>Filed predicates (runtime) &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="factsdb_doc.html">&#x25C4;</a><a class="navbutton" href="persdbrt_mysql.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="Interfaces.html">PART VIII - Interfaces to other languages and systems</a> &raquo; <a href="factsdb_doc.html">Filed predicates</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>Filed predicates (runtime)</h1><a class="idx_anchor" href="ciaoliindex.html#factsdb_rt"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Francisco Bueno" href="ciaoauindex.html#Francisco Bueno">Francisco Bueno</a>.<p>
Runtime module for the <a class="idx_anchor" id="0" href="ciaoglindex.html#factsdb"><tt>factsdb</tt></a> package.<br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/><tt>:- use_module(library(factsdb_rt)).</tt><LI><strong>Exports:</strong><br/><ul class="itemize_minus"><LI><em>Predicates:</em><br/><a class="idx_anchor" id="1" href="ciaoglindex.html#asserta_fact/1"><tt>asserta_fact/1</tt></a>, <a class="idx_anchor" id="2" href="ciaoglindex.html#assertz_fact/1"><tt>assertz_fact/1</tt></a>, <a class="idx_anchor" id="3" href="ciaoglindex.html#call/1"><tt>call/1</tt></a>, <a class="idx_anchor" id="4" href="ciaoglindex.html#current_fact/1"><tt>current_fact/1</tt></a>, <a class="idx_anchor" id="5" href="ciaoglindex.html#retract_fact/1"><tt>retract_fact/1</tt></a>.
<LI><em>Multifiles:</em><br/><a class="idx_anchor" id="6" href="ciaoglindex.html#$factsdb$cached_goal/3"><tt>$factsdb$cached_goal/3</tt></a>, <a class="idx_anchor" id="7" href="ciaoglindex.html#persistent_dir/2"><tt>persistent_dir/2</tt></a>, <a class="idx_anchor" id="8" href="ciaoglindex.html#file_alias/2"><tt>file_alias/2</tt></a>.
</ul><LI><strong>Other modules used:</strong><br/><ul class="itemize_minus"><LI><em>System library modules:</em><br/><a class="idx_anchor" id="9" href="ciaoglindex.html#counters"><tt>counters</tt></a>, <a class="idx_anchor" id="10" href="ciaoglindex.html#read"><tt>read</tt></a>, <a class="idx_anchor" id="11" href="ciaoglindex.html#persdb/persdbcache"><tt>persdb/persdbcache</tt></a>.
</ul></ul></div></div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="asserta_fact/1" href="ciaopdindex.html#asserta_fact/1">asserta_fact/1</a>:</div><div class="deftext"><br/>
<em>Meta-predicate</em> with arguments: <tt>asserta_fact(fact)</tt>.<br/><p><strong>Usage:</strong> <tt>asserta_fact(Fact)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Version of <a class="idx_anchor" id="12" href="ciaoglindex.html#data_facts:asserta_fact/1"><tt>data_facts:asserta_fact/1</tt></a> for filed predicates. The current instance of <span class="var">Fact</span> is interpreted as a fact and is added at the beginning of the definition of the corresponding predicate. Therefore, before all the facts filed in the DB file for the predicate. The predicate concerned must be declared as <a class="idx_anchor" id="13" href="ciaoglindex.html#facts"><tt>facts</tt></a>; if it is not, then <a class="idx_anchor" id="14" href="ciaoglindex.html#data_facts:asserta_fact/1"><tt>data_facts:asserta_fact/1</tt></a> is used.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">Fact</span> is a term which represents a goal, i.e., an atom or a structure.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="assertz_fact/1" href="ciaopdindex.html#assertz_fact/1">assertz_fact/1</a>:</div><div class="deftext"><br/>
<em>Meta-predicate</em> with arguments: <tt>assertz_fact(fact)</tt>.<br/><p><strong>Usage:</strong> <tt>assertz_fact(Fact)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Version of <a class="idx_anchor" id="15" href="ciaoglindex.html#data_facts:assertz_fact/1"><tt>data_facts:assertz_fact/1</tt></a> for filed predicates. The current instance of <span class="var">Fact</span> is interpreted as a fact and is added at the end of the definition of the corresponding predicate. Therefore, after all the facts filed in the DB file for the predicate. The predicate concerned must be declared as <a class="idx_anchor" id="16" href="ciaoglindex.html#facts"><tt>facts</tt></a>; if it is not, then <a class="idx_anchor" id="17" href="ciaoglindex.html#data_facts:assertz_fact/1"><tt>data_facts:assertz_fact/1</tt></a> is used.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">Fact</span> is a term which represents a goal, i.e., an atom or a structure.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="call/1" href="ciaopdindex.html#call/1">call/1</a>:</div><div class="deftext"><br/>
<em>Meta-predicate</em> with arguments: <tt>call(fact)</tt>.<br/><p><strong>Usage:</strong> <tt>call(Fact)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Same as <a class="idx_anchor" id="18" href="ciaoglindex.html#current_fact/1"><tt>current_fact/1</tt></a> if the predicate concerned is declared as <a class="idx_anchor" id="19" href="ciaoglindex.html#facts"><tt>facts</tt></a>. If it is not, an exception is raised.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">Fact</span> is a term which represents a goal, i.e., an atom or a structure.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="current_fact/1" href="ciaopdindex.html#current_fact/1">current_fact/1</a>:</div><div class="deftext"><br/>
<em>Meta-predicate</em> with arguments: <tt>current_fact(fact)</tt>.<br/><p><strong>Usage:</strong> <tt>current_fact(Fact)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Version of <a class="idx_anchor" id="20" href="ciaoglindex.html#data_facts:current_fact/1"><tt>data_facts:current_fact/1</tt></a> for filed predicates. The current instance of <span class="var">Fact</span> is interpreted as a fact and is unified with an actual fact in the current definition of the corresponding predicate. Therefore, with a fact previously asserted or filed in the DB file for the predicate, if it has not been retracted. The predicate concerned must be declared as <a class="idx_anchor" id="21" href="ciaoglindex.html#facts"><tt>facts</tt></a>; if it is not, then <a class="idx_anchor" id="22" href="ciaoglindex.html#data_facts:current_fact/1"><tt>data_facts:current_fact/1</tt></a> is used.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">Fact</span> is a term which represents a goal, i.e., an atom or a structure.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="retract_fact/1" href="ciaopdindex.html#retract_fact/1">retract_fact/1</a>:</div><div class="deftext"><br/>
<em>Meta-predicate</em> with arguments: <tt>retract_fact(fact)</tt>.<br/><p><strong>Usage:</strong> <tt>retract_fact(Fact)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Version of <a class="idx_anchor" id="23" href="ciaoglindex.html#data_facts:retract_fact/1"><tt>data_facts:retract_fact/1</tt></a> for filed predicates. The current instance of <span class="var">Fact</span> is interpreted as a fact and is unified with an actual fact in the current definition of the corresponding predicate; such a fact is deleted from the predicate definition. This is true even for the facts filed in the DB file for the predicate; but these are NOT deleted from the file (unless the predicate is persistent). The predicate concerned must be declared as <a class="idx_anchor" id="24" href="ciaoglindex.html#facts"><tt>facts</tt></a>; if it is not, then <a class="idx_anchor" id="25" href="ciaoglindex.html#data_facts:retract_fact/1"><tt>data_facts:retract_fact/1</tt></a> is used.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">Fact</span> is a term which represents a goal, i.e., an atom or a structure.
</span>
</ul></div></div><p>
</div><div id="Documentation on multifiles"><h2>Documentation on multifiles</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="$factsdb$cached_goal/3" href="ciaopdindex.html#$factsdb$cached_goal/3">$factsdb$cached_goal/3</a>:</div><div class="deftext"><tt>$factsdb$cached_goal(Spec,Spec,Key)</tt>
<p>Predicate <span class="var">Spec</span> is filed within database <span class="var">Key</span>. Programmers should not define this predicate directly in the program.<br/>
The predicate is <em>multifile</em>.<br/></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="persistent_dir/2" href="ciaopdindex.html#persistent_dir/2">persistent_dir/2</a>:</div><div class="deftext">See <a class="idx_anchor" id="26" href="ciaoglindex.html#persdb"><tt>persdb</tt></a>.<br/>
The predicate is <em>multifile</em>.<br/>
The predicate is of type <em>data</em>.<br/></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="file_alias/2" href="ciaopdindex.html#file_alias/2">file_alias/2</a>:</div><div class="deftext">See <a class="idx_anchor" id="27" href="ciaoglindex.html#symfnames"><tt>symfnames</tt></a>. This predicate is used only if <a class="idx_anchor" id="28" href="ciaoglindex.html#persistent_dir/2"><tt>persistent_dir/2</tt></a> fails.<br/>
The predicate is <em>multifile</em>.<br/>
The predicate is of type <em>data</em>.<br/></div></div><p>
</div><div id="Documentation on internals"><h2>Documentation on internals</h2><div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="facts/2" href="ciaodeindex.html#facts/2">facts/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>facts(PredDesc,Keyword)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> Declares the predicate <span class="var">PredDesc</span> as filed. <span class="var">Keyword</span> is the <a class="idx_anchor" id="29" href="ciaoglindex.html#identifier of a location">identifier of a location</a> where the file DB for the predicate is kept. The location <span class="var">Keyword</span> is described in the <a class="idx_anchor" id="30" href="ciaoglindex.html#file_alias"><tt>file_alias</tt></a> predicate, which must contain a fact in which the first argument unifies with <span class="var">Keyword</span>.<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:predname/1)</span><span><span class="var">PredDesc</span> is a Name/Arity structure denoting a predicate name: <pre>predname(P/A) :-
        atm(P),
        nnegint(A).
</pre>
</span><br/><span class="on_right"> (persdbcache:keyword/1)</span><span><span class="var">Keyword</span> is an atom corresponding to a directory identifier.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="keyword/1" href="ciaopdindex.html#keyword/1">keyword/1</a>:</div><div class="deftext">See <a class="idx_anchor" id="31" href="ciaoglindex.html#persdbrt"><tt>persdbrt</tt></a>. The same conventions for location of DB files apply in both packages.</div></div><p>
</div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Module Sections</h2><ul><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Documentation on exports">Documentation on exports</a><LI><a href="#Documentation on multifiles">Documentation on multifiles</a><LI><a href="#Documentation on internals">Documentation on internals</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="factsdb_doc.html">&#x25C4;</a><a class="navbutton" href="persdbrt_mysql.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>