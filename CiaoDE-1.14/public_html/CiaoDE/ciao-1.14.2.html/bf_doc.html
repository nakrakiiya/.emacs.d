<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>Breadth-first execution &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="agent_doc.html">&#x25C4;</a><a class="navbutton" href="id_doc.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="ExtendProlog.html">PART VII - Ciao extensions</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>Breadth-first execution</h1><a class="idx_anchor" href="ciaoliindex.html#bf"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Daniel Cabeza" href="ciaoauindex.html#Daniel Cabeza">Daniel Cabeza</a>, <a class="idx_anchor" id="Manuel Carro" href="ciaoauindex.html#Manuel Carro">Manuel Carro</a>, <a class="idx_anchor" id="Manuel Hermenegildo" href="ciaoauindex.html#Manuel Hermenegildo">Manuel Hermenegildo</a>.<p>
This package implements breadth-first execution of predicates. This may be useful in search problems when a proof procedure is needed that will find all solutions (even if it may still loop for some failures). This is in contrast with the default depth-first search, which may loop in some cases even if there are correct answers to a given query. This library is also useful when experimenting with pure programs as well as when teaching logic programming, for illustrating the expected theoretical results that should be expected from the declarative semantics (see for example the slides in <a href="http://www.cliplab.org/proglog">http://www.cliplab.org/proglog</a>).<p>It is important to realize, however, that the improved behaviour of breadth first execution comes at a high (exponential!) price in terms of both time ad memory. This library allows the programmer to control this overhead by selecting which predicates will be executed in breadth-first mode and which predicates in depth-first mode. More concretely, predicates written with operators <a class="idx_anchor" id="0" href="ciaoglindex.html#&apos;&lt;-&apos;/1"><tt>&apos;&lt;-&apos;/1</tt></a> (facts) and <a class="idx_anchor" id="1" href="ciaoglindex.html#&apos;&lt;-&apos;/2"><tt>&apos;&lt;-&apos;/2</tt></a> (clauses) are executed using breadth-first search, while predicates using the standard syntax will be executed depth-first.<p>The following example implements two versions of a predicate meant to succeed if two nodes of a directed graph are connected. The <tt>chain/2</tt> predicate (which will be executed depth-first) loops without finding the connection between <tt>a</tt> and <tt>d</tt>, while the <tt>bfchain/2</tt> predicate (which will be executed breadth-first) will find the connection correctly:<p><pre>:- module(chain, _, [bf]).

test(bf) :- bfchain(a,d).
test(df) :- chain(a,d).   % loops!

bfchain(X,X) &lt;- .
bfchain(X,Y) &lt;- arc(X,Z), bfchain(Z,Y).

chain(X,X).
chain(X,Y) :- arc(X,Z), chain(Z,Y).

arc(a,b).
arc(a,d).
arc(b,c).
arc(c,a).

</pre> <p>A second package, <a class="idx_anchor" id="2" href="ciaoglindex.html#&apos;bf/bfall&apos;"><tt>&apos;bf/bfall&apos;</tt></a>, allows executing <em>all</em> the predicates in a given module in breadth-first mode. In this case, predicates should be written using the standard syntax. This is useful to be able to switch easily between depth-first and breadth-first execution (e.g., for testing purposes) for all predicates in a given module without having to modify the program. The following program (written in standard syntax) runs breadth-first:<p><pre>:- module(chain_bfall, _, [&apos;bf/bfall&apos;]).

test :- chain(a,d).

chain(X,X).
chain(X,Y) :- arc(X,Z), chain(Z,Y).

arc(a,b).
arc(a,d).
arc(b,c).
arc(c,a).

</pre> <p>There is another version, package <a class="idx_anchor" id="3" href="ciaoglindex.html#&apos;bf/af&apos;"><tt>&apos;bf/af&apos;</tt></a>, which ensures AND-fairness by goal shuffling. This reduces the number of cases in which an execution that is a failure loops instead (infinite failures) at a small additional cost. For example, by using <a class="idx_anchor" id="4" href="ciaoglindex.html#&apos;bf/af&apos;"><tt>&apos;bf/af&apos;</tt></a> the following code correctly answers &ldquo;<tt>no</tt>&rdquo; when executing <tt>test/0</tt>:<p><pre>:- module(sublistapp, [test/0, sublistapp/2], [&apos;bf/af&apos;]).

:- push_prolog_flag(unused_pred_warnings, no).

test :- sublistapp([a], [b]).

sublistapp(S, L) &lt;- append(_, S, Y), append(Y, _, L).

append([], L, L) &lt;- .
append([X|Xs], L, [X|Ys]) &lt;- append(Xs, L, Ys).

:- pop_prolog_flag(unused_pred_warnings).

</pre> <p>There is also a package <a class="idx_anchor" id="5" href="ciaoglindex.html#&apos;bf/bfall&apos;"><tt>&apos;bf/bfall&apos;</tt></a> which again allows executing <em>all</em> the predicates in a given module in breadth-first, and-fair mode, where also all predicates should be written using the standard syntax. This package offers (at a cost, of course) very nice results for many programs, and is used extensively in programming courses by the Ciao developers.<p>Finally, it should be noted that a separate library, <a class="idx_anchor" id="6" href="ciaoglindex.html#id"><tt>id</tt></a>, implements <em>iterative-deepening</em> search, which can in many cases be a better alternative to breadth-first search, since it achieves the same improvement in the completeness results in many cases at a greatly reduced execution cost (but the enumeration order of solutions is not as nice, and that is why these packages are very attractive for prototyping and teaching).<p><br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/><tt>:- use_package(bf).</tt>

or

<tt>:- module(...,...,[bf]).</tt><LI><strong>New operators defined:</strong><br/><a class="idx_anchor" id="7" href="ciaoglindex.html#&lt;-/2"><tt>&lt;-/2</tt></a> [1200,xfx], <a class="idx_anchor" id="8" href="ciaoglindex.html#&lt;-/1"><tt>&lt;-/1</tt></a> [1200,xf].
</ul></div></div><div id="Known bugs and planned improvements"><h2>Known bugs and planned improvements</h2><ul><LI>Does not correctly work in user files.</ul></div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Package Sections</h2><ul><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Known bugs and planned improvements">Known bugs and planned improvements</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="agent_doc.html">&#x25C4;</a><a class="navbutton" href="id_doc.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>