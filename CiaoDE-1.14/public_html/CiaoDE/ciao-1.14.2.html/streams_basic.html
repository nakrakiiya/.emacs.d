<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>Basic file/stream handling &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="arithmetic.html">&#x25C4;</a><a class="navbutton" href="io_basic.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="Builtins.html">PART II - The Ciao basic language (engine)</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>Basic file/stream handling</h1><a class="idx_anchor" href="ciaoliindex.html#streams_basic"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Daniel Cabeza" href="ciaoauindex.html#Daniel Cabeza">Daniel Cabeza</a>, <a class="idx_anchor" id="Mats Carlsson" href="ciaoauindex.html#Mats Carlsson">Mats Carlsson</a>.<p>
This module provides basic predicates for handling files and streams, in order to make input/output on them.<br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/>These predicates are builtin in Ciao, so nothing special has to be done to use them.<LI><strong>Exports:</strong><br/><ul class="itemize_minus"><LI><em>Predicates:</em><br/><a class="idx_anchor" id="0" href="ciaoglindex.html#open/3"><tt>open/3</tt></a>, <a class="idx_anchor" id="1" href="ciaoglindex.html#open/4"><tt>open/4</tt></a>, <a class="idx_anchor" id="2" href="ciaoglindex.html#close/1"><tt>close/1</tt></a>, <a class="idx_anchor" id="3" href="ciaoglindex.html#set_input/1"><tt>set_input/1</tt></a>, <a class="idx_anchor" id="4" href="ciaoglindex.html#current_input/1"><tt>current_input/1</tt></a>, <a class="idx_anchor" id="5" href="ciaoglindex.html#set_output/1"><tt>set_output/1</tt></a>, <a class="idx_anchor" id="6" href="ciaoglindex.html#current_output/1"><tt>current_output/1</tt></a>, <a class="idx_anchor" id="7" href="ciaoglindex.html#character_count/2"><tt>character_count/2</tt></a>, <a class="idx_anchor" id="8" href="ciaoglindex.html#line_count/2"><tt>line_count/2</tt></a>, <a class="idx_anchor" id="9" href="ciaoglindex.html#line_position/2"><tt>line_position/2</tt></a>, <a class="idx_anchor" id="10" href="ciaoglindex.html#flush_output/1"><tt>flush_output/1</tt></a>, <a class="idx_anchor" id="11" href="ciaoglindex.html#flush_output/0"><tt>flush_output/0</tt></a>, <a class="idx_anchor" id="12" href="ciaoglindex.html#clearerr/1"><tt>clearerr/1</tt></a>, <a class="idx_anchor" id="13" href="ciaoglindex.html#current_stream/3"><tt>current_stream/3</tt></a>, <a class="idx_anchor" id="14" href="ciaoglindex.html#stream_code/2"><tt>stream_code/2</tt></a>, <a class="idx_anchor" id="15" href="ciaoglindex.html#absolute_file_name/2"><tt>absolute_file_name/2</tt></a>, <a class="idx_anchor" id="16" href="ciaoglindex.html#absolute_file_name/7"><tt>absolute_file_name/7</tt></a>, <a class="idx_anchor" id="17" href="ciaoglindex.html#pipe/2"><tt>pipe/2</tt></a>.
<LI><em>Regular Types:</em><br/><a class="idx_anchor" id="18" href="ciaoglindex.html#open_option_list/1"><tt>open_option_list/1</tt></a>, <a class="idx_anchor" id="19" href="ciaoglindex.html#sourcename/1"><tt>sourcename/1</tt></a>, <a class="idx_anchor" id="20" href="ciaoglindex.html#stream/1"><tt>stream/1</tt></a>, <a class="idx_anchor" id="21" href="ciaoglindex.html#stream_alias/1"><tt>stream_alias/1</tt></a>, <a class="idx_anchor" id="22" href="ciaoglindex.html#io_mode/1"><tt>io_mode/1</tt></a>, <a class="idx_anchor" id="23" href="ciaoglindex.html#atm_or_int/1"><tt>atm_or_int/1</tt></a>.
<LI><em>Multifiles:</em><br/><a class="idx_anchor" id="24" href="ciaoglindex.html#file_search_path/2"><tt>file_search_path/2</tt></a>, <a class="idx_anchor" id="25" href="ciaoglindex.html#library_directory/1"><tt>library_directory/1</tt></a>.
</ul></ul></div></div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="open/3" href="ciaopdindex.html#open/3">open/3</a>:</div><div class="deftext"><tt>open(File,Mode,Stream)</tt>
<p>Open <span class="var">File</span> with mode <span class="var">Mode</span> and return in <span class="var">Stream</span> the stream associated with the file. No extension is implicit in <span class="var">File</span>.<p><strong>Usage 1:</strong> <span class="on_right"><span class="iso">ISO</span></span><span></span>
<ul class="itemize_minus"><LI><em>Description:</em> Normal use.<LI><em>Call and exit should be compatible with:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (streams_basic:sourcename/1)</span><span><span class="var">File</span> is a source name.
</span><br/><span class="on_right"> (streams_basic:io_mode/1)</span><span><span class="var">Mode</span> is an opening mode (&apos;read&apos;, &apos;write&apos; or &apos;append&apos;).
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties should hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul><p><strong>Usage 2:</strong> <ul class="itemize_minus"><LI><em>Description:</em> In the special case that <span class="var">File</span> is an integer, it is assumed to be a file descriptor passed to Prolog from a foreign function call. The file descriptor is connected to a Prolog stream (invoking the UNIX function <tt>fdopen</tt>) which is unified with <span class="var">Stream</span>.<LI><em>Call and exit should be compatible with:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">File</span> is an integer.
</span><br/><span class="on_right"> (streams_basic:io_mode/1)</span><span><span class="var">Mode</span> is an opening mode (&apos;read&apos;, &apos;write&apos; or &apos;append&apos;).
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="open/4" href="ciaopdindex.html#open/4">open/4</a>:</div><div class="deftext"><tt>open(File,Mode,Stream,Options)</tt>
<p>Same as <tt>open(<span class="var">File</span>, <span class="var">Mode</span>, <span class="var">Stream</span>)</tt> with options <span class="var">Options</span>. See the definition of <a class="idx_anchor" id="26" href="ciaoglindex.html#open_option_list/1"><tt>open_option_list/1</tt></a> for details.<p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>Call and exit should be compatible with:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (streams_basic:sourcename/1)</span><span><span class="var">File</span> is a source name.
</span><br/><span class="on_right"> (streams_basic:io_mode/1)</span><span><span class="var">Mode</span> is an opening mode (&apos;read&apos;, &apos;write&apos; or &apos;append&apos;).
</span><br/><span class="on_right"> (streams_basic:open_option_list/1)</span><span><span class="var">Options</span> is a list of options for <a class="idx_anchor" id="27" href="ciaoglindex.html#open/4"><tt>open/4</tt></a>.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties should hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="open_option_list/1" href="ciaoteindex.html#open_option_list/1">open_option_list/1</a>:</div><div class="deftext">A list of options for <a class="idx_anchor" id="28" href="ciaoglindex.html#open/4"><tt>open/4</tt></a>, currently the meaningful options are:<p><dl> <p><DT><tt>lock</tt><dd> Try to set an advisory lock for the file. If the open mode is <tt>read</tt>, the lock is a read (shared) lock, else it is a write (exclusive) lock. If the lock cannot be acquired, the call waits until it is released (but can fail in exceptional cases).<p><DT><tt>lock_nb</tt><dd> Same as <tt>lock</tt>, but the call immediately fails if the lock cannot be acquired.<p><DT><tt>lock(Lock_Mode)</tt><dd> Same as <tt>lock</tt>, but specifying in <tt>Lock_Mode</tt> whether the lock is <tt>read</tt> (also <tt>shared</tt>) or <tt>write</tt> (also <tt>exclusive</tt>). This option has be included for compatibility with the SWI-Prolog locking options, because in general the type of lock should match the open mode as in the <tt>lock</tt> option.<p><DT><tt>lock_nb(Lock_Mode)</tt><dd> Same as the previous option but with the <tt>lock_nb</tt> behavior.<p></dl> <p>All file locking is implemented via the POSIX function fcntl(). Please refer to its manual page for details.<p><strong>Usage:</strong> <tt>open_option_list(L)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">L</span> is a list of options for <a class="idx_anchor" id="29" href="ciaoglindex.html#open/4"><tt>open/4</tt></a>.</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="close/1" href="ciaopdindex.html#close/1">close/1</a>:</div><div class="deftext"><tt>close(Stream)</tt>
<p>Close the stream <span class="var">Stream</span>.<p><strong>Usage:</strong> <span class="on_right"><span class="iso">ISO</span></span><span></span>
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="set_input/1" href="ciaopdindex.html#set_input/1">set_input/1</a>:</div><div class="deftext"><tt>set_input(Stream)</tt>
<p>Set the current input stream to <span class="var">Stream</span>. A notion of <a class="idx_anchor" id="30" href="ciaocoindex.html#current input stream"><em>current input stream</em></a> is maintained by the system, so that input predicates with no explicit stream operate on the current input stream. Initially it is set to <tt>user_input</tt>.<p><strong>Usage:</strong> <span class="on_right"><span class="iso">ISO</span></span><span></span>
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="current_input/1" href="ciaopdindex.html#current_input/1">current_input/1</a>:</div><div class="deftext"><tt>current_input(Stream)</tt>
<p>Unify <span class="var">Stream</span> with the <a class="idx_anchor" id="31" href="ciaoglindex.html#current input stream">current input stream</a>. In addition to the ISO behavior, stream aliases are allowed. This is useful for most applications checking whether a stream is the standard input or output.<p><strong>Usage:</strong> <span class="on_right"><span class="iso">ISO</span></span><span></span>
<ul class="itemize_minus"><LI><em>Calls should, and exit will be compatible with:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="set_output/1" href="ciaopdindex.html#set_output/1">set_output/1</a>:</div><div class="deftext"><tt>set_output(Stream)</tt>
<p>Set the current output stream to <span class="var">Stream</span>. A notion of <a class="idx_anchor" id="32" href="ciaocoindex.html#current output stream"><em>current output stream</em></a> is maintained by the system, so that output predicates with no explicit stream operate on the current output stream. Initially it is set to <tt>user_output</tt>.<p><strong>Usage:</strong> <span class="on_right"><span class="iso">ISO</span></span><span></span>
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="current_output/1" href="ciaopdindex.html#current_output/1">current_output/1</a>:</div><div class="deftext"><tt>current_output(Stream)</tt>
<p>Unify <span class="var">Stream</span> with the <a class="idx_anchor" id="33" href="ciaoglindex.html#current output stream">current output stream</a>. The same comment as for <a class="idx_anchor" id="34" href="ciaoglindex.html#current_input/1"><tt>current_input/1</tt></a> applies.<p><strong>Usage:</strong> <span class="on_right"><span class="iso">ISO</span></span><span></span>
<ul class="itemize_minus"><LI><em>Calls should, and exit will be compatible with:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="character_count/2" href="ciaopdindex.html#character_count/2">character_count/2</a>:</div><div class="deftext"><tt>character_count(Stream,Count)</tt>
<p><span class="var">Count</span> characters have been read from or written to <span class="var">Stream</span>.<p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>Calls should, and exit will be compatible with:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Count</span> is an integer.
</span>
<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Count</span> is an integer.
</span>
<LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="line_count/2" href="ciaopdindex.html#line_count/2">line_count/2</a>:</div><div class="deftext"><tt>line_count(Stream,Count)</tt>
<p><span class="var">Count</span> lines have been read from or written to <span class="var">Stream</span>.<p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>Calls should, and exit will be compatible with:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Count</span> is an integer.
</span>
<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Count</span> is an integer.
</span>
<LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="line_position/2" href="ciaopdindex.html#line_position/2">line_position/2</a>:</div><div class="deftext"><tt>line_position(Stream,Count)</tt>
<p><span class="var">Count</span> characters have been read from or written to the current line of <span class="var">Stream</span>.<p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>Calls should, and exit will be compatible with:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Count</span> is an integer.
</span>
<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Count</span> is an integer.
</span>
<LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="flush_output/1" href="ciaopdindex.html#flush_output/1">flush_output/1</a>:</div><div class="deftext"><tt>flush_output(Stream)</tt>
<p>Flush any buffered data to output stream <span class="var">Stream</span>.<p><strong>Usage:</strong> <span class="on_right"><span class="iso">ISO</span></span><span></span>
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="flush_output/0" href="ciaopdindex.html#flush_output/0">flush_output/0</a>:</div><div class="deftext"><tt>flush_output</tt>
<p>Behaves like <tt>current_output(S), flush_output(S)</tt></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="clearerr/1" href="ciaopdindex.html#clearerr/1">clearerr/1</a>:</div><div class="deftext"><tt>clearerr(Stream)</tt>
<p>Clear the end-of-file and error indicators for input stream <span class="var">Stream</span>.<p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="current_stream/3" href="ciaopdindex.html#current_stream/3">current_stream/3</a>:</div><div class="deftext"><tt>current_stream(Filename,Mode,Stream)</tt>
<p><span class="var">Stream</span> is a stream which was opened in mode <span class="var">Mode</span> and which is connected to the absolute file name <span class="var">Filename</span> (an atom) or to the file descriptor <span class="var">Filename</span> (an integer). This predicate can be used for enumerating all currently open streams through backtracking.<p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>Calls should, and exit will be compatible with:</em><br/><span class="on_right"> (streams_basic:atm_or_int/1)</span><span>streams_basic:atm_or_int(Filename)
</span><br/><span class="on_right"> (streams_basic:io_mode/1)</span><span><span class="var">Mode</span> is an opening mode (&apos;read&apos;, &apos;write&apos; or &apos;append&apos;).
</span><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (streams_basic:atm_or_int/1)</span><span>streams_basic:atm_or_int(Filename)
</span><br/><span class="on_right"> (streams_basic:io_mode/1)</span><span><span class="var">Mode</span> is an opening mode (&apos;read&apos;, &apos;write&apos; or &apos;append&apos;).
</span><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="stream_code/2" href="ciaopdindex.html#stream_code/2">stream_code/2</a>:</div><div class="deftext"><tt>stream_code(Stream,StreamCode)</tt>
<p><span class="var">StreamCode</span> is the file descriptor (an integer) corresponding to the Prolog stream <span class="var">Stream</span>.<p><strong>Usage 1:</strong> <ul class="itemize_minus"><LI><em>Calls should, and exit will be compatible with:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">StreamCode</span> is an integer.
</span>
<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">StreamCode</span> is an integer.
</span>
</ul><p><strong>Usage 2:</strong> <ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Stream</span> is a free variable.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">StreamCode</span> is an integer.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Stream</span> is an open stream.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="absolute_file_name/2" href="ciaopdindex.html#absolute_file_name/2">absolute_file_name/2</a>:</div><div class="deftext"><tt>absolute_file_name(RelFileSpec,AbsFileSpec)</tt>
<p>If <span class="var">RelFileSpec</span> is an absolute pathname then do an absolute lookup. If <span class="var">RelFileSpec</span> is a relative pathname then prefix the name with the name of the current directory and do an absolute lookup. If <span class="var">RelFileSpec</span> is a path alias, perform the lookup following the path alias rules (see <a class="idx_anchor" id="35" href="ciaoglindex.html#sourcename/1"><tt>sourcename/1</tt></a>). In all cases: if a matching file with suffix <tt>.pl</tt> exists, then <span class="var">AbsFileSpec</span> will be unified with this file. Failure to open a file normally causes an exception. The behaviour can be controlled by the <tt>fileerrors</tt> <a class="idx_anchor" id="36" href="ciaoglindex.html#prolog flag">prolog flag</a>.<p><strong>Usage:</strong> <tt>absolute_file_name(RelFileSpec,AbsFileSpec)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">AbsFileSpec</span> is the absolute name (with full path) of <span class="var">RelFileSpec</span>.<LI><em>Call and exit should be compatible with:</em><br/><span class="on_right"> (streams_basic:sourcename/1)</span><span><span class="var">RelFileSpec</span> is a source name.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">AbsFileSpec</span> is an atom.
</span>
<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:nonvar/1)</span><span><span class="var">RelFileSpec</span> is currently a term which is not a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">AbsFileSpec</span> is a free variable.
</span>
<LI><em>The following properties should hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="absolute_file_name/7" href="ciaopdindex.html#absolute_file_name/7">absolute_file_name/7</a>:</div><div class="deftext"><tt>absolute_file_name(Spec,Opt,Suffix,CurrDir,AbsFile,AbsBase,AbsDir)</tt>
<p><span class="var">AbsFile</span> is the absolute name (with full path) of <span class="var">Spec</span>, which has an optional first suffix <span class="var">Opt</span> and an optional second suffix <span class="var">Suffix</span>, when the current directory is <span class="var">CurrDir</span>. <span class="var">AbsBase</span> is the same as <span class="var">AbsFile</span>, but without the second suffix, and <span class="var">AbsDir</span> is the absolute path of the directory where <span class="var">AbsFile</span> is. The Ciao compiler invokes this predicate with <span class="var">Opt</span>=<tt>&apos;_opt&apos;</tt> and <span class="var">Suffix</span>=<tt>&apos;.pl&apos;</tt> when searching source files.<p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (streams_basic:sourcename/1)</span><span><span class="var">Spec</span> is a source name.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Opt</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Suffix</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">CurrDir</span> is an atom.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">AbsFile</span> is a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">AbsBase</span> is a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">AbsDir</span> is a free variable.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">AbsFile</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">AbsBase</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">AbsDir</span> is an atom.
</span>
<LI><em>The following properties should hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="pipe/2" href="ciaopdindex.html#pipe/2">pipe/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <span class="on_right"><span class="iso">ISO</span></span><span></span>
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Arg1</span> is a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Arg2</span> is a free variable.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Arg1</span> is an open stream.
</span><br/><span class="on_right"> (streams_basic:stream/1)</span><span><span class="var">Arg2</span> is an open stream.
</span>
<LI><em>The following properties hold globally:</em><br/><span class="on_right"> (basic_props:native/1)</span><span>This predicate is understood natively by CiaoPP.
</span>
</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="sourcename/1" href="ciaoteindex.html#sourcename/1">sourcename/1</a>:</div><div class="deftext">A source name is a flexible way of referring to a concrete file. A source name is either a relative or absolute filename given as:<p><ul> <p><LI>an atom, or<p><LI>a unary functor (which represents a <a class="idx_anchor" id="37" href="ciaocoindex.html#path alias"><em>path alias</em></a>, see below) applied to a <em>relative</em> path, the latter being given as an atom.<p></ul> <p>In all cases certain filename extensions (e.g., <tt>.pl</tt>) can be implicit. In the first form above, file names can be relative to the current directory. Also, file names beginning with <tt>~</tt> or <tt>$</tt> are treated specially. For example,<p><dl> <p><DT><tt>&apos;~/ciao/sample.pl&apos;</tt><dd> is equivalent to <tt>&apos;/home/staff/herme/ciao/sample.pl&apos;</tt>, if <tt>/home/staff/herme</tt> is the user&apos;s home directory. (This is also equivalent to <tt>&apos;$HOME/ciao/sample.pl&apos;</tt> as explained below.)<p><DT><tt>&apos;~bardo/prolog/sample.pl&apos;</tt><dd> is equivalent to <tt>&apos;/home/bardo/prolog/sample.pl&apos;</tt>, if <tt>/home/bardo</tt> is bardo&apos;s home directory.<p><DT><tt>&apos;$UTIL/sample.pl&apos;</tt><dd> is equivalent to <tt>&apos;/usr/local/src/utilities/sample.pl&apos;</tt>, if <tt>/usr/local/src/utilities</tt> is the value of the environment variable <tt>UTIL</tt>.<p></dl> <p>The second form allows using path aliases. Such aliases allow refering to files not with absolute file system paths but with paths which are relative to predefined (or user-defined) abstract names. For example, given the path alias <tt>myutils</tt> which has been defined to refer to path <tt>&apos;/home/bardo/utilities&apos;</tt>, if that directory contains the file <tt>stuff.pl</tt> then the term <tt>myutils(stuff)</tt> in a <a class="idx_anchor" id="38" href="ciaoglindex.html#use_module/1"><tt>use_module/1</tt></a> declaration would refer to the file <tt>&apos;/home/bardo/utilities/stuff.pl&apos;</tt> (the <tt>.pl</tt> extension is implicit in the <a class="idx_anchor" id="39" href="ciaoglindex.html#use_module/1"><tt>use_module/1</tt></a> declaration). As a special case, if that directory contains a subdirectory named <tt>stuff</tt> which in turn contains the file <tt>stuff.pl</tt>, the same term would refer to the file <tt>&apos;/home/bardo/utilities/stuff/stuff.pl&apos;</tt>. If a path alias is related to several paths, all paths are scanned in sequence until a match is found. For information on predefined path aliases or how to define new path aliases, see <a class="idx_anchor" id="40" href="ciaoglindex.html#file_search_path/2"><tt>file_search_path/2</tt></a>. <p><strong>Usage:</strong> <tt>sourcename(F)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">F</span> is a source name.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="stream/1" href="ciaoteindex.html#stream/1">stream/1</a>:</div><div class="deftext">Streams correspond to the file pointers used at the operating system level, and usually represent opened files. There are four special streams which correspond with the operating system standard streams: <dl> <p><DT><tt>user_input</tt><dd> The standard input stream, i.e. the terminal, usually.<p><DT><tt>user_output</tt><dd> The standard output stream, i.e. the terminal, usually.<p><DT><tt>user_error</tt><dd> The standard error stream.<p><DT><tt>user</tt><dd> The standard input or output stream, depending on context.<p></dl> <p><p><strong>Usage:</strong> <tt>stream(S)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">S</span> is an open stream.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="stream_alias/1" href="ciaoteindex.html#stream_alias/1">stream_alias/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>stream_alias(S)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">S</span> is the alias of an open stream, i.e., an atom which represents a stream at Prolog level.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="io_mode/1" href="ciaoteindex.html#io_mode/1">io_mode/1</a>:</div><div class="deftext">Can have the following values: <dl> <p><DT><tt>read</tt><dd> Open the file for input.<p><DT><tt>write</tt><dd> Open the file for output. The file is created if it does not already exist, the file will otherwise be truncated.<p><DT><tt>append</tt><dd> Open the file for output. The file is created if it does not already exist, the file will otherwise be appended to.<p></dl><p><strong>Usage:</strong> <tt>io_mode(M)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">M</span> is an opening mode (&apos;read&apos;, &apos;write&apos; or &apos;append&apos;).</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="atm_or_int/1" href="ciaoteindex.html#atm_or_int/1">atm_or_int/1</a>:</div><div class="deftext">A regular type, defined as follows:<pre>atm_or_int(X) :-
        atm(X).
atm_or_int(X) :-
        int(X).
</pre> </div></div><p>
</div><div id="Documentation on multifiles"><h2>Documentation on multifiles</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="file_search_path/2" href="ciaopdindex.html#file_search_path/2">file_search_path/2</a>:</div><div class="deftext"><tt>file_search_path(Alias,Path)</tt>
<p>The <a class="idx_anchor" id="41" href="ciaoglindex.html#path alias">path alias</a> <span class="var">Alias</span> is linked to path <span class="var">Path</span>. Both arguments must be atoms. New facts (or clauses) of this predicate can be asserted to define new path aliases. Predefined path aliases in Ciao are:<p><dl> <p><DT><tt>library</tt><dd> Initially points to all Ciao library paths. See <a class="idx_anchor" id="42" href="ciaoglindex.html#library_directory/1"><tt>library_directory/1</tt></a>.<p><DT><tt>engine</tt><dd> The path of the <a class="idx_anchor" id="43" href="ciaoglindex.html#Ciao engine builtins">Ciao engine builtins</a>.<p><DT><tt>.</tt><dd> The current path (<tt>&apos;.&apos;</tt>).<p></dl> <br/>
The predicate is <em>multifile</em>.<br/>
The predicate is of type <em>dynamic</em>.<br/><tt>file_search_path(X,Y)</tt>
<ul class="itemize_minus"><LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (basic_props:gnd/1)</span><span><span class="var">X</span> is ground.
</span><br/><span class="on_right"> (basic_props:gnd/1)</span><span><span class="var">Y</span> is ground.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="library_directory/1" href="ciaopdindex.html#library_directory/1">library_directory/1</a>:</div><div class="deftext"><tt>library_directory(Path)</tt>
<p><span class="var">Path</span> is a library path (a path represented by the <a class="idx_anchor" id="44" href="ciaoglindex.html#path alias">path alias</a> <tt>library</tt>). Predefined library paths in Ciao are <tt>&apos;$CIAOLIB/lib&apos;</tt>, <tt>&apos;$CIAOLIB/library&apos;</tt>, and <tt>&apos;$CIAOLIB/contrib&apos;</tt>, given that <tt>$CIAOLIB</tt> is the path of the root ciao library directory. More library paths can be defined by asserting new facts (or clauses) of this predicate.<br/>
The predicate is <em>multifile</em>.<br/>
The predicate is of type <em>dynamic</em>.<br/><tt>library_directory(X)</tt>
<ul class="itemize_minus"><LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (basic_props:gnd/1)</span><span><span class="var">X</span> is ground.
</span>
</ul></div></div><p>
</div><div id="Known bugs and planned improvements"><h2>Known bugs and planned improvements</h2><ul><LI>Run-time checks have been reported not to work with this code. That means that either the assertions here, or the code that implements the run-time checks are erroneous.</ul></div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Module Sections</h2><ul><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Documentation on exports">Documentation on exports</a><LI><a href="#Documentation on multifiles">Documentation on multifiles</a><LI><a href="#Known bugs and planned improvements">Known bugs and planned improvements</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="arithmetic.html">&#x25C4;</a><a class="navbutton" href="io_basic.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>