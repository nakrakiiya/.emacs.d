<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>Prolog system internal predicates &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="system.html">&#x25C4;</a><a class="navbutton" href="dec10_io.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="ClassicProlog.html">PART IV - Classic Prolog library (classic)</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>Prolog system internal predicates</h1><a class="idx_anchor" href="ciaoliindex.html#prolog_sys"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Manuel Carro" href="ciaoauindex.html#Manuel Carro">Manuel Carro</a>, <a class="idx_anchor" id="Daniel Cabeza" href="ciaoauindex.html#Daniel Cabeza">Daniel Cabeza</a>, <a class="idx_anchor" id="Jose F. Morales" href="ciaoauindex.html#Jose F. Morales">Jos&eacute; F. Morales</a>, <a class="idx_anchor" id="Mats Carlsson" href="ciaoauindex.html#Mats Carlsson">Mats Carlsson (original author)</a>.<p>
This module implements some miscellaneous predicates which provide access to some internal statistics, special properties of the predicates, etc.<br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/><tt>:- use_module(library(prolog_sys)).</tt><LI><strong>Exports:</strong><br/><ul class="itemize_minus"><LI><em>Predicates:</em><br/><a class="idx_anchor" id="0" href="ciaoglindex.html#statistics/0"><tt>statistics/0</tt></a>, <a class="idx_anchor" id="1" href="ciaoglindex.html#statistics/2"><tt>statistics/2</tt></a>, <a class="idx_anchor" id="2" href="ciaoglindex.html#new_atom/1"><tt>new_atom/1</tt></a>, <a class="idx_anchor" id="3" href="ciaoglindex.html#predicate_property/2"><tt>predicate_property/2</tt></a>, <a class="idx_anchor" id="4" href="ciaoglindex.html#predicate_property/3"><tt>predicate_property/3</tt></a>, <a class="idx_anchor" id="5" href="ciaoglindex.html#current_atom/1"><tt>current_atom/1</tt></a>, <a class="idx_anchor" id="6" href="ciaoglindex.html#garbage_collect/0"><tt>garbage_collect/0</tt></a>.
<LI><em>Regular Types:</em><br/><a class="idx_anchor" id="7" href="ciaoglindex.html#clockfreq_result/1"><tt>clockfreq_result/1</tt></a>, <a class="idx_anchor" id="8" href="ciaoglindex.html#tick_result/1"><tt>tick_result/1</tt></a>, <a class="idx_anchor" id="9" href="ciaoglindex.html#symbol_result/1"><tt>symbol_result/1</tt></a>, <a class="idx_anchor" id="10" href="ciaoglindex.html#gc_result/1"><tt>gc_result/1</tt></a>, <a class="idx_anchor" id="11" href="ciaoglindex.html#memory_result/1"><tt>memory_result/1</tt></a>, <a class="idx_anchor" id="12" href="ciaoglindex.html#time_result/1"><tt>time_result/1</tt></a>, <a class="idx_anchor" id="13" href="ciaoglindex.html#symbol_option/1"><tt>symbol_option/1</tt></a>, <a class="idx_anchor" id="14" href="ciaoglindex.html#garbage_collection_option/1"><tt>garbage_collection_option/1</tt></a>, <a class="idx_anchor" id="15" href="ciaoglindex.html#memory_option/1"><tt>memory_option/1</tt></a>, <a class="idx_anchor" id="16" href="ciaoglindex.html#clockfreq_option/1"><tt>clockfreq_option/1</tt></a>, <a class="idx_anchor" id="17" href="ciaoglindex.html#tick_option/1"><tt>tick_option/1</tt></a>, <a class="idx_anchor" id="18" href="ciaoglindex.html#time_option/1"><tt>time_option/1</tt></a>.
</ul></ul></div></div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="statistics/0" href="ciaopdindex.html#statistics/0">statistics/0</a>:</div><div class="deftext"><p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>Description:</em> Prints statistics about the system.</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="statistics/2" href="ciaopdindex.html#statistics/2">statistics/2</a>:</div><div class="deftext"><p><strong>Usage 1:</strong> <tt>statistics(Tick_option,Tick_result)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Gather information about clock ticks (either run, user, system or wall tick) since last consult or since start of program. A tick is the smallest amount of time that a clock can measure.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (prolog_sys:tick_option/1)</span><span>Options to get information about execution ticks.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Tick_result</span> is any term.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (prolog_sys:tick_option/1)</span><span>Options to get information about execution ticks.
</span><br/><span class="on_right"> (prolog_sys:tick_result/1)</span><span><span class="var">Tick_result</span> is a two-element list of numbers. The first number is the number of ticks since the start of the execution; the second number is the number of ticks since the previous consult to tick.
</span>
</ul><p><strong>Usage 2:</strong> <tt>statistics(Clockfreq_option,Clockfreq_result)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Gather information about frequency of the clocks used to measure the ticks (either run-user, system or wall clock). Results are returned in hertz. This value also can be defined as the amount of ticks that a clock can measure in one second.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (prolog_sys:clockfreq_option/1)</span><span>Options to get information about the frequency of clocks used to get the ticks.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Clockfreq_result</span> is any term.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (prolog_sys:clockfreq_option/1)</span><span>Options to get information about the frequency of clocks used to get the ticks.
</span><br/><span class="on_right"> (prolog_sys:clockfreq_result/1)</span><span><span class="var">Clockfreq_result</span> is a number. It gives the frequency in hertz used by the clock get the ticks.
</span>
</ul><p><strong>Usage 3:</strong> <tt>statistics(Time_option,Time_result)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Gather information about time (either process time or wall time) since last consult or since start of program. Results are returned in milliseconds. Note that internally, time is calculated as:<p><pre>  Time_result = (Tick_result / Clockfreq_result) * 1000
</pre> <p><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (prolog_sys:time_option/1)</span><span>Options to get information about execution time. <span class="var">Time_option</span> must be one of <tt>runtime</tt>, <tt>usertime</tt>, <tt>systemtime</tt> or <tt>walltime</tt>.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Time_result</span> is any term.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (prolog_sys:time_option/1)</span><span>Options to get information about execution time. <span class="var">Time_option</span> must be one of <tt>runtime</tt>, <tt>usertime</tt>, <tt>systemtime</tt> or <tt>walltime</tt>.
</span><br/><span class="on_right"> (prolog_sys:time_result/1)</span><span><span class="var">Time_result</span> is a two-element list of numbers. The first number is the time since the start of the execution; the second number is the time since the previous consult to time.
</span>
</ul><p><strong>Usage 4:</strong> <tt>statistics(Memory_option,Memory_result)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Gather information about memory consumption.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (prolog_sys:memory_option/1)</span><span>Options to get information about memory usage.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Memory_result</span> is any term.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (prolog_sys:memory_option/1)</span><span>Options to get information about memory usage.
</span><br/><span class="on_right"> (prolog_sys:memory_result/1)</span><span>Result is a two-element list of integers. The first element is the space taken up by the option selected, measured in bytes; the second integer is zero for program space (which grows as necessary), and the amount of free space otherwise.
</span>
</ul><p><strong>Usage 5:</strong> <tt>statistics(Garbage_collection_option,Gc_result)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Gather information about garbage collection.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (prolog_sys:garbage_collection_option/1)</span><span>Options to get information about garbage collection.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Gc_result</span> is any term.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (prolog_sys:garbage_collection_option/1)</span><span>Options to get information about garbage collection.
</span><br/><span class="on_right"> (prolog_sys:gc_result/1)</span><span><span class="var">Gc_result</span> is a tree-element list of integers, related to <a class="idx_anchor" id="19" href="ciaoglindex.html#garbage collection">garbage collection</a> and <a class="idx_anchor" id="20" href="ciaoglindex.html#memory management">memory management</a>. When <tt>stack_shifts</tt> is selected, the first one is the number of shifts (reallocations) of the local stack; the second is the number of shifts of the trail, and the third is the time spent in these shifts. When <tt>garbage_collection</tt> is selected, the numbers are, respectively, the number of garbage collections performed, the number of bytes freed, and the time spent in garbage collection.
</span>
</ul><p><strong>Usage 6:</strong> <tt>statistics(Symbol_option,Symbol_result)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Gather information about number of symbols and predicates.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (prolog_sys:symbol_option/1)</span><span>Option to get information about the number of symbols in the program.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Symbol_result</span> is any term.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (prolog_sys:symbol_option/1)</span><span>Option to get information about the number of symbols in the program.
</span><br/><span class="on_right"> (prolog_sys:symbol_result/1)</span><span><span class="var">Symbol_result</span> is a two-element list of integers. The first one is the number of atom, functor, and predicate names in the symbol table. The second is the number of predicates known to be defined (although maybe without clauses).
</span>
</ul><p><strong>Usage 7:</strong> <tt>statistics(Option,Arg2)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> If <span class="var">Option</span> is unbound, it is bound to the values on the other cases.<LI><em>Call and exit should be compatible with:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Arg2</span> is any term.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">Arg2</span> is any term.
</span>
</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="clockfreq_result/1" href="ciaoteindex.html#clockfreq_result/1">clockfreq_result/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>clockfreq_result(Result)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Result</span> is a number. It gives the frequency in hertz used by the clock get the ticks.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="tick_result/1" href="ciaoteindex.html#tick_result/1">tick_result/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>tick_result(Result)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Result</span> is a two-element list of numbers. The first number is the number of ticks since the start of the execution; the second number is the number of ticks since the previous consult to tick.</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="new_atom/1" href="ciaopdindex.html#new_atom/1">new_atom/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>new_atom(Atom)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Returns, on success, a new atom, not existing before in the system. The entry argument must be a variable. The idea behind this atom generation is to provide a fast source of identifiers for new objects, concurrent predicates, etc. on the fly.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Atom</span> is a free variable.
</span>
<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Atom</span> is an atom.
</span>
</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="symbol_result/1" href="ciaoteindex.html#symbol_result/1">symbol_result/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>symbol_result(Result)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Result</span> is a two-element list of integers. The first one is the number of atom, functor, and predicate names in the symbol table. The second is the number of predicates known to be defined (although maybe without clauses).</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="gc_result/1" href="ciaoteindex.html#gc_result/1">gc_result/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>gc_result(Result)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Result</span> is a tree-element list of integers, related to <a class="idx_anchor" id="21" href="ciaoglindex.html#garbage collection">garbage collection</a> and <a class="idx_anchor" id="22" href="ciaoglindex.html#memory management">memory management</a>. When <tt>stack_shifts</tt> is selected, the first one is the number of shifts (reallocations) of the local stack; the second is the number of shifts of the trail, and the third is the time spent in these shifts. When <tt>garbage_collection</tt> is selected, the numbers are, respectively, the number of garbage collections performed, the number of bytes freed, and the time spent in garbage collection.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="memory_result/1" href="ciaoteindex.html#memory_result/1">memory_result/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>memory_result(Result)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Result is a two-element list of integers. The first element is the space taken up by the option selected, measured in bytes; the second integer is zero for program space (which grows as necessary), and the amount of free space otherwise.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="time_result/1" href="ciaoteindex.html#time_result/1">time_result/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>time_result(Result)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Result</span> is a two-element list of numbers. The first number is the time since the start of the execution; the second number is the time since the previous consult to time.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="symbol_option/1" href="ciaoteindex.html#symbol_option/1">symbol_option/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>symbol_option(M)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Option to get information about the number of symbols in the program.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="garbage_collection_option/1" href="ciaoteindex.html#garbage_collection_option/1">garbage_collection_option/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>garbage_collection_option(M)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Options to get information about garbage collection.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="memory_option/1" href="ciaoteindex.html#memory_option/1">memory_option/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>memory_option(M)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Options to get information about memory usage.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="clockfreq_option/1" href="ciaoteindex.html#clockfreq_option/1">clockfreq_option/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>clockfreq_option(M)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Options to get information about the frequency of clocks used to get the ticks.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="tick_option/1" href="ciaoteindex.html#tick_option/1">tick_option/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>tick_option(M)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Options to get information about execution ticks.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="time_option/1" href="ciaoteindex.html#time_option/1">time_option/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>time_option(M)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Options to get information about execution time. <span class="var">M</span> must be one of <tt>runtime</tt>, <tt>usertime</tt>, <tt>systemtime</tt> or <tt>walltime</tt>.</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="predicate_property/2" href="ciaopdindex.html#predicate_property/2">predicate_property/2</a>:</div><div class="deftext"><br/>
<strong>General properties:</strong> <tt>predicate_property(Head,Prop)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Predicate property of <a class="idx_anchor" id="23" href="ciaoglindex.html#true/0"><tt>true/0</tt></a> is compiled<LI><em>If the following properties should hold at call time:</em><br/><span class="on_right"> (term_basic:= /2)</span><span>term_basic:Head=true
</span>


<em>then the following properties should hold upon exit:</em>
<br/><span class="on_right"> (term_basic:= /2)</span><span>term_basic:Prop=compiled
</span>
</ul><p><strong>Usage:</strong> <tt>predicate_property(Head,Property)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> The predicate <span class="var">Head</span>, visible from the current module, (a goal) has the property <span class="var">Property</span>.<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:callable/1)</span><span><span class="var">Head</span> is a term which represents a goal, i.e., an atom or a structure.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Property</span> is an atom.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="predicate_property/3" href="ciaopdindex.html#predicate_property/3">predicate_property/3</a>:</div><div class="deftext">No further documentation available for this predicate.</div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="current_atom/1" href="ciaopdindex.html#current_atom/1">current_atom/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>current_atom(Atom)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Enumerates on backtracking all the existing atoms in the system.<LI><em>The following properties hold upon exit:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Atom</span> is an atom.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="garbage_collect/0" href="ciaopdindex.html#garbage_collect/0">garbage_collect/0</a>:</div><div class="deftext"><p><strong>Usage:</strong> <ul class="itemize_minus"><LI><em>Description:</em> Forces garbage collection when called.</ul></div></div><p>
</div><div id="Known bugs and planned improvements"><h2>Known bugs and planned improvements</h2><ul><LI>The space used by the process is not measured here: process data, code, and stack also take up memory. The memory reported for atoms is not what is actually used, but the space used up by the hash table (which is enlarged as needed).<LI> The predicate <a class="idx_anchor" id="24" href="ciaoglindex.html#predicate_property/2"><tt>predicate_property/2</tt></a> needs more work: <ul> <p><DT>Efficiency:<dd> In order to be complete and efficient, this needs to be a built-in predicate of our module system. Consulting predicate properties does not seem a dangerous operation (except that, when it cannot be resolved at compile-time, it prevents removal of module runtime information).<p><DT>Correctness:<dd> The head is automatically module-expanded on call. If the head is not module-expanded, there are consistency problems. Other systems avoid those problems by disallowing the import of two predicates with the same name from different modules. That is clearly not a solution in Ciao.<p></ul> <LI>Implement a <a class="idx_anchor" id="25" href="ciaoglindex.html#&apos;$predicate_property&apos;/2"><tt>&apos;$predicate_property&apos;/2</tt></a> where the module can be specified. That will simplify the <a class="idx_anchor" id="26" href="ciaoglindex.html#predicate_property/2"><tt>predicate_property/2</tt></a> implementation</ul></div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Module Sections</h2><ul><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Documentation on exports">Documentation on exports</a><LI><a href="#Known bugs and planned improvements">Known bugs and planned improvements</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="system.html">&#x25C4;</a><a class="navbutton" href="dec10_io.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>