<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>Foreign Language Interface Properties &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="foreign_interface_doc.html">&#x25C4;</a><a class="navbutton" href="foreign_compilation.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="Interfaces.html">PART VIII - Interfaces to other languages and systems</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>Foreign Language Interface Properties</h1><a class="idx_anchor" href="ciaoliindex.html#foreign_interface_properties"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Jose F. Morales" href="ciaoauindex.html#Jose F. Morales">Jose F. Morales</a>, <a class="idx_anchor" id="Manuel Carro" href="ciaoauindex.html#Manuel Carro">Manuel Carro</a>.<p>
The foreign language interface uses some properties to specify linking regimes, foreign files to be compiled, types of data available, memory allocation policies, etc.<br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/><tt>:- use_module(library(foreign_interface_properties)).</tt><LI><strong>Exports:</strong><br/><ul class="itemize_minus"><LI><em>Properties:</em><br/><a class="idx_anchor" id="0" href="ciaoglindex.html#foreign_low/1"><tt>foreign_low/1</tt></a>, <a class="idx_anchor" id="1" href="ciaoglindex.html#foreign_low/2"><tt>foreign_low/2</tt></a>, <a class="idx_anchor" id="2" href="ciaoglindex.html#size_of/3"><tt>size_of/3</tt></a>, <a class="idx_anchor" id="3" href="ciaoglindex.html#foreign/1"><tt>foreign/1</tt></a>, <a class="idx_anchor" id="4" href="ciaoglindex.html#foreign/2"><tt>foreign/2</tt></a>, <a class="idx_anchor" id="5" href="ciaoglindex.html#returns/2"><tt>returns/2</tt></a>, <a class="idx_anchor" id="6" href="ciaoglindex.html#do_not_free/2"><tt>do_not_free/2</tt></a>, <a class="idx_anchor" id="7" href="ciaoglindex.html#needs_state/1"><tt>needs_state/1</tt></a>, <a class="idx_anchor" id="8" href="ciaoglindex.html#ttr/3"><tt>ttr/3</tt></a>.
<LI><em>Regular Types:</em><br/><a class="idx_anchor" id="9" href="ciaoglindex.html#int_list/1"><tt>int_list/1</tt></a>, <a class="idx_anchor" id="10" href="ciaoglindex.html#double_list/1"><tt>double_list/1</tt></a>, <a class="idx_anchor" id="11" href="ciaoglindex.html#byte_list/1"><tt>byte_list/1</tt></a>, <a class="idx_anchor" id="12" href="ciaoglindex.html#byte/1"><tt>byte/1</tt></a>, <a class="idx_anchor" id="13" href="ciaoglindex.html#null/1"><tt>null/1</tt></a>, <a class="idx_anchor" id="14" href="ciaoglindex.html#address/1"><tt>address/1</tt></a>, <a class="idx_anchor" id="15" href="ciaoglindex.html#any_term/1"><tt>any_term/1</tt></a>.
</ul></ul></div></div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="int_list/1" href="ciaoteindex.html#int_list/1">int_list/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>int_list(List)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">List</span> is a list of integers.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="double_list/1" href="ciaoteindex.html#double_list/1">double_list/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>double_list(List)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">List</span> is a list of numbers.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="byte_list/1" href="ciaoteindex.html#byte_list/1">byte_list/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>byte_list(List)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">List</span> is a list of bytes.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="byte/1" href="ciaoteindex.html#byte/1">byte/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>byte(B)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Byte</span> is a byte.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="null/1" href="ciaoteindex.html#null/1">null/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>null(Address)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Address</span> is a null adress.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="address/1" href="ciaoteindex.html#address/1">address/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>address(Address)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Address</span> is a memory address.</ul></div></div><p>
<div><span class="on_right">REGTYPE</span><div class="defname"><a class="idx_anchor" id="any_term/1" href="ciaoteindex.html#any_term/1">any_term/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>any_term(X)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">X</span> is any term. The foreign interface passes it to C functions as a general term.</ul></div></div><p>
<div><span class="on_right">PROPERTY</span><div class="defname"><a class="idx_anchor" id="foreign_low/1" href="ciaoprindex.html#foreign_low/1">foreign_low/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>foreign_low(Name)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> The Prolog predicate <a class="idx_anchor" id="16" href="ciaoglindex.html#Name"><tt>Name</tt></a> is implemented using the function <tt>Name</tt>. The implementation is not a common C one, but it accesses directly the internal Ciao Prolog data structures and functions, and therefore no glue code is generated for it.</ul></div></div><p>
<div><span class="on_right">PROPERTY</span><div class="defname"><a class="idx_anchor" id="foreign_low/2" href="ciaoprindex.html#foreign_low/2">foreign_low/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>foreign_low(PrologName,ForeignName)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> The Prolog predicate <a class="idx_anchor" id="17" href="ciaoglindex.html#PrologName"><tt>PrologName</tt></a> is implemented using the function <tt>ForeignName</tt>. The same considerations as above example are to be applied.</ul></div></div><p>
<div><span class="on_right">PROPERTY</span><div class="defname"><a class="idx_anchor" id="size_of/3" href="ciaoprindex.html#size_of/3">size_of/3</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>size_of(Name,ListVar,SizeVar)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> For predicate <span class="var">Name</span>, the size of the argument of type <a class="idx_anchor" id="18" href="ciaoglindex.html#byte_list/1"><tt>byte_list/1</tt></a>, <span class="var">ListVar</span>, is given by the argument of type integer <span class="var">SizeVar</span>.</ul></div></div><p>
<div><span class="on_right">PROPERTY</span><div class="defname"><a class="idx_anchor" id="foreign/1" href="ciaoprindex.html#foreign/1">foreign/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>foreign(Name)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> The Prolog predicate <a class="idx_anchor" id="19" href="ciaoglindex.html#Name"><tt>Name</tt></a> is implemented using the foreign function <tt>Name</tt>.</ul></div></div><p>
<div><span class="on_right">PROPERTY</span><div class="defname"><a class="idx_anchor" id="foreign/2" href="ciaoprindex.html#foreign/2">foreign/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>foreign(PrologName,ForeignName)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> The Prolog predicate <a class="idx_anchor" id="20" href="ciaoglindex.html#PrologName"><tt>PrologName</tt></a> is implemented using the foreign function <tt>ForeignName</tt>.</ul></div></div><p>
<div><span class="on_right">PROPERTY</span><div class="defname"><a class="idx_anchor" id="returns/2" href="ciaoprindex.html#returns/2">returns/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>returns(Name,Var)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> The result of the foreign function that implements the Prolog predicate <a class="idx_anchor" id="21" href="ciaoglindex.html#Name"><tt>Name</tt></a> is unified with the Prolog variable <span class="var">Var</span>. Cannot be used without <a class="idx_anchor" id="22" href="ciaoglindex.html#foreign/1"><tt>foreign/1</tt></a> or <a class="idx_anchor" id="23" href="ciaoglindex.html#foreign/2"><tt>foreign/2</tt></a>.</ul></div></div><p>
<div><span class="on_right">PROPERTY</span><div class="defname"><a class="idx_anchor" id="do_not_free/2" href="ciaoprindex.html#do_not_free/2">do_not_free/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>do_not_free(Name,Var)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> For predicate <span class="var">Name</span>, the C argument passed to (returned from) the foreign function will not be freed after calling the foreign function.</ul></div></div><p>
<div><span class="on_right">PROPERTY</span><div class="defname"><a class="idx_anchor" id="needs_state/1" href="ciaoprindex.html#needs_state/1">needs_state/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>needs_state(Name)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> The foreign function which implementes the predicate <a class="idx_anchor" id="24" href="ciaoglindex.html#Name"><tt>Name</tt></a> needs a <tt>ciao_state</tt> as its first argument.</ul></div></div><p>
<div><span class="on_right">PROPERTY</span><div class="defname"><a class="idx_anchor" id="ttr/3" href="ciaoprindex.html#ttr/3">ttr/3</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>ttr(Name,Var,TTr)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> For predicate <span class="var">Name</span>, the C argument will be translated ussing <tt>TTr</tt> as term translator.</ul></div></div><p>
</div><div id="Documentation on internals"><h2>Documentation on internals</h2><div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="use_foreign_source/1" href="ciaodeindex.html#use_foreign_source/1">use_foreign_source/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>use_foreign_source(Files)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Files</span> is the (list of) foreign file(s) that will be linked with the glue-code file. If the file(s) do(es) not have extension, then the &apos;.c&apos; extension will be automatically added<LI><em>The following properties hold at call time:</em><br/><span class="on_right"> (basic_props:atm_or_atm_list/1)</span><span><span class="var">Files</span> is an atom or a list of atoms.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="use_foreign_source/2" href="ciaodeindex.html#use_foreign_source/2">use_foreign_source/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>use_foreign_source(OsArch,Files)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Files</span> are the OS and architecture dependant foreign files. This allows compiling and linking different files depending on the O.S. and architecture.<LI><em>The following properties hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">OsArch</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm_or_atm_list/1)</span><span><span class="var">Files</span> is an atom or a list of atoms.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="use_foreign_library/1" href="ciaodeindex.html#use_foreign_library/1">use_foreign_library/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>use_foreign_library(Libs)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Libs</span> is the (list of) external library(es) needed to link the C files. Only the short name of the library (i.e., what would follow the <tt>-l</tt> in the linker is needed.<LI><em>The following properties hold at call time:</em><br/><span class="on_right"> (basic_props:atm_or_atm_list/1)</span><span><span class="var">Libs</span> is an atom or a list of atoms.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="use_foreign_library/2" href="ciaodeindex.html#use_foreign_library/2">use_foreign_library/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>use_foreign_library(OsArch,Libs)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Libs</span> are the OS and architecture dependant libraries.<LI><em>The following properties hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">OsArch</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm_or_atm_list/1)</span><span><span class="var">Libs</span> is an atom or a list of atoms.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="extra_compiler_opts/1" href="ciaodeindex.html#extra_compiler_opts/1">extra_compiler_opts/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>extra_compiler_opts(Opts)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Opts</span> is the list of additional compiler options (e.g., optimization options) that will be used during the compilation.<LI><em>The following properties hold at call time:</em><br/><span class="on_right"> (basic_props:atm_or_atm_list/1)</span><span><span class="var">Opts</span> is an atom or a list of atoms.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="extra_compiler_opts/2" href="ciaodeindex.html#extra_compiler_opts/2">extra_compiler_opts/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>extra_compiler_opts(OsArch,Opts)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Opts</span> are the OS and architecture dependant additional compiler options.<LI><em>The following properties hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">OsArch</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm_or_atm_list/1)</span><span><span class="var">Opts</span> is an atom or a list of atoms.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="use_compiler/1" href="ciaodeindex.html#use_compiler/1">use_compiler/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>use_compiler(Compiler)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Compiler</span> is the compiler to use in this file. When this option is used, the default (Ciao-provided) compiler options are not used; those specified in <a class="idx_anchor" id="25" href="ciaoglindex.html#extra_compiler_options"><tt>extra_compiler_options</tt></a> are used instead.<LI><em>The following properties hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Compiler</span> is an atom.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="use_compiler/2" href="ciaodeindex.html#use_compiler/2">use_compiler/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>use_compiler(OsArch,Compiler)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Compiler</span> is the compiler to use in this file when compiling for the architecture <span class="var">OsArch</span>. The option management is the same as in <a class="idx_anchor" id="26" href="ciaoglindex.html#use_compiler/2"><tt>use_compiler/2</tt></a>.<LI><em>The following properties hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">OsArch</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Compiler</span> is an atom.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="extra_linker_opts/1" href="ciaodeindex.html#extra_linker_opts/1">extra_linker_opts/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>extra_linker_opts(Opts)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Opts</span> is the list of additional linker options that will be used during the linkage.<LI><em>The following properties hold at call time:</em><br/><span class="on_right"> (basic_props:atm_or_atm_list/1)</span><span><span class="var">Opts</span> is an atom or a list of atoms.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="extra_linker_opts/2" href="ciaodeindex.html#extra_linker_opts/2">extra_linker_opts/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>extra_linker_opts(OsArch,Opts)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Opts</span> are the OS and architecture dependant additional linker options.<LI><em>The following properties hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">OsArch</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm_or_atm_list/1)</span><span><span class="var">Opts</span> is an atom or a list of atoms.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="use_linker/1" href="ciaodeindex.html#use_linker/1">use_linker/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>use_linker(Linker)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Linker</span> is the linker to use in this file. When this option is used, the default (Ciao-provided) linker options are not used; those specified in <a class="idx_anchor" id="27" href="ciaoglindex.html#extra_linker_options/1"><tt>extra_linker_options/1</tt></a> are used instead.<LI><em>The following properties hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Linker</span> is an atom.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="use_linker/2" href="ciaodeindex.html#use_linker/2">use_linker/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>use_linker(OsArch,Linker)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Compiler</span> is the linker to use in this file when compiling for the architecture <span class="var">OsArch</span>. The option management is the same as in <a class="idx_anchor" id="28" href="ciaoglindex.html#use_compiler/2"><tt>use_compiler/2</tt></a>.<LI><em>The following properties hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">OsArch</span> is an atom.
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Linker</span> is an atom.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="foreign_inline/2" href="ciaodeindex.html#foreign_inline/2">foreign_inline/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>foreign_inline(Term,Text)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Term</span> is a predicate name. <span class="var">Text</span> is a source C code that define the predicate <span class="var">Term</span>. <span class="var">Term</span> is present for future use with the analyzers. Example of this can be viewed in the hrtimer library.<LI><em>The following properties hold at call time:</em><br/><span class="on_right"> (basic_props:predname/1)</span><span><span class="var">Term</span> is a Name/Arity structure denoting a predicate name: <pre>predname(P/A) :-
        atm(P),
        nnegint(A).
</pre>
</span><br/><span class="on_right"> (basic_props:string/1)</span><span><span class="var">Text</span> is a string (a list of character codes).
</span>
</ul></div></div><p>
</div><div id="Known bugs and planned improvements"><h2>Known bugs and planned improvements</h2><ul><LI>The <tt>size_of/3</tt> property has an empty definition<LI>The <tt>byte/1</tt> property has an empty definition. A possible right definition is commented.</ul></div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Module Sections</h2><ul><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Documentation on exports">Documentation on exports</a><LI><a href="#Documentation on internals">Documentation on internals</a><LI><a href="#Known bugs and planned improvements">Known bugs and planned improvements</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="foreign_interface_doc.html">&#x25C4;</a><a class="navbutton" href="foreign_compilation.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>