<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>Unit Testing Library &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="rtchecks_doc.html">&#x25C4;</a><a class="navbutton" href="MiscProlog.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="AnnotatedProlog.html">PART V - Assertions, Properties, Types, Modes, Comments (assertions)</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>Unit Testing Library</h1><a class="idx_anchor" href="ciaoliindex.html#unittest"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Edison Mera" href="ciaoauindex.html#Edison Mera">Edison Mera</a>.<p>
This library provides an extension of the Ciao assertion language which allows writing <a class="idx_anchor" id="0" href="ciaocoindex.html#unit tests"><em>unit tests</em></a>. The central idea is to use the assertion language to provide specifications of test cases for a given predicate. The package also provides some special properties that are convenient when specifying unit tests and the required run-time libraries.<p>In general, a <a class="idx_anchor" id="1" href="ciaocoindex.html#test assertion"><em>test assertion</em></a> is written as follows:<p><pre>:- test predicate(A1, A2, ..., An) 
   :  &lt;Precondition&gt;
   =&gt; &lt;Postcondition&gt;
   +  &lt;Global properties&gt;
   #  &lt;Comment&gt;.
</pre> <p>Where the fields of the test assertion have the usual meaning in Ciao assertions, i.e., they contain conjunctions of properties which must hold at certain points in the execution. Here we give a somewhat more operational (&ldquo;test oriented&rdquo;), reading to these fields: <a class="idx_anchor" id="2" href="ciaoglindex.html#predicate/n"><tt>predicate/n</tt></a> is the predicate to be tested. <span class="var">Precondition</span> is a goal that is called before the predicate being tested, and can be used to generate values of the input parameters. <span class="var">Postcondition</span> is a goal that should succeed after <a class="idx_anchor" id="3" href="ciaoglindex.html#predicate/n"><tt>predicate/n</tt></a> has been called. The idea appears to be simple, but note that due to the non-determinism of logic programs, the test engine needs to test all the solutions that can be tested up to given limits (for example, a maximum number of solutions, or a given time-out). <span class="var">Properties</span> specifies some global properties that the predicate should meet, for example, <a class="idx_anchor" id="4" href="ciaoglindex.html#not_fails"><tt>not_fails</tt></a> means that the program does not fail, <a class="idx_anchor" id="5" href="ciaoglindex.html#exception(error(a,b))"><tt>exception(error(a,b))</tt></a> means that the program should throw the exception <a class="idx_anchor" id="6" href="ciaoglindex.html#error(a,b)"><tt>error(a,b)</tt></a>, and so on. But there are some specific properties that only applies to testing specified in the module unittest_props.pl, for example <a class="idx_anchor" id="7" href="ciaoglindex.html#times(N)"><tt>times(N)</tt></a> specifies that the given test should be executed N times, <a class="idx_anchor" id="8" href="ciaoglindex.html#try_sols(N)"><tt>try_sols(N)</tt></a> specifies that the first N solutions of the predicate <a class="idx_anchor" id="9" href="ciaoglindex.html#predicate/n"><tt>predicate/n</tt></a> are tested. <span class="var">Comment</span> is a string that document the test.<p>A convenient way to run these tests is by selecting options in the CiaoDbg menu within the development environment: <a class="idx_anchor" id="10" href="ciaocoindex.html#running unit tests"></a> <p><ol> <p><LI><tt>Run tests in current module</tt>: execute only the tests specified in the current module.<p><LI><tt>Run tests in all related modules</tt>: execute the tests specified in the module and in all the modules being used by this.<p><LI><tt>Show untested predicates</tt>: show the <em>exported</em> predicates that do not have any test assertion.<p></ol> <p><div id="Additional notes"><h2>Additional notes</h2> <p><ol> <p><LI>The test assertions allow performing <em>unit</em> testing, i.e., in Ciao, performing tests <em>at the predicate level</em>.<p><LI>The tests currently can only be applied to exported predicates.<p><p><LI>If you need to write tests for predicates that are spread over several modules, but work together, then it is best to create a separate module, and reexport to the predicates required to build the test. This allows performing <em>integration testing</em>, using the same syntax of the unit tests.<p><LI>The Ciao system includes a good (and growing) number of unit tests. To run all the tests among the other standard tests within the CiaoDE run the following (at the top level of the source tree):<p><pre>./ciaosetup runtests
</pre> <p></ol> <p></div><br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/><tt>:- use_module(library(unittest)).</tt></ul></div></div><div id="Known bugs and planned improvements"><h2>Known bugs and planned improvements</h2><ul><LI>load_compilation_module, load_test_module and load_resource_module directives have similar behavior</ul></div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Module Sections</h2><ul><LI><a href="#Additional notes">Additional notes</a><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Known bugs and planned improvements">Known bugs and planned improvements</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="rtchecks_doc.html">&#x25C4;</a><a class="navbutton" href="MiscProlog.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>