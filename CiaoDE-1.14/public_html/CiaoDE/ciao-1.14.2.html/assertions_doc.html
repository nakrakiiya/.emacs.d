<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>The Ciao assertion package &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="AnnotatedProlog.html">&#x25C4;</a><a class="navbutton" href="assertions_props.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="AnnotatedProlog.html">PART V - Assertions, Properties, Types, Modes, Comments (assertions)</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>The Ciao assertion package</h1><a class="idx_anchor" href="ciaoliindex.html#assertions"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Manuel Hermenegildo" href="ciaoauindex.html#Manuel Hermenegildo">Manuel Hermenegildo</a>, <a class="idx_anchor" id="Francisco Bueno" href="ciaoauindex.html#Francisco Bueno">Francisco Bueno</a>, <a class="idx_anchor" id="German Puebla" href="ciaoauindex.html#German Puebla">German Puebla</a>.<p>
The <a class="idx_anchor" id="0" href="ciaoglindex.html#assertions"><tt>assertions</tt></a> package adds a number of new declaration definitions and new operator definitions which allow including <a class="idx_anchor" id="1" href="ciaoglindex.html#program assertions">program assertions</a> in user programs. Such assertions can be used to describe predicates, properties, modules, applications, etc. These descriptions can contain formal specifications (such as sets of preconditions, post-conditions, or descriptions of computations) as well as machine-readable textual comments.<p>This module is part of the <a class="idx_anchor" id="2" href="ciaoglindex.html#assertions"><tt>assertions</tt></a> library. It defines the basic code-related assertions, i.e., those intended to be used mainly by compilation-related tools, such as the static analyzer or the run-time test generator.<p>Giving <a class="idx_anchor" id="3" href="ciaoglindex.html#specifications">specifications</a> for predicates and other program elements is the main functionality documented here. The exact syntax of comments <a class="idx_anchor" id="4" href="ciaocoindex.html#comments, machine readable"></a> is described in the autodocumenter (<a class="idx_anchor" id="5" href="ciaoglindex.html#lpdoc"><tt>lpdoc</tt></a> [<a href="ciaorefs.html#knuth-lit">Knu84</a>,<a href="ciaorefs.html#lpdoc-tr">Her99</a>]) manual, although some support for adding machine-readable comments in assertions is also mentioned here.<p>There are two kinds of assertions: predicate assertions and program point assertions. All predicate assertions are currently placed as directives in the source code, i.e., preceded by &ldquo;<tt>:-</tt>&rdquo;. Program point assertions are placed as goals in clause bodies.<p><div id="More info"><h2>More info</h2> <p>The facilities provided by the library are documented in the description of its component modules. This documentation is intended to provide information only at a &ldquo;reference manual&rdquo; level. For a more tutorial introduction to the subject and some more examples please see [<a href="ciaorefs.html#assert-lang-disciplbook">PBH00</a>]. The assertion language implemented in this library is modeled after this design document, although, due to implementation issues, it may differ in some details. The purpose of this manual is to document precisely what the implementation of the library supports at any given point in time.<p></div><div id="Some attention points"><h2>Some attention points</h2> <p><ul> <p><LI><strong>Formatting commands within text strings:</strong> <a class="idx_anchor" id="6" href="ciaocoindex.html#formatting commands"></a> many of the predicates defined in these modules include arguments intended for providing textual information. This includes titles, descriptions, comments, etc. The type of this argument is a character string. In order for the automatic generation of documentation to work correctly, this <a class="idx_anchor" id="7" href="ciaoglindex.html#character string">character string</a> should adhere to certain conventions. See the description of the <a class="idx_anchor" id="8" href="ciaoglindex.html#docstring/1"><tt>docstring/1</tt></a> type/grammar for details.<p><LI><strong>Referring to variables:</strong> In order for the automatic documentation system to work correctly, <a class="idx_anchor" id="9" href="ciaoglindex.html#variable names">variable names</a> (for example, when referring to arguments in the head patterns of <em>pred</em> declarations) must be surrounded by an <tt>@var</tt> command. For example, <tt>@var{VariableName}</tt> should be used for referring to the variable &ldquo;VariableName&rdquo;, which will appear then formatted as follows: <span class="var">VariableName</span>. See the description of the <a class="idx_anchor" id="10" href="ciaoglindex.html#docstring/1"><tt>docstring/1</tt></a> type/grammar for details.<p></ul> <p></div><br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/>The recommended procedure in order to make use of assertions in user programs is to include the <a class="idx_anchor" id="11" href="ciaoglindex.html#assertions"><tt>assertions</tt></a> syntax library, using one of the following declarations, as appropriate:<p><pre>   :- module(...,...,[assertions]).
   :- use_package([assertions]).
</pre> <LI><strong>Exports:</strong><br/><ul class="itemize_minus"><LI><em>Predicates:</em><br/><a class="idx_anchor" id="12" href="ciaoglindex.html#check/1"><tt>check/1</tt></a>, <a class="idx_anchor" id="13" href="ciaoglindex.html#trust/1"><tt>trust/1</tt></a>, <a class="idx_anchor" id="14" href="ciaoglindex.html#true/1"><tt>true/1</tt></a>, <a class="idx_anchor" id="15" href="ciaoglindex.html#false/1"><tt>false/1</tt></a>.
</ul><LI><strong>New operators defined:</strong><br/><a class="idx_anchor" id="16" href="ciaoglindex.html#=&gt;/2"><tt>=&gt;/2</tt></a> [975,xfx], <a class="idx_anchor" id="17" href="ciaoglindex.html#::/2"><tt>::/2</tt></a> [978,xfx], <a class="idx_anchor" id="18" href="ciaoglindex.html#decl/1"><tt>decl/1</tt></a> [1150,fx], <a class="idx_anchor" id="19" href="ciaoglindex.html#decl/2"><tt>decl/2</tt></a> [1150,xfx], <a class="idx_anchor" id="20" href="ciaoglindex.html#pred/1"><tt>pred/1</tt></a> [1150,fx], <a class="idx_anchor" id="21" href="ciaoglindex.html#pred/2"><tt>pred/2</tt></a> [1150,xfx], <a class="idx_anchor" id="22" href="ciaoglindex.html#prop/1"><tt>prop/1</tt></a> [1150,fx], <a class="idx_anchor" id="23" href="ciaoglindex.html#prop/2"><tt>prop/2</tt></a> [1150,xfx], <a class="idx_anchor" id="24" href="ciaoglindex.html#modedef/1"><tt>modedef/1</tt></a> [1150,fx], <a class="idx_anchor" id="25" href="ciaoglindex.html#calls/1"><tt>calls/1</tt></a> [1150,fx], <a class="idx_anchor" id="26" href="ciaoglindex.html#calls/2"><tt>calls/2</tt></a> [1150,xfx], <a class="idx_anchor" id="27" href="ciaoglindex.html#success/1"><tt>success/1</tt></a> [1150,fx], <a class="idx_anchor" id="28" href="ciaoglindex.html#success/2"><tt>success/2</tt></a> [1150,xfx], <a class="idx_anchor" id="29" href="ciaoglindex.html#test/1"><tt>test/1</tt></a> [1150,fx], <a class="idx_anchor" id="30" href="ciaoglindex.html#test/2"><tt>test/2</tt></a> [1150,xfx], <a class="idx_anchor" id="31" href="ciaoglindex.html#texec/1"><tt>texec/1</tt></a> [1150,fx], <a class="idx_anchor" id="32" href="ciaoglindex.html#texec/2"><tt>texec/2</tt></a> [1150,xfx], <a class="idx_anchor" id="33" href="ciaoglindex.html#comp/1"><tt>comp/1</tt></a> [1150,fx], <a class="idx_anchor" id="34" href="ciaoglindex.html#comp/2"><tt>comp/2</tt></a> [1150,xfx], <a class="idx_anchor" id="35" href="ciaoglindex.html#entry/1"><tt>entry/1</tt></a> [1150,fx], <a class="idx_anchor" id="36" href="ciaoglindex.html#exit/1"><tt>exit/1</tt></a> [1150,fx], <a class="idx_anchor" id="37" href="ciaoglindex.html#exit/2"><tt>exit/2</tt></a> [1150,xfx].
<LI><strong>New declarations defined:</strong><br/><a class="idx_anchor" id="38" href="ciaoglindex.html#pred/1"><tt>pred/1</tt></a>, <a class="idx_anchor" id="39" href="ciaoglindex.html#pred/2"><tt>pred/2</tt></a>, <a class="idx_anchor" id="40" href="ciaoglindex.html#texec/1"><tt>texec/1</tt></a>, <a class="idx_anchor" id="41" href="ciaoglindex.html#texec/2"><tt>texec/2</tt></a>, <a class="idx_anchor" id="42" href="ciaoglindex.html#calls/1"><tt>calls/1</tt></a>, <a class="idx_anchor" id="43" href="ciaoglindex.html#calls/2"><tt>calls/2</tt></a>, <a class="idx_anchor" id="44" href="ciaoglindex.html#success/1"><tt>success/1</tt></a>, <a class="idx_anchor" id="45" href="ciaoglindex.html#success/2"><tt>success/2</tt></a>, <a class="idx_anchor" id="46" href="ciaoglindex.html#test/1"><tt>test/1</tt></a>, <a class="idx_anchor" id="47" href="ciaoglindex.html#test/2"><tt>test/2</tt></a>, <a class="idx_anchor" id="48" href="ciaoglindex.html#comp/1"><tt>comp/1</tt></a>, <a class="idx_anchor" id="49" href="ciaoglindex.html#comp/2"><tt>comp/2</tt></a>, <a class="idx_anchor" id="50" href="ciaoglindex.html#prop/1"><tt>prop/1</tt></a>, <a class="idx_anchor" id="51" href="ciaoglindex.html#prop/2"><tt>prop/2</tt></a>, <a class="idx_anchor" id="52" href="ciaoglindex.html#entry/1"><tt>entry/1</tt></a>, <a class="idx_anchor" id="53" href="ciaoglindex.html#exit/1"><tt>exit/1</tt></a>, <a class="idx_anchor" id="54" href="ciaoglindex.html#exit/2"><tt>exit/2</tt></a>, <a class="idx_anchor" id="55" href="ciaoglindex.html#modedef/1"><tt>modedef/1</tt></a>, <a class="idx_anchor" id="56" href="ciaoglindex.html#decl/1"><tt>decl/1</tt></a>, <a class="idx_anchor" id="57" href="ciaoglindex.html#decl/2"><tt>decl/2</tt></a>, <a class="idx_anchor" id="58" href="ciaoglindex.html#doc/2"><tt>doc/2</tt></a>, <a class="idx_anchor" id="59" href="ciaoglindex.html#comment/2"><tt>comment/2</tt></a>.
<LI><strong>Other modules used:</strong><br/><ul class="itemize_minus"><LI><em>System library modules:</em><br/><a class="idx_anchor" id="60" href="ciaoglindex.html#assertions/assertions_props"><tt>assertions/assertions_props</tt></a>.
</ul></ul></div></div><div id="Documentation on new declarations"><h2>Documentation on new declarations</h2><div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="pred/1" href="ciaodeindex.html#pred/1">pred/1</a>:</div><div class="deftext"><a class="idx_anchor" id="61" href="ciaocoindex.html#pred assertion"></a> This assertion provides information on a predicate. The body of the assertion (its only argument) contains properties or comments in the formats defined by <a class="idx_anchor" id="62" href="ciaoglindex.html#assrt_body/1"><tt>assrt_body/1</tt></a>.<p>More than one of these assertions may appear per predicate, in which case each one represents a possible &ldquo;<a class="idx_anchor" id="63" href="ciaoglindex.html#mode">mode</a>&rdquo; of use (<a class="idx_anchor" id="64" href="ciaoglindex.html#usage">usage</a>) of the predicate. The exact scope of the usage is defined by the properties given for calls in the body of each assertion (which should thus distinguish the different usages intended). All of them together cover all possible modes of usage.<p>For example, the following assertions describe (all the and the only) modes of usage of predicate <tt>length/2</tt> (see <a class="idx_anchor" id="65" href="ciaoglindex.html#lists"><tt>lists</tt></a>): <pre>:- pred length(L,N) : list * var =&gt; list * integer
	# &quot;Computes the length of <span class="var">L</span>.&quot;.
:- pred length(L,N) : var * integer =&gt; list * integer
	# &quot;Outputs <span class="var">L</span> of length <span class="var">N</span>.&quot;.
:- pred length(L,N) : list * integer =&gt; list * integer
	# &quot;Checks that <span class="var">L</span> is of length <span class="var">N</span>.&quot;.
     </pre> <p><strong>Usage:</strong> :- <tt>pred AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:assrt_body/1)</span><span><span class="var">AssertionBody</span> is an assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="pred/2" href="ciaodeindex.html#pred/2">pred/2</a>:</div><div class="deftext"><a class="idx_anchor" id="66" href="ciaocoindex.html#pred assertion"></a> This assertion is similar to a <a class="idx_anchor" id="67" href="ciaoglindex.html#pred/1"><tt>pred/1</tt></a> assertion but it is explicitely qualified. Non-qualified <a class="idx_anchor" id="68" href="ciaoglindex.html#pred/1"><tt>pred/1</tt></a> assertions are assumed the qualifier <tt>check</tt>. <p><strong>Usage:</strong> :- <tt>AssertionStatus pred AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:assrt_status/1)</span><span><span class="var">AssertionStatus</span> is an acceptable status for an assertion.
</span><br/><span class="on_right"> (assertions_props:assrt_body/1)</span><span><span class="var">AssertionBody</span> is an assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="texec/1" href="ciaodeindex.html#texec/1">texec/1</a>:</div><div class="deftext"><a class="idx_anchor" id="69" href="ciaocoindex.html#texec assertion"></a> This assertion is similar to a <a class="idx_anchor" id="70" href="ciaoglindex.html#calls/1"><tt>calls/1</tt></a> assertion but it is used to provide input data and execution commands to the unit-test driver. <p><strong>Usage:</strong> :- <tt>texec AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:c_assrt_body/1)</span><span><span class="var">AssertionBody</span> is a call assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="texec/2" href="ciaodeindex.html#texec/2">texec/2</a>:</div><div class="deftext"><a class="idx_anchor" id="71" href="ciaocoindex.html#texec assertion"></a> This assertion is similar to a <a class="idx_anchor" id="72" href="ciaoglindex.html#texec/1"><tt>texec/1</tt></a> assertion but it is explicitely qualified with an <a class="idx_anchor" id="73" href="ciaoglindex.html#assertion status">assertion status</a>. Non-qualified <a class="idx_anchor" id="74" href="ciaoglindex.html#texec/1"><tt>texec/1</tt></a> assertions are assumed to have <tt>check</tt> status. <p><strong>Usage:</strong> :- <tt>AssertionStatus texec AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:assrt_status/1)</span><span><span class="var">AssertionStatus</span> is an acceptable status for an assertion.
</span><br/><span class="on_right"> (assertions_props:c_assrt_body/1)</span><span><span class="var">AssertionBody</span> is a call assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="calls/1" href="ciaodeindex.html#calls/1">calls/1</a>:</div><div class="deftext"><a class="idx_anchor" id="75" href="ciaocoindex.html#calls assertion"></a> This assertion is similar to a <a class="idx_anchor" id="76" href="ciaoglindex.html#pred/1"><tt>pred/1</tt></a> assertion but it only provides information about the calls to a predicate. If one or several calls assertions are given they are understood to describe all possible calls to the predicate.<p>For example, the following assertion describes all possible calls to predicate <tt>is/2</tt> (see <a class="idx_anchor" id="77" href="ciaoglindex.html#arithmetic"><tt>arithmetic</tt></a>): <pre>:- calls is(term,arithexpression).
     </pre> <p><strong>Usage:</strong> :- <tt>calls AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:c_assrt_body/1)</span><span><span class="var">AssertionBody</span> is a call assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="calls/2" href="ciaodeindex.html#calls/2">calls/2</a>:</div><div class="deftext"><a class="idx_anchor" id="78" href="ciaocoindex.html#calls assertion"></a> This assertion is similar to a <a class="idx_anchor" id="79" href="ciaoglindex.html#calls/1"><tt>calls/1</tt></a> assertion but it is explicitely qualified with an <a class="idx_anchor" id="80" href="ciaoglindex.html#assertion status">assertion status</a>. Non-qualified <a class="idx_anchor" id="81" href="ciaoglindex.html#calls/1"><tt>calls/1</tt></a> assertions are assumed to have <tt>check</tt> status. <p><strong>Usage:</strong> :- <tt>AssertionStatus calls AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:assrt_status/1)</span><span><span class="var">AssertionStatus</span> is an acceptable status for an assertion.
</span><br/><span class="on_right"> (assertions_props:c_assrt_body/1)</span><span><span class="var">AssertionBody</span> is a call assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="success/1" href="ciaodeindex.html#success/1">success/1</a>:</div><div class="deftext"><a class="idx_anchor" id="82" href="ciaocoindex.html#success assertion"></a> This assertion is similar to a <a class="idx_anchor" id="83" href="ciaoglindex.html#pred/1"><tt>pred/1</tt></a> assertion but it only provides information about the answers to a predicate. The described answers might be conditioned to a particular way of calling the predicate.<p>For example, the following assertion specifies the answers of the <tt>length/2</tt> predicate <em>if</em> it is called as in the first mode of usage above (note that the previous pred assertion already conveys such information, however it also compelled the predicate calls, while the success assertion does not): <pre>:- success length(L,N) : list * var =&gt; list * integer.
     </pre> <p><strong>Usage:</strong> :- <tt>success AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:s_assrt_body/1)</span><span><span class="var">AssertionBody</span> is a predicate assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="success/2" href="ciaodeindex.html#success/2">success/2</a>:</div><div class="deftext"><a class="idx_anchor" id="84" href="ciaoglindex.html#success assertion">success assertion</a> This assertion is similar to a <a class="idx_anchor" id="85" href="ciaoglindex.html#success/1"><tt>success/1</tt></a> assertion but it is explicitely qualified with an <a class="idx_anchor" id="86" href="ciaoglindex.html#assertion status">assertion status</a>. The status of non-qualified <a class="idx_anchor" id="87" href="ciaoglindex.html#success/1"><tt>success/1</tt></a> assertions is assumed to be <tt>check</tt>. <p><strong>Usage:</strong> :- <tt>AssertionStatus success AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:assrt_status/1)</span><span><span class="var">AssertionStatus</span> is an acceptable status for an assertion.
</span><br/><span class="on_right"> (assertions_props:s_assrt_body/1)</span><span><span class="var">AssertionBody</span> is a predicate assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="test/1" href="ciaodeindex.html#test/1">test/1</a>:</div><div class="deftext"><a class="idx_anchor" id="88" href="ciaocoindex.html#test assertion"></a> This assertion is similar to a success assertion but it specifies a concrete test case to be run in order verify (partially) that the predicate is working as expected. For example, the following test will verify that the length predicate works well for the particular list given: <pre>:- test length(L,N) : ( L = [1,2,5,2] ) =&gt; ( N = 4 ).
   </pre> <p><strong>Usage:</strong> :- <tt>test AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:s_assrt_body/1)</span><span><span class="var">AssertionBody</span> is a predicate assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="test/2" href="ciaodeindex.html#test/2">test/2</a>:</div><div class="deftext"><a class="idx_anchor" id="89" href="ciaocoindex.html#test assertion"></a> This assertion is similar to a <a class="idx_anchor" id="90" href="ciaoglindex.html#test/1"><tt>test/1</tt></a> assertion but it is explicitely qualified with an <a class="idx_anchor" id="91" href="ciaoglindex.html#assertion status">assertion status</a>. Non-qualified <a class="idx_anchor" id="92" href="ciaoglindex.html#test/1"><tt>test/1</tt></a> assertions are assumed to have <tt>check</tt> status. In this context, check means that the test should be executed when the developer runs the test battery.<p><p><strong>Usage:</strong> :- <tt>AssertionStatus test AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:assrt_status/1)</span><span><span class="var">AssertionStatus</span> is an acceptable status for an assertion.
</span><br/><span class="on_right"> (assertions_props:s_assrt_body/1)</span><span><span class="var">AssertionBody</span> is a predicate assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="comp/1" href="ciaodeindex.html#comp/1">comp/1</a>:</div><div class="deftext"><a class="idx_anchor" id="93" href="ciaocoindex.html#comp assertion"></a> This assertion is similar to a <a class="idx_anchor" id="94" href="ciaoglindex.html#pred/1"><tt>pred/1</tt></a> assertion but it only provides information about the global execution properties of a predicate (note that such kind of information is also conveyed by pred assertions). The described properties might be conditioned to a particular way of calling the predicate.<p>For example, the following assertion specifies that the computation of <tt>append/3</tt> (see <a class="idx_anchor" id="95" href="ciaoglindex.html#lists"><tt>lists</tt></a>) will not fail <em>if</em> it is called as described (but does not compel the predicate to be called that way): <pre>:- comp append(Xs,Ys,Zs) : var * var * var + not_fail.
     </pre> <p><strong>Usage:</strong> :- <tt>comp AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:g_assrt_body/1)</span><span><span class="var">AssertionBody</span> is a comp assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="comp/2" href="ciaodeindex.html#comp/2">comp/2</a>:</div><div class="deftext"><a class="idx_anchor" id="96" href="ciaocoindex.html#comp assertion"></a> This assertion is similar to a <a class="idx_anchor" id="97" href="ciaoglindex.html#comp/1"><tt>comp/1</tt></a> assertion but it is explicitely qualified. Non-qualified <a class="idx_anchor" id="98" href="ciaoglindex.html#comp/1"><tt>comp/1</tt></a> assertions are assumed the qualifier <tt>check</tt>. <p><strong>Usage:</strong> :- <tt>AssertionStatus comp AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:assrt_status/1)</span><span><span class="var">AssertionStatus</span> is an acceptable status for an assertion.
</span><br/><span class="on_right"> (assertions_props:g_assrt_body/1)</span><span><span class="var">AssertionBody</span> is a comp assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="prop/1" href="ciaodeindex.html#prop/1">prop/1</a>:</div><div class="deftext"><a class="idx_anchor" id="99" href="ciaocoindex.html#prop assertion"></a> This assertion is similar to a <tt>pred/1</tt> assertion but it flags that the predicate being documented is also a &ldquo;<a class="idx_anchor" id="100" href="ciaoglindex.html#property">property</a>.&rdquo;<p>Properties are standard predicates, but which are <em>guaranteed to terminate for any possible instantiation state of their argument(s)</em>, do not perform side-effects which may interfere with the program behaviour, and do not further instantiate their arguments or add new constraints.<p>Provided the above holds, properties can thus be safely used as <a class="idx_anchor" id="101" href="ciaoglindex.html#run-time checks">run-time checks</a>. The program transformation used in <tt>ciaopp</tt> for run-time checking guarantees the third requirement. It also performs some basic checks on properties which in most cases are enough for the second requirement. However, it is the user&apos;s responsibility to guarantee termination of the properties defined. (See also <a href="regtypes_doc.html">Declaring regular types</a> for some considerations applicable to writing properties.)<p>The set of properties is thus a strict subset of the set of predicates. Note that properties can be used to describe characteristics of arguments in assertions and they can also be executed (called) as any other predicates. <p><strong>Usage:</strong> :- <tt>prop AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:assrt_body/1)</span><span><span class="var">AssertionBody</span> is an assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="prop/2" href="ciaodeindex.html#prop/2">prop/2</a>:</div><div class="deftext"><a class="idx_anchor" id="102" href="ciaocoindex.html#prop assertion"></a> This assertion is similar to a <a class="idx_anchor" id="103" href="ciaoglindex.html#prop/1"><tt>prop/1</tt></a> assertion but it is explicitely qualified. Non-qualified <a class="idx_anchor" id="104" href="ciaoglindex.html#prop/1"><tt>prop/1</tt></a> assertions are assumed the qualifier <tt>check</tt>. <p><strong>Usage:</strong> :- <tt>AssertionStatus prop AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:assrt_status/1)</span><span><span class="var">AssertionStatus</span> is an acceptable status for an assertion.
</span><br/><span class="on_right"> (assertions_props:assrt_body/1)</span><span><span class="var">AssertionBody</span> is an assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="entry/1" href="ciaodeindex.html#entry/1">entry/1</a>:</div><div class="deftext"><a class="idx_anchor" id="105" href="ciaocoindex.html#entry assertion"></a> This assertion provides information about the <em>external</em> calls to a predicate. It is identical syntactically to a <a class="idx_anchor" id="106" href="ciaoglindex.html#calls/1"><tt>calls/1</tt></a> assertion. However, they describe only external calls, i.e., calls to the exported predicates of a module from outside the module, or calls to the predicates in a non-modular file from other files (or the user).<p>These assertions are <em>trusted</em> by the compiler. As a result, if their descriptions are erroneous they can introduce bugs in programs. Thus, <a class="idx_anchor" id="107" href="ciaoglindex.html#entry/1"><tt>entry/1</tt></a> assertions should be written with care.<p>An important use of these assertions is in <a class="idx_anchor" id="108" href="ciaoglindex.html#providing information to the compiler">providing information to the compiler</a> which it may not be able to infer from the program. The main use is in providing information on the ways in which exported predicates of a module will be called from outside the module. This will greatly improve the precision of the analyzer, which otherwise has to assume that the arguments that exported predicates receive are any arbitrary term. <p><strong>Usage:</strong> :- <tt>entry AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:c_assrt_body/1)</span><span><span class="var">AssertionBody</span> is a call assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="exit/1" href="ciaodeindex.html#exit/1">exit/1</a>:</div><div class="deftext"><a class="idx_anchor" id="109" href="ciaocoindex.html#exit assertion"></a> This type of assertion provides information about the answers that an (exported) predicate provides for <em>external</em> calls. It is identical syntactically to a <a class="idx_anchor" id="110" href="ciaoglindex.html#success/1"><tt>success/1</tt></a> assertion. However, it describes only external answers, i.e., answers to the exported predicates of a module from outside the module, or answers to the predicates in a non-modular file from other files (or the user). The described answers may be conditioned to a particular way of calling the predicate. E.g.:<p><pre>:- exit length(L,N) : list * var =&gt; list * integer.
     </pre> <p><strong>Usage:</strong> :- <tt>exit AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:s_assrt_body/1)</span><span><span class="var">AssertionBody</span> is a predicate assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="exit/2" href="ciaodeindex.html#exit/2">exit/2</a>:</div><div class="deftext"><a class="idx_anchor" id="111" href="ciaoglindex.html#exit assertion">exit assertion</a> This assertion is similar to an <a class="idx_anchor" id="112" href="ciaoglindex.html#exit/1"><tt>exit/1</tt></a> assertion but it is explicitely qualified with an <a class="idx_anchor" id="113" href="ciaoglindex.html#assertion status">assertion status</a>. Non-qualified <a class="idx_anchor" id="114" href="ciaoglindex.html#exit/1"><tt>exit/1</tt></a> assertions are assumed the qualifier <tt>check</tt>. <p><strong>Usage:</strong> :- <tt>AssertionStatus exit AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:assrt_status/1)</span><span><span class="var">AssertionStatus</span> is an acceptable status for an assertion.
</span><br/><span class="on_right"> (assertions_props:s_assrt_body/1)</span><span><span class="var">AssertionBody</span> is a predicate assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="modedef/1" href="ciaodeindex.html#modedef/1">modedef/1</a>:</div><div class="deftext">This assertion is used to define modes. A mode defines in a compact way a set of call and success properties. Once defined, modes can be applied to predicate arguments in assertions. The meaning of this application is that the call and success properties defined by the mode hold for the argument to which the mode is applied. Thus, a mode is conceptually a &ldquo;property macro&rdquo;.<p>The syntax of mode definitions is similar to that of pred declarations. For example, the following set of assertions:<p><pre>:- modedef +A : nonvar(A) # &quot;<span class="var">A</span> is bound upon predicate entry.&quot;.

:- pred p(+A,B) : integer(A) =&gt;  ground(B).
</pre> <p>is equivalent to:<p><pre>:- pred p(A,B) : (nonvar(A),integer(A)) =&gt;  ground(B)
   # &quot;<span class="var">A</span> is bound upon predicate entry.&quot;.
</pre> <p><strong>Usage:</strong> :- <tt>modedef AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:assrt_body/1)</span><span><span class="var">AssertionBody</span> is an assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="decl/1" href="ciaodeindex.html#decl/1">decl/1</a>:</div><div class="deftext"><a class="idx_anchor" id="115" href="ciaocoindex.html#decl assertion"></a> This assertion is similar to a <a class="idx_anchor" id="116" href="ciaoglindex.html#pred/1"><tt>pred/1</tt></a> assertion but it is used for declarations instead than for predicates. <p><strong>Usage:</strong> :- <tt>decl AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:assrt_body/1)</span><span><span class="var">AssertionBody</span> is an assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="decl/2" href="ciaodeindex.html#decl/2">decl/2</a>:</div><div class="deftext"><a class="idx_anchor" id="117" href="ciaocoindex.html#decl assertion"></a> This assertion is similar to a <a class="idx_anchor" id="118" href="ciaoglindex.html#decl/1"><tt>decl/1</tt></a> assertion but it is explicitely qualified. Non-qualified <a class="idx_anchor" id="119" href="ciaoglindex.html#decl/1"><tt>decl/1</tt></a> assertions are assumed the qualifier <tt>check</tt>. <p><strong>Usage:</strong> :- <tt>AssertionStatus decl AssertionBody</tt>.
<ul class="itemize_minus"><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:assrt_status/1)</span><span><span class="var">AssertionStatus</span> is an acceptable status for an assertion.
</span><br/><span class="on_right"> (assertions_props:assrt_body/1)</span><span><span class="var">AssertionBody</span> is an assertion body.
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="doc/2" href="ciaodeindex.html#doc/2">doc/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>doc(Pred,Comment)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> Documentation <a class="idx_anchor" id="120" href="ciaocoindex.html#comment assertion"></a>. This assertion provides a text <span class="var">Comment</span> for a given predicate <span class="var">Pred</span>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:head_pattern/1)</span><span><span class="var">Pred</span> is a head pattern.
</span><br/><span class="on_right"> (assertions_props:docstring/1)</span><span><span class="var">Comment</span> is a text comment with admissible documentation commands. The usual formatting commands that are applicable in comment strings are defined by <a class="idx_anchor" id="121" href="ciaoglindex.html#stringcommand/1"><tt>stringcommand/1</tt></a>. See the <a class="idx_anchor" id="122" href="ciaoglindex.html#lpdoc"><tt>lpdoc</tt></a> manual for documentation on comments. 
</span>
</ul></div></div><p>
<div><span class="on_right">DECLARATION</span><div class="defname"><a class="idx_anchor" id="comment/2" href="ciaodeindex.html#comment/2">comment/2</a>:</div><div class="deftext"><p><strong>Usage:</strong> :- <tt>comment(Pred,Comment)</tt>.
<ul class="itemize_minus"><LI><em>Description:</em> An alias for <a class="idx_anchor" id="123" href="ciaoglindex.html#doc/2"><tt>doc/2</tt></a> (deprecated, for compatibility with older versions).<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:head_pattern/1)</span><span><span class="var">Pred</span> is a head pattern.
</span><br/><span class="on_right"> (assertions_props:docstring/1)</span><span><span class="var">Comment</span> is a text comment with admissible documentation commands. The usual formatting commands that are applicable in comment strings are defined by <a class="idx_anchor" id="124" href="ciaoglindex.html#stringcommand/1"><tt>stringcommand/1</tt></a>. See the <a class="idx_anchor" id="125" href="ciaoglindex.html#lpdoc"><tt>lpdoc</tt></a> manual for documentation on comments. 
</span>
</ul></div></div><p>
</div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="check/1" href="ciaopdindex.html#check/1">check/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>check(PropertyConjunction)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <a class="idx_anchor" id="126" href="ciaocoindex.html#check assertion"></a> This assertion provides information on a clause program point (position in the body of a clause). Calls to a <a class="idx_anchor" id="127" href="ciaoglindex.html#check/1"><tt>check/1</tt></a> assertion can appear in the body of a clause in any place where a literal can normally appear. The property defined by <span class="var">PropertyConjunction</span> should hold in all the run-time stores corresponding to that program point. See also <a href="rtchecks_doc.html">Run-time checking of assertions</a>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:property_conjunction/1)</span><span><span class="var">PropertyConjunction</span> is either a term or a <em>conjunction</em> of terms. The main functor and arity of each of those terms corresponds to the definition of a property. The first argument of each such term is a variable which appears as a head argument.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="trust/1" href="ciaopdindex.html#trust/1">trust/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>trust(PropertyConjunction)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <a class="idx_anchor" id="128" href="ciaocoindex.html#trust assertion"></a> This assertion also provides information on a clause program point. It is identical syntactically to a <a class="idx_anchor" id="129" href="ciaoglindex.html#check/1"><tt>check/1</tt></a> assertion. However, the properties stated are not taken as something to be checked but are instead <em>trusted</em> by the compiler. While the compiler may in some cases detect an inconsistency between a <a class="idx_anchor" id="130" href="ciaoglindex.html#trust/1"><tt>trust/1</tt></a> assertion and the program, in all other cases the information given in the assertion will be taken to be true. As a result, if these assertions are erroneous they can introduce bugs in programs. Thus, <a class="idx_anchor" id="131" href="ciaoglindex.html#trust/1"><tt>trust/1</tt></a> assertions should be written with care.<p>An important use of these assertions is in <a class="idx_anchor" id="132" href="ciaoglindex.html#providing information to the compiler">providing information to the compiler</a> which it may not be able to infer from the program (either because the information is not present or because the analyzer being used is not precise enough). In particular, providing information on external predicates which may not be accessible at the time of compiling the module can greatly improve the precision of the analyzer. This can be easily done with trust assertion. <LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:property_conjunction/1)</span><span><span class="var">PropertyConjunction</span> is either a term or a <em>conjunction</em> of terms. The main functor and arity of each of those terms corresponds to the definition of a property. The first argument of each such term is a variable which appears as a head argument.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="true/1" href="ciaopdindex.html#true/1">true/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>true(PropertyConjunction)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <a class="idx_anchor" id="133" href="ciaocoindex.html#true assertion"></a> This assertion is identical syntactically to a <a class="idx_anchor" id="134" href="ciaoglindex.html#check/1"><tt>check/1</tt></a> assertion. However, the properties stated have been proved to hold by the analyzer. Thus, these assertions often represent the <a class="idx_anchor" id="135" href="ciaoglindex.html#analyzer output">analyzer output</a>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:property_conjunction/1)</span><span><span class="var">PropertyConjunction</span> is either a term or a <em>conjunction</em> of terms. The main functor and arity of each of those terms corresponds to the definition of a property. The first argument of each such term is a variable which appears as a head argument.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="false/1" href="ciaopdindex.html#false/1">false/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>false(PropertyConjunction)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <a class="idx_anchor" id="136" href="ciaocoindex.html#false assertion"></a> This assertion is identical syntactically to a <a class="idx_anchor" id="137" href="ciaoglindex.html#check/1"><tt>check/1</tt></a> assertion. However, the properties stated have been proved not to hold by the analyzer. Thus, these assertions often represent the <a class="idx_anchor" id="138" href="ciaoglindex.html#analyzer output">analyzer output</a>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (assertions_props:property_conjunction/1)</span><span><span class="var">PropertyConjunction</span> is either a term or a <em>conjunction</em> of terms. The main functor and arity of each of those terms corresponds to the definition of a property. The first argument of each such term is a variable which appears as a head argument.
</span>
</ul></div></div><p>
</div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Package Sections</h2><ul><LI><a href="#More info">More info</a><LI><a href="#Some attention points">Some attention points</a><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Documentation on new declarations">Documentation on new declarations</a><LI><a href="#Documentation on exports">Documentation on exports</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="AnnotatedProlog.html">&#x25C4;</a><a class="navbutton" href="assertions_props.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>