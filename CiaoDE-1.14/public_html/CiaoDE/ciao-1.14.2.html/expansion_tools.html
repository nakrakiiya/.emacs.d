<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>Code translation utilities &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="librowser.html">&#x25C4;</a><a class="navbutton" href="concurrency.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="MiscProlog.html">PART VI - Ciao library miscellanea</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>Code translation utilities</h1><a class="idx_anchor" href="ciaoliindex.html#expansion_tools"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Angel Fernandez Pineda" href="ciaoauindex.html#Angel Fernandez Pineda">Angel Fernandez Pineda</a>.<p>
This library offers a general way to perform clause body expansions. Goal, fact and spec translation predicates are authomatically called when needed, while this utility navigates through the meta-argument specification of the body itself. All predicates within this library must be called at <em>second-pass expansions</em>, since it uses information stored at <a class="idx_anchor" id="0" href="ciaoglindex.html#c_itf"><tt>c_itf</tt></a> library.<br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/>This library is provided as a tool for those modules which performs source-to-source code translation, usually known as <em>code expanders</em>. It may be loaded as other modules using a <a class="idx_anchor" id="1" href="ciaoglindex.html#use_module/1"><tt>use_module/1</tt></a>. Nothing special needs to be done.<LI><strong>Exports:</strong><br/><ul class="itemize_minus"><LI><em>Predicates:</em><br/><a class="idx_anchor" id="2" href="ciaoglindex.html#imports_meta_pred/3"><tt>imports_meta_pred/3</tt></a>, <a class="idx_anchor" id="3" href="ciaoglindex.html#body_expander/6"><tt>body_expander/6</tt></a>, <a class="idx_anchor" id="4" href="ciaoglindex.html#arg_expander/6"><tt>arg_expander/6</tt></a>.
</ul><LI><strong>Other modules used:</strong><br/><ul class="itemize_minus"><LI><em>System library modules:</em><br/><a class="idx_anchor" id="5" href="ciaoglindex.html#compiler/c_itf"><tt>compiler/c_itf</tt></a>.
</ul></ul></div></div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="imports_meta_pred/3" href="ciaopdindex.html#imports_meta_pred/3">imports_meta_pred/3</a>:</div><div class="deftext">Macro provided in order to know meta-predicate specifications accessible from a module.<p><strong>Usage:</strong> <tt>imports_meta_pred(Module,MetaSpec,AccessibleAt)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Tells whether <span class="var">MetaSpec</span> meta-predicate specification is accessible from <span class="var">Module</span>. <span class="var">AccessibleAt</span> will be binded to &apos;-&apos; whether meta-predicate is a builtin one. If not, it will be unified with the module which defines the meta-predicate. <LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Module</span> is an atom.
</span><br/><span class="on_right"> (basic_props:term/1)</span><span><span class="var">MetaSpec</span> is any term.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="body_expander/6" href="ciaopdindex.html#body_expander/6">body_expander/6</a>:</div><div class="deftext">This predicate is the main translation tool. It navigates through a clause body, when a single <em>goal</em> appears, user-code is called in order to perform a translation. Whether user-code fails to translate the involved goal, it remains the same. Regardless that goal is translated or not, an argument expansion will be performed over all goals if applicable (see <a class="idx_anchor" id="6" href="ciaoglindex.html#arg_expander/6"><tt>arg_expander/6</tt></a> predicate).<p>Variable (unknown at compile time) goals will also be attempt to translate. <br/>
<em>Meta-predicate</em> with arguments: <tt>body_expander((pred 3),(pred 3),(pred 3),?,?,?)</tt>.<br/><p><strong>Usage:</strong> <tt>body_expander(GoalTrans,FactTrans,SpecTrans,Module,Body,ExpandedBody)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Translates <span class="var">Body</span> to <span class="var">ExpandedBody</span> by the usage of user-defined translators <span class="var">GoalTrans</span>, <span class="var">FactTrans</span> and <span class="var">SpecTrans</span>. The module where the original body appears must be unified with <span class="var">Module</span> argument. <LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (expansion_tools:goal_expander/1)</span><span><span class="var">GoalTrans</span> is a user-defined predicate which performs <em>goal</em> meta-type translation
</span><br/><span class="on_right"> (expansion_tools:fact_expander/1)</span><span><span class="var">FactTrans</span> is a user-defined predicate which performs <em>fact</em> meta-type translation
</span><br/><span class="on_right"> (expansion_tools:spec_expander/1)</span><span><span class="var">SpecTrans</span> is a user-defined predicate which performs <em>spec</em> meta-type translation
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Module</span> is an atom.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">ExpandedBody</span> is a free variable.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="arg_expander/6" href="ciaopdindex.html#arg_expander/6">arg_expander/6</a>:</div><div class="deftext">This predicate is an auxiliary translation tool, which is used by <a class="idx_anchor" id="7" href="ciaoglindex.html#body_expander/6"><tt>body_expander/6</tt></a> predicate. It remains exported as a macro. The predicate navigates through the <em>meta-argument specification</em> of a goal. Whether a <em>goal,fact or spec</em> argument appears, user-code is called in order to perform a translation. Whether user-code fails to translate the involved argument, it remains the same. Builtins as &apos;,&apos;/2 or &apos;;&apos;/2 are treated as meta-predicates defining <em>goal</em> meta-arguments. When a <em>goal</em> meta-argument is located, <a class="idx_anchor" id="8" href="ciaoglindex.html#body_expander/6"><tt>body_expander/6</tt></a> will be called in order to navigate through it. Notice that a <em>goal</em> meta-argument may be unified with another goal defining another meta-argument, so navigation is required. If arguments are not known to arg_expander/6, translation will not occur. This is posible whether goal or qualifing module are variables. <br/>
<em>Meta-predicate</em> with arguments: <tt>arg_expander((pred 3),(pred 3),(pred 3),?,?,?)</tt>.<br/><p><strong>Usage:</strong> <tt>arg_expander(GoalTrans,FactTrans,SpecTrans,Module,Goal,ExpandedGoal)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Translates <span class="var">Goal</span> to <span class="var">ExpandedGoal</span> by applying user-defined translators (<span class="var">GoalTrans</span>, <span class="var">FactTrans</span> and <span class="var">SpecTrans</span>) to each meta-argument present at such goal. The module where the original goal appears must be unified with <span class="var">Module</span> argument. <LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (expansion_tools:goal_expander/1)</span><span><span class="var">GoalTrans</span> is a user-defined predicate which performs <em>goal</em> meta-type translation
</span><br/><span class="on_right"> (expansion_tools:fact_expander/1)</span><span><span class="var">FactTrans</span> is a user-defined predicate which performs <em>fact</em> meta-type translation
</span><br/><span class="on_right"> (expansion_tools:spec_expander/1)</span><span><span class="var">SpecTrans</span> is a user-defined predicate which performs <em>spec</em> meta-type translation
</span><br/><span class="on_right"> (basic_props:atm/1)</span><span><span class="var">Module</span> is an atom.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">ExpandedBody</span> is a free variable.
</span>
</ul></div></div><p>
</div><div id="Documentation on internals"><h2>Documentation on internals</h2><div><span class="on_right">PROPERTY</span><div class="defname"><a class="idx_anchor" id="expander_pred/1" href="ciaoprindex.html#expander_pred/1">expander_pred/1</a>:</div><div class="deftext"><p><strong>Usage:</strong> <tt>expander_pred(Pred)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> <span class="var">Pred</span> is a user-defined predicate used to perform code translations. First argument will be binded to the corresponding term to be translated. Second argument must be binded to the corresponding translation. Third argument will be binded to the current module were first argument appears. Additional arguments will be user-defined. </ul></div></div><p>
</div><div id="Known bugs and planned improvements"><h2>Known bugs and planned improvements</h2><ul><LI><em>pred(N)</em> meta-arguments are not supported at this moment.</ul></div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Module Sections</h2><ul><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Documentation on exports">Documentation on exports</a><LI><a href="#Documentation on internals">Documentation on internals</a><LI><a href="#Known bugs and planned improvements">Known bugs and planned improvements</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="librowser.html">&#x25C4;</a><a class="navbutton" href="concurrency.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>