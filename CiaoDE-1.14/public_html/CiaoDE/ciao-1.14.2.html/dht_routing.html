<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><title>Finger table and routing information &mdash; The Ciao System v1.14#2</title></head><body><div class="nav"><span class="on_right"><a class="navbutton" href="dht_logic.html">&#x25C4;</a><a class="navbutton" href="dht_logic_misc.html">&#x25BA;</a></span><span><a href="ciao.html">The Ciao System</a> &raquo; <a href="Contrib.html">PART XI - Contributed libraries</a> &raquo; <a href="dht_doc.html">Ciao DHT Implementation</a> &raquo; <a href="dht_server.html">Top-level interface to a DHT server</a> &raquo; <a href="dht_logic.html">DHT-related logics</a> &raquo; </span></div><div class="documentwrapper"><div class="document"><div class="mainwrapper"><div class="main"><div id=""><h1>Finger table and routing information</h1><a class="idx_anchor" href="ciaoliindex.html#dht_routing"></a>
<strong>Author(s):</strong> <a class="idx_anchor" id="Arsen Kostenko" href="ciaoauindex.html#Arsen Kostenko">Arsen Kostenko</a>.<p>
This module holds the basic operations over the finger table and other routing information. Developed for the sake of simplicity, it should be used only within the <a class="idx_anchor" id="0" href="ciaoglindex.html#dht_logic.pl"><tt>dht_logic.pl</tt></a> file. Probably the most important and abstract part of the routing is the finger table. Here is a finger table copy of the node representing identifier 0 (from the Chord paper):<p><pre> finger_table(1, 1, finger_interval(1,2), 1).
 finger_table(2, 2, finger_interval(2,4), 3).
 finger_table(3, 4, finger_interval(4,0), 0).
</pre>.<p>This table reflects the case where there are 8 identifiers in total in the identifier circle and three running nodes with identifiers 0, 1, and 3. In general each entry can be represented as <tt>finger_table(idx, start, interval, succ)</tt>. Here is a brief description of each argument:<ul> <LI> <tt>idx</tt> - Since arrays are not native for Prolog, I put the index as the first argument to the finger_table predicate to achieve indexing. <LI> <tt>start</tt> - ID that starts the corresponding section of the table. <LI> <tt>interval</tt> - IDs that fit into the corresponding section of table, represented in the form: <tt>finger_interval(interval_start, interval_end).</tt>, where: <ul> <DT>interval_start<dd> - ID that starts this interval. <DT>interval_end<dd> - first ID of the next interval. </ul> <LI> <tt>succ</tt> - ID of node responsible for the corresponding section of table, represented in <tt>node_id(id, ip).</tt> form, where: <ul> <DT>id<dd> - ID of a node. <DT>ip<dd> - IP address of a node. </ul> </ul><br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="cartouche"><ul><LI><strong>Library usage:</strong><br/><tt>:- use_module(library(dht_routing)).</tt><LI><strong>Exports:</strong><br/><ul class="itemize_minus"><LI><em>Predicates:</em><br/><a class="idx_anchor" id="1" href="ciaoglindex.html#dht_finger_table/2"><tt>dht_finger_table/2</tt></a>, <a class="idx_anchor" id="2" href="ciaoglindex.html#dht_finger_start/2"><tt>dht_finger_start/2</tt></a>, <a class="idx_anchor" id="3" href="ciaoglindex.html#dht_update_finger/2"><tt>dht_update_finger/2</tt></a>, <a class="idx_anchor" id="4" href="ciaoglindex.html#dht_set_finger/4"><tt>dht_set_finger/4</tt></a>, <a class="idx_anchor" id="5" href="ciaoglindex.html#dht_predecessor/1"><tt>dht_predecessor/1</tt></a>, <a class="idx_anchor" id="6" href="ciaoglindex.html#dht_set_predecessor/1"><tt>dht_set_predecessor/1</tt></a>, <a class="idx_anchor" id="7" href="ciaoglindex.html#dht_reset_predecessor/0"><tt>dht_reset_predecessor/0</tt></a>.
</ul></ul></div></div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="dht_finger_table/2" href="ciaopdindex.html#dht_finger_table/2">dht_finger_table/2</a>:</div><div class="deftext">It serves as a read-only interface to the finger table information as follows: <span class="var">Idx</span> stands for an index in an array, and <span class="var">Node</span> is the number of the node which is recorded in the entry with that index.<p><strong>Usage 1:</strong> <tt>dht_finger_table(Idx,Node)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> This case is equal to getting any (possibly random) entry from the finger table.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Idx</span> is a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Node</span> is a free variable.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Idx</span> is an integer.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Node</span> is an integer.
</span>
</ul><p><strong>Usage 2:</strong> <tt>dht_finger_table(Idx,Node)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Get some (one or several if backtracking is exploited) indexes that mention particular node numer, supplied as <span class="var">Node</span>.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Idx</span> is a free variable.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Node</span> is an integer.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Idx</span> is an integer.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Node</span> is an integer.
</span>
</ul><p><strong>Usage 3:</strong> <tt>dht_finger_table(Idx,Node)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Get the identifier of the node, indexed by <span class="var">Idx</span>. Theoretically, there should be no more than on entry for each value of index.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Idx</span> is an integer.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Node</span> is a free variable.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Idx</span> is an integer.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Node</span> is an integer.
</span>
</ul><p><strong>Usage 4:</strong> <tt>dht_finger_table(Idx,Node)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Check whether a particular combination (index and node number) is present in finger table.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Idx</span> is an integer.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Node</span> is an integer.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="dht_finger_start/2" href="ciaopdindex.html#dht_finger_start/2">dht_finger_start/2</a>:</div><div class="deftext">This predicate may be regarded as a read-only interface to map between the index is a finger table and the beginning of the section of the DHT circle.<p><strong>Usage 1:</strong> <tt>dht_finger_start(Idx,NextId)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Get any entry, in other words and entry that has any index and points to any segment in the circle. Common constraints on finger tables, do hold anyway:<ul> <LI> result unifies with the content of finger table; <LI> predicate enumerates possible results on backtracking. </ul><LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Idx</span> is a free variable.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">NextId</span> is a free variable.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Idx</span> is an integer.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">NextId</span> is an integer.
</span>
</ul><p><strong>Usage 2:</strong> <tt>dht_finger_start(Idx,NextId)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Ask for the index of entry that mentions a particular node as the starting one.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">Idx</span> is a free variable.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">NextId</span> is an integer.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Idx</span> is an integer.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">NextId</span> is an integer.
</span>
</ul><p><strong>Usage 3:</strong> <tt>dht_finger_start(Idx,NextId)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Get the starting node for a certain entry of finger table.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Idx</span> is an integer.
</span><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">NextId</span> is a free variable.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Idx</span> is an integer.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">NextId</span> is an integer.
</span>
</ul><p><strong>Usage 4:</strong> <tt>dht_finger_start(Idx,NextId)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Check for the presence of a correspondence between a certain entry and its starting node.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Idx</span> is an integer.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">NextId</span> is an integer.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="dht_update_finger/2" href="ciaopdindex.html#dht_update_finger/2">dht_update_finger/2</a>:</div><div class="deftext"><a class="idx_anchor" id="8" href="ciaoglindex.html#dht_update_finger/2"><tt>dht_update_finger/2</tt></a> takes care of changing node value to <span class="var">NodeId</span> for entry with index number equal to <span class="var">Idx</span>. This predicate has entirely imperative behavior. Both arguments are to be ground at the moment of call.<p><strong>Usage:</strong> <tt>dht_update_finger(Idx,NodeId)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Stores supplied information, previously erasing all old information.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Idx</span> is an integer.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">NodeId</span> is an integer.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="dht_set_finger/4" href="ciaopdindex.html#dht_set_finger/4">dht_set_finger/4</a>:</div><div class="deftext">This predicate sets the value of finger table entries. If any entry with the same index (<span class="var">Idx</span>) exists, it is erased before new value is asserted.<p><strong>Usage:</strong> <tt>dht_set_finger(Idx,Start,End,Node)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> All the arguments are to be ground and of type integer.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Idx</span> is an integer.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Start</span> is an integer.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">End</span> is an integer.
</span><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">Node</span> is an integer.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="dht_predecessor/1" href="ciaopdindex.html#dht_predecessor/1">dht_predecessor/1</a>:</div><div class="deftext">A common read-only interface to get or check the ID of the predecessor node.<p><strong>Usage 1:</strong> <tt>dht_predecessor(PredId)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Get number of predecessor node.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (term_typing:var/1)</span><span><span class="var">PredId</span> is a free variable.
</span>
<LI><em>The following properties should hold upon exit:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">PredId</span> is an integer.
</span>
</ul><p><strong>Usage 2:</strong> <tt>dht_predecessor(PredId)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Check whether particular number is associated with current predecessor.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">PredId</span> is an integer.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="dht_set_predecessor/1" href="ciaopdindex.html#dht_set_predecessor/1">dht_set_predecessor/1</a>:</div><div class="deftext">Write interface for predecessor ID. It checks the type of its argument and saves argument locally.<p><strong>Usage:</strong> <tt>dht_set_predecessor(PredId)</tt>
<ul class="itemize_minus"><LI><em>Description:</em> Save <span class="var">PredId</span> as the ID of predecessor for current node.<LI><em>The following properties should hold at call time:</em><br/><span class="on_right"> (basic_props:int/1)</span><span><span class="var">PredId</span> is an integer.
</span>
</ul></div></div><p>
<div><span class="on_right">PREDICATE</span><div class="defname"><a class="idx_anchor" id="dht_reset_predecessor/0" href="ciaopdindex.html#dht_reset_predecessor/0">dht_reset_predecessor/0</a>:</div><div class="deftext">Set value of preceding node index to &apos;nil&apos; whatever it&apos;s prior value is.</div></div><p>
</div></div></div></div></div><div class="sidebarwrapper"><div class="sidebar"><IMG SRC="autofigciao-shadow-64h.png"><h2>Module Sections</h2><ul><LI><a href="#Usage and interface">Usage and interface</a><LI><a href="#Documentation on exports">Documentation on exports</a></ul><h2>Global Links</h2><ul><LI><a href="ciaofulltoc.html">Table of Contents</a><LI><a href="ciaochanges.html">Version/Change Log</a><LI><a href="ciaorefs.html">References</a><LI><a href="ciaocopyright.html">Copyright</a></ul><h2>Indices</h2><ul><LI><a href="ciaoliindex.html">Library/Module Index</a><LI><a href="ciaopdindex.html">Predicate/Method Index</a><LI><a href="ciaoprindex.html">Property Index</a><LI><a href="ciaoteindex.html">Regular Type Index</a><LI><a href="ciaodeindex.html">Declaration Index</a><LI><a href="ciaocoindex.html">Concept Index</a><LI><a href="ciaoauindex.html">Author Index</a><LI><a href="ciaoglindex.html">Global Index</a></ul></div></div><div class="clearer"></div></div><div class="nav"><span class="on_right"><a class="navbutton" href="dht_logic.html">&#x25C4;</a><a class="navbutton" href="dht_logic_misc.html">&#x25BA;</a></span><span>&nbsp;</span></div><div class="footer">Generated with LPdoc using Ciao</div></body></html>